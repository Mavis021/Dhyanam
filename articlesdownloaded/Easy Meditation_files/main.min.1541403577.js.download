
function Main(){this.socialOpen=true;this.dropFilterOpen=false;this.searchOpen=false;this.menuOpen=false;this.mobileMenuOpen=false;this.iscroll=function(c,d){if($(d).length>0){var b=$(".speakingtree .menu-top-move-right .menu-top-move-row-1");var a=$(d).offset().top;$(b).scrollTop(a);$(".menu-top-move-row-2 button").removeClass("active");$(c).addClass("active")}};this.initMenu=function(b,a){a.click(function(){b.addClass("visible");setTimeout(function(){b.addClass("active")},10)});b.children(".close-menu").click(function(){b.removeClass("active");setTimeout(function(){b.removeClass("visible")},600)})};this.openMenu=function(b){var a=this;$(b).addClass("visible");setTimeout(function(){$(b).addClass("active");$(document).on("click.menu",function(c){if($(c.target).closest(b).length){return}a.closeMenu(b);c.preventDefault()})},10);this.ownFadeShow()};this.closeMenu=function(){$(".move-menu").removeClass("active");$(".move-menu").removeClass("visible");$(document).off("click.menu");this.ownFadeHide()};this.init=function(){this.initMenu($("#menu-top-move-right"),$(".sprite2-mail-b"));this.initMenu($("#left-menu"),$(".drop-user-box"));var a=this;var c=$(window);$(".open-move-menu").click(function(){a.openMenu(this.getAttribute("data-value"))});$(".move-menu .close").click(function(){a.closeMenu()});$(".top-bar-search-btn").click(function(){a.searchToggle()});$(".top-left-menu").click(function(){a.menuToggle()});$(".master-input,.city-input").click(function(){a.dropFilterToggle(this,"")});$(".filter-input").click(function(){a.dropFilterToggle(this,"")});$("#filter_div").click(function(){a.dropFilterToggle(this,"profile")});var b=$("#fixed-left-bottom");$(".button-to-top").click(function(){$("html, body").animate({scrollTop:0},"500","swing",function(){})});c.scroll(function(){if(c.scrollTop()<200){if(b.hasClass("active")){b.removeClass("active")}}else{if(!b.hasClass("active")){b.addClass("active")}}});c.resize(function(){a.recalculate()});this.recalculate();$("#search-form").submit(function(){var e=$("#search-input").val();if(!e){return false}$(".ui-menu-item").hide();$("#search-block .filter-input").fadeIn("fast");var d=$("#terrible-ajax-data").html();$("#main-content").html(d);a.recalculate();a.initCarousel();return false});$("#search-filter .drop-filter-li").click(function(){$(".drop-filter-li").removeClass("active");$(this).addClass("active");$("#search-filter-text").text($(this).text())});$(".comment-open-button").click(function(){$("#comment-block").toggle()})};this.recalculate=function(){$(".article").each(function(){var a=new Image();var b=$(this);a.src=b.children(".article-img").attr("src");a.onload=function(d){var c=b.children(".article-img").height();b.height(c*0.94)}})};this.searchToggle=function(){if(this.searchOpen===true){this.searchHide()}else{this.searchShow()}};this.menuToggle=function(){if(this.menuOpen===true){this.menuHide()}else{this.menuShow()}};this.mobileMenuToggle=function(){if(this.mobileMenuOpen===true){this.mobileMenuHide()}else{this.mobileMenuShow()}};this.searchHide=function(){this.dropHide();$(".top-bar-search-btn").removeClass("active");$("#search-block").removeClass("active");$("#main-content").removeClass("search");this.searchOpen=false;setTimeout(function(){$("#search-block").removeClass("visible")},600)};this.menuHide=function(){$(".nav-detail-cont").hide("slide",{direction:"left"},600);$(".top-left-menu").removeClass("active");$("#drop-bar").removeClass("active");this.menuOpen=false;setTimeout(function(){$("#drop-bar").removeClass("visible");$(".tlm-menu").removeClass("active");$("#top-left-menu-main").hide()},600)};this.mobileMenuHide=function(){$(".mobile-top-left-menu").removeClass("active");$("#menu-modal").removeClass("active");this.mobileMenuOpen=false;setTimeout(function(){$("#menu-modal").removeClass("visible")},600)};this.menuShow=function(){$("#drop-bar").addClass("visible");$(".top-left-menu").addClass("active");this.menuOpen=true;setTimeout(function(){$("#drop-bar").addClass("active")},10)};this.mobileMenuShow=function(){$("#menu-modal").addClass("visible");$(".mobile-top-left-menu").addClass("active");this.mobileMenuOpen=true;setTimeout(function(){$("#menu-modal").addClass("active")},10)};this.searchShow=function(){index.dropHide();$("#search-block").addClass("visible");$(".top-bar-search-btn").addClass("active");$("#main-content").addClass("search");$("#searchTerm").focus();$("#searchTermHeader").focus();this.searchOpen=true;setTimeout(function(){$("#search-block").addClass("active")},10)};this.dropFilterToggle=function(b,a){if(this.dropFilterOpen===true){this.dropHide()}else{this.ownFadeShow();this.dropFilterShow(b,a)}};this.dropHide=function(){this.dropFilterHide();this.ownFadeHide()};this.dropFilterShow=function(f,c){var a=this;this.dropFilterOpen=true;var d=f.getBoundingClientRect();var b=f.getAttribute("data-filter");console.log(b);if(b=="#events-filter"||b=="#city-filter"){c="eventList"}console.log(c);$(b).css({top:d.height+d.top,width:d.width,});if(c=="profile"){$(b).css({top:d.height+d.top,width:d.width,})}else{if(c=="eventList"){var e=$(".filter-input-master")[0].getBoundingClientRect();$(b).css({top:e.height+e.top,width:e.width,})}else{$(b).css({top:d.height+d.top,left:d.left,width:d.width,})}}$(b).fadeIn("fast");$(f).addClass("active");setTimeout(function(){$(document).on("click.dropFilter",function(g){if($(g.target).closest(b).length){return}a.dropHide();g.preventDefault()})},100)};this.dropFilterHide=function(){this.dropFilterOpen=false;$(document).off("click.dropFilter");$(".filter-input").removeClass("active");$(".drop-filter").hide()};this.ownFadeShow=function(){};this.ownFadeHide=function(){}}var main=new Main;$(document).ready(function(){main.init()});