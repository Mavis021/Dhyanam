
var forumthread={setVars:function(c,b,a){forumthread.listTempLoaded=false;forumthread.listTempUrl="/assets/template/forumAnswers.tpl?"+a;forumthread.commentTempUrl="/assets/template/answerComments.tpl?"+a;forumthread.rightWightTempUrl="/assets/template/forumDetailBlockRight.tpl?"+a;forumthread.base_url=b;forumthread.listTempData="";forumthread.answerTempData="";forumthread.forumlistTempData="";forumthread.rightWidgetTempData="";forumthread.forumlistTempLoaded=false;forumthread.forumlistTempUrl="/assets/template/forumNewList.tpl?"+a},scrapFacebook:function(a){$.post("https://graph.facebook.com",{id:a,scrape:true},function(b){})},paginationFunction:function(b,a){$("#pagination-slide").pagination({pages:Math.ceil(b/12),currentPage:1,displayedPages:5,prevText:" << ",nextText:" >> ",edges:3,cssStyle:"light-theme",onPageClick:function(c,d){$.ajax({type:"GET",url:base_url+a+c+"/"+12,async:true,dataType:"json",beforeSend:function(){stickFooter.init();$("#appendUL").html('<div id="loaderCenter" style="height:320px;"><img class="loader bothCenter" src="/assets/images/loadingsample100.gif"></div>')},success:function(e){$("#loaderCenter").remove();if(e.length==0){}else{var f="";$.each(e,function(g,h){h.title=$("<div />").html(h.title).text();f=Mustache.to_html(forumthread.forumlistTempData,h);$("#appendUL").append(f)});stickFooter.init()}}})}})},loadListTemplate:function(){if(!forumthread.forumlistTempLoaded){forumthread.forumlistTempLoaded=true;$.ajax({type:"GET",async:false,url:forumthread.forumlistTempUrl,success:function(a){forumthread.forumlistTempData=a}})}},loadTemplate:function(){if(!forumthread.listTempLoaded){forumthread.listTempLoaded=true;$.ajax({type:"GET",async:false,url:forumthread.listTempUrl,success:function(a){forumthread.listTempData=a}});$.ajax({type:"GET",async:false,url:forumthread.commentTempUrl,success:function(a){forumthread.answerTempData=a}});$.ajax({type:"GET",async:false,url:forumthread.rightWightTempUrl,success:function(a){forumthread.rightWidgetTempData=a}})}$(".right-widget").bind("click",function(){var b=$(this).attr("data-type");var a=$(this).attr("data-public-id");$(".right-widget").removeClass("active");$(".right-widget").addClass("st-color");$(this).removeClass("st-color");$(this).addClass("active");if(b!=undefined){forumthread.loadDiscussions(b,a)}})},loadDiscussions:function(c,a){var b=base_url+"/forumrightwidget/"+c;var d=false;if(c=="myQuestions"){var b=base_url+"/"+a+"/forumrightwidget/"+c}if(d==false){d=true;$.ajax({type:"GET",url:b,dataType:"json",beforeSend:function(){$("#appendUL").css("height","50px").html('<div  id="loaderCenter" class="bothCenter" ><img class="loader" src="/assets/images/ajax-loader-45.gif"></div>')},success:function(e){$("#loaderCenter").remove().parent().removeAttr("style");if(e==""){htmldiv="<span class='st-color'><a href='"+base_url+"/discussions/trending'>Start following a discussion</a><span class='st-black'> or </span><a onclick =\"javascript:forumthread.sendDiscussionPop('/discussions/trending','1');return false;\">create a new discussion now</a></span>";$("#appendUL").html(htmldiv)}$.each(e,function(f,g){g.title=$("<div />").html(g.title).text();blogListBlock=Mustache.to_html(forumthread.rightWidgetTempData,g);$("#appendUL").append(blogListBlock)});d=false}})}},checkValid:function(a){if(a==""){content.showMessage("Please enter discussion title","error");return false}else{return true}},sendDiscussionPop:function(f,d,b){if(!user.checkLogin()){csso.openSSOPopup();return false}var c="/senddiscussion";var a="";if(d!=undefined){a="&uid="+d+"&discussionText="+b}var e="random"+(new Date().getTime())+"&return="+f+a;popup.data=e;popup.init(c,"pp_main")},deleteQuestion:function(a,b){if(!user.checkLogin()){csso.openSSOPopup();return false}var d={};d.commentaction="Delete";d.question_id=a;d.user_id=b;var c="Do you want to delete your question?";show_confirm_diolog(c,11,d,"Delete Question")},replyForum:function(f,b,e,a){if(!user.checkLogin()){csso.openSSOPopup();return false}forumthread.loadTemplate();$("div[id^='rpy_form_']").html("");$("div[id^='rpy_form_']").hide();var d=forumthread.replyForumHTML(f,b,e,a);var c="rpy_form_"+f;document.getElementById(c).innerHTML=d;document.getElementById(c).style.display="";return false},deleteForum:function(d,a){var c="Do you want to delete selected Forum";var b={};b.selids=d;b.uid=a;show_confirm_diolog(c,11,b,"Delete message")},replyForumHTML:function(e,c,d,a){var b="";b+="<form action ='' name='forum_reply_"+e+"' id='forum_reply_"+e+"' method='post'><input type='hidden' name='boardmessageid' value='"+e+"' /><input type='hidden' name='commentaction' value='Reply' /><input type='hidden' name='userid' value='"+c+"' /><input type='hidden' name='author_id' id='author_id' value='"+a+"' />";b+=' <div class="messenger-image"><img class="user-small-img" src="'+d+"\" alt=\"\"></div><div class='message-detail-rt'><textarea class='message-detail-textarea' name='comment' id='comment-reply' placeholder='Write a reply...'></textarea><span class='send-button' id ='submitbutton' onClick='forumthread.forumReply(\""+e+'","'+c+"\");return false;'><i class='sprite sprite-send bothCenter'></i><div class='hide' id='forumLoader'><img src='/assets/images/loadingsample100.gif'></div></span></div>";b+="</form>";return b},forumReply:function(e,a){if(!user.checkLogin()){csso.openSSOPopup();return false}var d="forum_reply_"+e;var c=document.forms[d].comment.value;if(c==""||c=="start typing"){content.showMessage("Enter Comment","error");document.forms[d].comment.focus();return false}else{var b=$("#"+d).serialize();$("#forumLoader").show();$.ajax({type:"POST",url:"/forum/saveReply",data:b,beforeSend:function(){$("#forumLoader").show();$("#submitbutton").attr("disabled","disabled");$("#submitbutton").hide();document.forms[d].comment.value=""},success:function(h){var g=h;dataArray=h.split("##");console.log(dataArray);if(dataArray[1]=="error"){content.showMessage("Please enter valid reply","error");$("#submitbutton").removeAttr("disabled");$("#submitbutton").show()}else{var f="";$("#submitbutton").removeAttr("disabled");$("#submitbutton").show();document.forms[d].comment.value="";$("#forumLoader").hide();$("#rpy_form_"+e).html();$("#rpy_form_"+e).hide();jsonData=$.parseJSON(g);f=Mustache.to_html(forumthread.listTempData,jsonData[0]);$(".responses-cont").prepend(f);$(".answerCommenttext").bind("contextmenu paste drop",function(i){i.preventDefault()})}}})}},vote_up_down:function(c,d,e,b,f){if(!user.checkLogin()){csso.openSSOPopup();return false}var h=$("#vote_"+e+"_"+d).html();var a=$("#vote_"+d).attr("data-click");if(a=="0"){event.stopPropagation()}else{var g={};g.content_id=c;g.answer_id=d;g.user_id=b;g.state=f;$.ajax({type:"POST",url:"/forum/voteUpdate",data:g,beforeSend:function(){$("#vote_"+e+"_"+d).html('<div ><img class="loader" src="/assets/images/ajax-loader-1.gif"></div>')},success:function(k){var l=trim(k);var i=k.replace(/\s+/g,"");if(i=="success"){var j=parseInt(h)+1;$("#vote_"+e+"_"+d).html(j);$("#vote_"+d).attr("data-click","0");$("#mainvote"+e+"_"+d).addClass("vote-done-"+e);if($("#mainvotedown_"+d).length>0){$("#mainvotedown_"+d).off("click");$("#mainvoteup_"+d).off("click")}}}})}},voteStates:function(b,a){result=JSON.parse(b);if(result!=null){$.each($.parseJSON(b),function(d,e){if($("#mainvotedown_"+d).length>0){if(e==1){var f="up"}else{if(e==2){var f="down"}}var c=$("#vote_"+d).attr("data-click");if(c=="1"){$("#vote_"+d).attr("data-click","0");$("#mainvote"+f+"_"+d).addClass("vote-done-"+f)}$("#mainvoteup_"+d).unbind("click");$("#mainvotedown_"+d).unbind("click");$("#mainvotedown_"+d).off("click");$("#mainvoteup_"+d).off("click")}})}},commentsBox:function(b,a){if($("#answer_comment_"+b).css("display")=="none"){$("#accordion_"+b).switchClass("accordion-open","accordion-class");$.ajax({type:"GET",url:base_url+"/ajax/loadanswercomment/"+b+"/"+a+"/1",beforeSend:function(){$("#answer_comment_"+b).find(".replies").html('<div id="imgLoad"><img class="loader" src="/assets/images/ajax-loader-45.gif"></div>')},success:function(c){$("#answer_comment_"+b+" .replies #imgLoad").remove();if(c==0){}else{$.each($.parseJSON(c),function(d,e){var f=Mustache.to_html(forumthread.answerTempData,e);$("#answer_comment_"+b+" .replies").append(f);$(".load-more-btn").bind("click",function(){var g=$(this).attr("data-comment-id");forumthread.loadmorecomments(g)});$(".load-more-btn a").bind("click",function(g){g.preventDefault();$(this).parent(".load-more-btn").trigger("click");return false})})}$(".answerCommenttext").bind("contextmenu paste drop",function(d){d.preventDefault()})}})}if($("#answer_comment_"+b).css("display")=="none"){$("#answer_comment_"+b).show();$("#accordion_"+b).switchClass("accordion-open","accordion-close")}else{$("#answer_comment_"+b).hide();$("#accordion_"+b).switchClass("accordion-close","accordion-open")}},forumComment:function(d,b){var c=document.forms[d].comment.value;if(c==""||c=="Write a Comment..."){content.showMessage("Enter Comment","error");document.forms[d].comment.focus();return false}else{var a=$("#"+d).serialize();$("#submitbutton").attr("disabled","disabled");$("#submitbutton").hide();$("#forumCommentLoader").show();$.ajax({type:"POST",url:"/commentsection/saveComment",data:a,beforeSend:function(){$("#forumCommentLoader").show();$("#submitbutton").hide();$("#submitbutton").attr("disabled","disabled");document.forms[d].comment.value=""},success:function(e){$("#forumCommentLoader").hide();$("#submitbutton").show();dataArray=e.split("##");if(dataArray[0]==0){content.showMessage(dataArray[1],"success");document.forms[d].comment.value=""}else{$("#repliesComment_"+b).prepend(e);document.forms[d].comment.value=""}},})}},deleteCommentAnswer:function(b,a,e){if(!user.checkLogin()){csso.openSSOPopup();return false}var d={};d.commentaction="Delete";d.contentid=a;d.commentid=b;d.commenttype=e;var c="Do you want to delete this comment?";show_confirm_diolog(c,6,d,"Delete Comment")},forumReplyAnswer:function(b,a,f){if(!user.checkLogin()){csso.openSSOPopup();return false}$("div[id^='ans_cmt_rpy_form_']").html("");$("div[id^='ans_cmt_rpy_form_']").hide();var e=forumthread.replyAnswerFormHTML(b,a,f);var d="cmt_rpy_form_"+b;var c="cmt_rpy_btn_"+b;document.getElementById(d).innerHTML=e;$(".comment-reply").bind("contextmenu paste drop",function(g){g.preventDefault()});$("#artifical-bot-"+b).addClass("artifical-bot");$("#"+d).show()},replyAnswerFormHTML:function(c,a,d){var b="";b+="<div class='add-comment'><form action ='' name='answer_reply_"+c+"' id='answer_reply_"+c+"' method='post'><input type='hidden' name='parentcommentid' value='"+c+"' /><input type='hidden' name='commentaction' value='Reply' /><input type='hidden' name='contentid' value='"+a+"' /><input type='hidden' name='content_type' value='"+d+"' />";b+=" <textarea  name='comment' id='comment-reply' class='comment-reply' placeholder='Add your comment'></textarea><button onClick='forumthread.replyAnswerComment(\""+c+"\");return false;' id='buttonAnswer_"+c+"'>COMMENT</button><div class='loader' id='forumReplyLoader'><img src='/assets/images/ajax-loader-1.gif'></div>";b+="</form>";return b},hideElement:function(a){document.getElementById(a).style.display="none"},replyAnswerComment:function(a){if(!user.checkLogin()){csso.openSSOPopup();return false}var d="answer_reply_"+a;var c=document.forms[d].comment.value;if(c==""||c=='"Write a reply...'){content.showMessage("Enter Comment","error");document.forms[d].comment.focus();return false}else{var b=$("#"+d).serialize();$("#forumReplyLoader").show();$("#buttonAnswer"+a).hide();$.ajax({type:"POST",url:"/content-comments/saveReply",data:b,beforeSend:function(){$("#forumReplyLoader").show()},success:function(e){$("#forumReplyLoader").hide();dataArray=e.split("##");if(dataArray[0]==0){content.showMessage(dataArray[1],"success")}else{$("#cmt_rpy_txt_"+a).prepend(e);$("#cmt_rpy_txt_"+a).show()}$("#cmt_rpy_form_"+a).html();$("#cmt_rpy_form_"+a).hide();document.forms[d].comment.value="";return false}});return false}},loadmorecomments:function(b){var d=$("#main-comment-end-"+b);var f=d.attr("data-page");var g=parseInt(d.attr("data-limit"));var e=d.attr("data-content");var c=parseInt(d.attr("data-total"));var a=parseInt(d.attr("data-delete"));forumthread.loadTemplate();$("#main-grid-end-link-comment-"+b).html("Loading...");$.ajax({type:"GET",url:base_url+"/ajax/loadanswercomment/"+e+"/"+a+"/"+f,beforeSend:function(){$("#main-grid-end-link-comment-"+b).html("Loading...")},success:function(h){if(h.length==0){}else{var i="";$.each($.parseJSON(h),function(j,k){var l=Mustache.to_html(forumthread.answerTempData,k);$(".indent-commnet .replies").append(l)})}if(c<g){$("#main-comment-end-"+b).remove()}else{$("#main-grid-end-link-user-"+b).html("Load More")}d.attr("data-page",parseInt(f)+1);d.attr("data-limit",parseInt(g)+5)}})}};$("#main-grid-end-link-discussion").click(function(){var c=$(".main-grid-end-discussion");var d=c.attr("data-page");var b=c.attr("data-paging-url");var a=base_url+b+d+"/"+10;$.ajax({type:"GET",url:base_url+b+d+"/"+10,async:true,dataType:"json",beforeSend:function(){$("#main-grid-end-link-discussion").html("Loading...")},success:function(e){if(e.length==0){$(".main-grid-end-discussion").remove()}else{trackAnalytics(a);var f="";$.each(e,function(g,h){h.title=$("<div />").html(h.title).text();f=Mustache.to_html(forumthread.forumlistTempData,h);$("#appendUL").append(f)})}$("#main-grid-end-link-discussion").html("Load More");c.attr("data-page",parseInt(d)+1)}})});$("#main-grid-end-link-user").click(function(){var c=$("#main-grid-end");var d=c.attr("data-page");var e=c.attr("data-limit");var a=c.attr("data-alias");var b=c.attr("data-total");forumthread.loadTemplate();$.ajax({type:"GET",url:base_url+"/forum/"+a+"/"+d,beforeSend:function(){$("#main-grid-end-link-user").html("Loading...")},success:function(f){if(f.length==0){}else{var g="";$.each($.parseJSON(f),function(h,i){g=Mustache.to_html(forumthread.listTempData,i);$(g).insertBefore("#main-grid-end")})}if(parseInt(b)<parseInt(e)){$("#main-grid-end").remove()}else{$("#main-grid-end-link-user").html("Load More")}c.attr("data-page",parseInt(d)+1);c.attr("data-limit",parseInt(e)+5);c.attr("data-alias",a)}})});