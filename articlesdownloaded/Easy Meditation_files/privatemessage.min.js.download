var privateMessage={setVars:function(){privateMessage.mouse_is_inside=false},sendMasterMessagePop:function(e,c){if(!user.checkLogin()){csso.openSSOPopup();return false}var b="/sendmessage/masters";var a="";if(c!=undefined){a="&uid="+c}var d="random"+(new Date().getTime())+"&return="+e+a;popup.data=d;popup.init(b,"pp_main")},sendMessagePop:function(e,c){if(!user.checkLogin()){csso.openSSOPopup();return false}var b="/sendmessage";var a="";if(c!=undefined){a="&uid="+c}var d="random"+(new Date().getTime())+"&return="+e+a;popup.data=d;popup.init(b,"pp_main")},setDataChecked:function(a){if($("#spanBox_"+a).attr("class").indexOf("checked")>0){$("#spanBox_"+a).removeClass("checked");$("#element_"+a).removeAttr("checked")}else{$("#spanBox_"+a).addClass("checked");$("#element_"+a).attr("checked","checked")}},deleteConversations:function(){ids="";$('input[id*="element_"]').each(function(){if($(this).attr("checked")!=undefined&&$(this).attr("checked")=="checked"){ids+=$(this).val()+","}});if(ids!=""){$.post("/deletePrivateConversations",{ids:ids},function(a){window.location.href=window.location.href})}else{content.showMessage("Please select a conversation to delete","error")}},show_delete_message_layer:function(e,a){var d=$("#mid").val();var c="Do you want to delete selected message.";var b={};b.selids=e;show_confirm_diolog(c,2,b,"Delete message")},setAllChecked:function(a){if($(a).hasClass("checked")){$(a).removeClass("checked");$('span[id*="spanBox_"]').each(function(){$(this).removeClass("checked");checkboxId=$(this).attr("id").split("spanBox_")[1];$("#element_"+checkboxId).removeAttr("checked")})}else{$(a).addClass("checked");$('span[id*="spanBox_"]').each(function(){$(this).addClass("checked");checkboxId=$(this).attr("id").split("spanBox_")[1];$("#element_"+checkboxId).attr("checked","checked")})}},deletePrivateMessages:function(){var a="";var b=$("#conversationId").val();$('input[id*="element_"]').each(function(c,d){if($(d).attr("checked")){a+=$(d).val()+"||"}});if(a==""){content.showMessage("Please select meaages.","error")}else{$.post("/deletePrivateMessages",{ids:a,conversationId:b},function(c){if(c.indexOf("success")>0){ids_array=a.split("||");if(ids_array!=undefined){for(i=0;i<ids_array.length;i++){$("#div_component_"+ids_array[i]).fadeOut()}}}})}},deleteIndividualMessage:function(a){if(a!=""){$("#element_"+a).attr("checked","checked");this.deletePrivateMessages()}},save_pvt_msg:function(frmname,devicetype){var frm=eval("document."+frmname);if(trim(frm.pvt_msg_area.value)==""){content.showMessage("Please type your reply before sending.","error")}else{if(trim(frm.pvt_msg_area.value)=="Type here to send message to "+frm.mname.value){content.showMessage("Please enter your message","error")}else{if(typeof devicetype==="undefined"||devicetype===null){$("#submitbutton").attr("disabled","disabled");$("#submitbutton").val("Sending...");devicetype="device"}else{$("#submitbutton_mobile").val("Sending...")}url=base_url+"/ajax/messages/save_pvt_msg";var params={};params.person_id=frm.person_id.value;params.comment=frm.pvt_msg_area.value;$.post(url,params,function(htmlData){if(htmlData.trim()=="blocked"){$("#submitbutton").removeAttr("disabled");$("#submitbutton_mobile").val("Send");content.showMessage("Oops! You donâ€™t have the user permission to send private message","error");return false}frm.pvt_msg_area.value="";$(".no_content_txt").hide();if(devicetype=="mobile"){$("#comment-reply_mobile").hide()}else{$("#message-detail-message").find(".alt-scroll-content").append(htmlData);fixHeightMessageCenter.init();setTimeout(function(){$("#message-detail-message").altScrollTo("end")},500);$("#submitbutton").removeAttr("disabled");$("#submitbutton_mobile").val("Send")}})}}return false},deleteLeft:function(k){if(!user.checkLogin()){csso.openSSOPopup();return false}try{var c={};var a=document.getElementById("msg_frm_delete_left");var d="";var j=false;for(var f=0;f<a.elements.length;f++){if(a.elements[f].checked==true){j=true;var g=$("#delmsgleft_"+a.elements[f].value);var l=g.attr("data-user");d+=l+","}}if(!j){content.showMessage("Please select conversations to delete","error")}else{c.user_id1=k;c.user_id2=d;var b="Do you want to delete conversation?";show_confirm_diolog(b,13,c,"Delete Message")}}catch(h){}},userBlock:function(j,d){if(!user.checkLogin()){csso.openSSOPopup();return false}try{var f={};var a=document.getElementById("msg_frm_delete_left");var g="";var m=false;for(var h=0;h<a.elements.length;h++){if(a.elements[h].checked==true){m=true;var k=$("#delmsgleft_"+a.elements[h].value);var n=k.attr("data-user");g+=n+","}}if(!m){content.showMessage("Please select a user to block","error")}else{f.user_id1=j;f.user_id2=g;f.fld=d;var b="";var c="";if(d==1){c="Block User?";b="Are you sure you want to block?"}else{c="Unblock User?";b="Are you sure you want to unblock??"}show_confirm_diolog(b,12,f,c)}}catch(l){}},openHover:function(a){if($("."+a).is(":hidden")){$("."+a).show()}else{$("."+a).hide()}},closeDivonMouseUp:function(a,b){$("."+a).hover(function(){privateMessage.mouse_is_inside=true},function(){privateMessage.mouse_is_inside=false});$("body").mouseup(function(){if(!privateMessage.mouse_is_inside){$("."+b).hide()}})}};