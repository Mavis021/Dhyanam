
var csso={openSSOPopup:function(d,a){var c=SSO_URL+"/identity/login?channel="+SSO_CHANNEL;if(a!=undefined){c=c+"&ru="+encodeURIComponent(a)}if(/iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)){window.location=c+"&ru="+encodeURIComponent(window.location)}else{var b=window.open(c,"sigintwtfbln","scrollbars=1,width=450,height=780");w=($(window).width()-450)/2;h=($(window).height()-780)/2;b.moveTo(w,h)}},callLogout:function(c){var a=base_url+"/nocache/logout?nocache=1";var b=SSO_URL+"/identity/profile/logout/external?channel="+SSO_CHANNEL+"&ru="+encodeURI(a);window.location=b},checkSso:function(a){if($.cookie("ssoid")==undefined){sloginid=null}else{sloginid=$.cookie("ssoid")}if($.cookie("sptree-logout")==undefined){slogout=null}else{slogout=$.cookie("sptree-logout")}if(slogout!=null||sloginid!=null){return false}var c=SSO_URL+"/crossdomain/getTicket?callback=?&version=v1&"+Math.random();var b={};$.getJSON(c,b).done(function(e){if(e.status=="true"){var d="/clogin/"+e.ticketId+"?crossDomainAuto=1&nocache=1&"+Math.random();$.ajax({type:"GET",dataType:"json",data:{},url:d,async:false,beforeSend:function(){var g="Please wait, you are logging in to speakingtree.in";var f='<div class="modal cms-title-modal fade modal-messages in" id="question-modal" tabindex="-1" role="dialog" aria-hidden="false" style="display: block; padding-right: 17px;"><div class="modal-dialog"><div class="modal-content"><div class="modal-body" id="modal-body"> <button type="button" class="btn-clear signup-modal-close" data-dismiss="modal" onClick="javascript:show_hide_div(\'pp_main\');show_hide_div(\'pp_divoverlay\');return false;"><span class="sprite sprite-close-grey" aria-hidden="true"></span><span class="sr-only">Close</span></button><div id="status-modal-h" style="font-size:16px;">'+g+'</div><div id="status-modal-footer"></div></div></div></div>';alert_popup("",f)},success:function(f){try{if(f.status=="success"){location.reload(true)}}catch(g){}}})}})},editProfile:function(a){if($.cookie("ssoid")==undefined){return}var c=SSO_URL+"/crossdomain/getTicket?callback=?&version=v1&"+Math.random();var b={};$.getJSON(c,b).done(function(d){if(d.status=="true"){location.href=SSO_URL+"/identity/profile/edit?channel="+SSO_CHANNEL+"&intent=updateprofile&intentru="+base_url+"/"+a+"/updateprofile"}else{location.href="/nocache/logout?nocache=1"}})},editPicture:function(a){if($.cookie("ssoid")==undefined){return}var c=SSO_URL+"/crossdomain/getTicket?callback=?&version=v1&"+Math.random();var b={};$.getJSON(c,b).done(function(d){if(d.status=="true"){location.href=SSO_URL+"/identity/profile/edit?channel="+SSO_CHANNEL+"&intent=updatepic&intentru="+base_url+"/"+a+"/updateprofile"}else{location.href="/nocache/logout?nocache=1"}})}};csso.checkSso();