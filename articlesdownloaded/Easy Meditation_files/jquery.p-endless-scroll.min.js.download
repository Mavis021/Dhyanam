(function(a){a.fn.pEndlessScroll=function(d){var i={bottomPixels:800,fireOnce:true,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",sequence:1,ajaxUrl:"",templateUrl:"",adCode:"",resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};var d=a.extend({},i,d);var f=true;var h=false;var c=d.sequence;var e=d.ajaxUrl;var g=d.templateUrl;var b=d.adCode;if(d.ceaseFire.apply(this)===true){f=false}if(f===true){a(this).scroll(function(){if(d.ceaseFire.apply(this)===true){f=false;return}if(this==document||this==window){var n=a(document).height()-a(window).height()<=a(window).scrollTop()+d.bottomPixels}else{var j=a(this).find(".alt-scroll-holder");if(j){var m=a(this).find(".alt-scroll-content");var l=m.css("top");l=parseInt(l);var n=m.height()>0&&(m.height()-j.height()<=d.bottomPixels-l)}else{var k=a(".endless_scroll_inner_wrap",this);if(k.length==0){k=a(this).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")}var n=k.length>0&&(k.height()-a(this).height()<=a(this).scrollTop()+d.bottomPixels)}}if(n&&(d.fireOnce==false||(d.fireOnce==true&&h!=true))){if(d.resetCounter.apply(this)===true){c=0}h=true;c++;a(d.insertAfter).after('<div id="endless_scroll_loader">'+d.loader+"</div>");data=typeof d.data=="function"?d.data.apply(this,[c]):d.data;if(data!==false){a(d.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>");a("div#endless_scroll_data").hide().fadeIn();a("div#endless_scroll_data").removeAttr("id");d.callback.apply(this,[c,e,g,b]);if(d.fireDelay!==false||d.fireDelay!==0){a("body").after('<div id="endless_scroll_marker"></div>');a("div#endless_scroll_marker").fadeTo(d.fireDelay,1,function(){a(this).remove();h=false})}else{h=false}}a("div#endless_scroll_loader").remove()}})}}})(jQuery);