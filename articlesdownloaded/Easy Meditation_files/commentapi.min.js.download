function replyComment(commentId,cId,fbFlag,twFlag,contentType,masterFlag)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
$("div[id^='cmt_rpy_form_']").html('');$("div[id^='cmt_rpy_form_']").hide();var replyForm=replyFormHTML(commentId,cId,fbFlag,twFlag,contentType);var obj='cmt_rpy_form_'+commentId;var objbut='cmt_rpy_btn_'+commentId;document.getElementById(obj).innerHTML=replyForm;if(masterFlag=='0'){$("#comment-reply").bind("contextmenu paste drop",function(e){e.preventDefault()})}
document.getElementById(obj).style.display='';return!1}
function replyContentComment(commentId,cId,contentType)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
$("div[id^='cmt_rpy_form_']").html('');$("div[id^='cmt_rpy_form_']").hide();var replyForm=replyContentFormHTML(commentId,cId,contentType);var obj='cmt_rpy_form_'+commentId;var objbut='cmt_rpy_btn_'+commentId;document.getElementById(obj).innerHTML=replyForm;$('#'+obj).show();return!1}
function replyContentFormHTML(commentId,cId,contentType)
{var html='';html+="<form action ='' name='content_reply_"+commentId+"' id='content_reply_"+commentId+"' method='post'><input type='hidden' name='parentcommentid' value='"+commentId+"' /><input type='hidden' name='commentaction' value='Reply' /><input type='hidden' name='contentid' value='"+cId+"' /><input type='hidden' name='content_type' value='"+contentType+"' />";html+=" <div class='message-detail-rt'><textarea class='message-detail-textarea' name='comment' id='comment-reply' placeholder='Write a reply...'></textarea><span class='send-button' id='submitbutton' onClick='contentReply(\""+commentId+"\");return false;'><i class='sprite sprite-send bothCenter'></i><div class='loader' id='contentLoader'><img src='/assets/images/loadingsample100.gif'></div></span></div>";html+="</div>";html+="</div>";html+="</form>";return html}
function replyFormHTML(commentId,cId,fbFlag,twFlag,contentType)
{var html='';html+="<form action ='' name='comment_reply_"+commentId+"' id='comment_reply_"+commentId+"' method='post'><input type='hidden' name='parentcommentid' value='"+commentId+"' /><input type='hidden' name='commentaction' value='Reply' /><input type='hidden' name='contentid' value='"+cId+"' /><input type='hidden' name='content_type' value='"+contentType+"' />";html+="<div class='message-detail-rt'><textarea name='comment' id='comment-reply' class='message-detail-textarea'></textarea><span class='send-button' id ='submitbutton' spanId='spanid-"+commentId+"' onClick='submitReply(\""+commentId+"\");return false;'><i class='sprite sprite-send bothCenter'></i><div class='loader' id='mainCommentLoader'><img src='/assets/images/loadingsample100.gif'></div></div>";html+="</form>";return html}
function wallreplyComment(commentId,cId,fbFlag,twFlag,contentType)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
$("div[id^='cmt_rpy_form_']").html('');$("div[id^='cmt_rpy_form_']").hide();var lastval=$('#lastcommid').val();var replyForm=wallreplyFormHTML(commentId,cId,fbFlag,twFlag,contentType,lastval);var obj='cmt_rpy_form_'+commentId;var objbut='cmt_rpy_btn_'+commentId;document.getElementById(obj).innerHTML=replyForm;document.getElementById(obj).style.display='';$('.commentReply').focus();return!1}
function wallreplyFormHTML(commentId,cId,fbFlag,twFlag,contentType,lastval)
{var html='';html+="<form action ='' name='comment_reply_"+commentId+"' id='comment_reply_"+commentId+"' method='post' style='margin-top:40px'><input type='hidden' name='parentcommentid' value='"+commentId+"' /><input type='hidden' name='lastwallid' value='"+lastval+"' /><input type='hidden' name='commentaction' value='Reply' /><input type='hidden' name='contentid' value='"+cId+"' /><input type='hidden' name='content_type' value='"+contentType+"' />";html+="<div class='commentBox' style='width:97%;'><textarea name='comment' id='comment-reply' class='commentReply'></textarea></div>";html+="<div class='actionsStrip marginT10'>";html+="<div class='fleft'>";html+="<span id = 'replybutton"+commentId+"' style='font-family:arial;font-size:12px;font-weight:normal;'><a href='javascript::void(0)' class='btn-green' onclick='wallsubmitReply(\""+commentId+"\",\""+lastval+"\");return false;'>Type Comment</a></span>";html+="<span id = 'cnlbutton"+commentId+"' style='font-family:arial;font-size:12px;font-weight:normal;'><input type='button' class='btn-grey1 marginL10' value='Cancel' onclick='hideElement(\"cmt_rpy_form_"+commentId+"\");return false;'></span>";html+="</div>";html+="</div>";html+="</form>";return html}
function hideElement(id){document.getElementById(id).style.display='none'}
function submitComment(frmID)
{var comment=document.forms[frmID].comment.value;if(comment==''||comment=='start typing'){content.showMessage("Enter Comment",'error');document.forms[frmID].comment.focus();return!1}else{var dataString=$('#'+frmID).serialize();$("#submitbutton").attr("disabled","disabled");$.ajax({type:'POST',url:"/commentsection/saveComment",data:dataString,beforeSend:function(){$("#contentLoader").show();$("#submitbutton").attr("disabled","disabled");document.forms[frmID].comment.value=''},success:function(data){$("#contentLoader").hide();$("#submitbutton").removeAttr("disabled");document.forms[frmID].comment.value='';if($.trim(data)==='Bad Request'){window.location=location.href;return}
dataArray=data.split('##');if(dataArray[0]==0){content.showMessage(dataArray[1],'error');document.forms[frmID].comment.value=''}else{if(typeof netCoreJs!=='undefined'){netCoreJs.commentEvent()}
$('.commstart').show();document.getElementById('postedComment').innerHTML=data+document.getElementById('postedComment').innerHTML;var resCount=parseInt($('#response_count').html());if(resCount){var newResCount=parseInt(resCount+1)}else{var newResCount='1'}
if(newResCount>1){document.getElementById('response_count').innerHTML=newResCount}else if(newResCount==1){document.getElementById('response_count').innerHTML=newResCount}else{document.getElementById('response_count').innerHTML=''}
document.forms[frmID].comment.value=''}
return!1}});return!1}}
function submitReply(commentId)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
var frmID='comment_reply_'+commentId;var comment=document.forms[frmID].comment.value;if(comment==''||comment=='start typing'){content.showMessage("Enter Comment",'error');document.forms[frmID].comment.focus();return!1}else{var dataString=$('#'+frmID).serialize();$("#"+frmID).children('div').children('span').removeAttr('onclick');$('#mainCommentLoader').show();$.ajax({type:'POST',url:"/commentsection/saveReply",data:dataString,beforeSend:function(){$("#"+frmID).children('div').children('span').removeAttr('onclick');$('#mainCommentLoader').show()},success:function(data){$('#mainCommentLoader').hide();$("#submitbutton").removeAttr("disabled");dataArray=data.split('##');if(dataArray[0]==0){content.showMessage(dataArray[1],'error')}else{$('#cmt_rpy_txt_'+commentId).prepend(data);$('#cmt_rpy_txt_'+commentId).show();var resCount=parseInt($('#response_count').html());var newResCount=parseInt(resCount+1);if(newResCount>1){document.getElementById('response_count').innerHTML=newResCount}else if(newResCount==1){document.getElementById('response_count').innerHTML=newResCount}else{document.getElementById('response_count').innerHTML=''}}
$('#cmt_rpy_form_'+commentId).html();$('#cmt_rpy_form_'+commentId).hide();document.forms[frmID].comment.value='';return!1},error:function(err){$("#"+frmID).children('div').children('span').attr('onclick','submitReply("'+commentId+'");return false;')}});return!1}}
function contentReply(commentId)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
var frmID='content_reply_'+commentId;var comment=document.forms[frmID].comment.value;if(comment==''||comment=='"Write a reply...'){content.showMessage("Enter Comment",'error');document.forms[frmID].comment.focus();return!1}else{var dataString=$('#'+frmID).serialize();$.ajax({type:'POST',url:"/content-comments/saveReply",data:dataString,beforeSend:function(){$("#contentLoader").show()},success:function(data){$("#contentLoader").hide();dataArray=data.split('##');if(dataArray[0]==0){content.showMessage(dataArray[1],'error')}else{$('#cmt_rpy_txt_'+commentId).prepend(data);$('#cmt_rpy_txt_'+commentId).show()}
$('#cmt_rpy_form_'+commentId).html();$('#cmt_rpy_form_'+commentId).hide();document.forms[frmID].comment.value='';return!1}});return!1}}
function wallsubmitReply(commentId,lastcommentid)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
var frmID='comment_reply_'+commentId;var comment=document.forms[frmID].comment.value;if(comment==''||comment=='start typing'){content.showMessage("Enter Comment",'error');document.forms[frmID].comment.focus();return!1}else{var dataString=$('#'+frmID).serialize();var buttonHtml=$('#replybutton'+commentId).html();$('#replybutton'+commentId).html("<div class='btn-green2'>Processing..<div>");$.ajax({type:'POST',url:"/commentsection/saveReply",data:dataString,beforeSend:function(){},success:function(data){$('#replybutton'+commentId).html(buttonHtml);$('#replybutton'+commentId).show();$('#cnlbutton'+commentId).show();$('#spprocess'+commentId).hide();dataArray=data.split('##');if(dataArray[0]==0){content.showMessage(dataArray[1],'success')}else{$('#cmt_rpy_txt_'+commentId).prepend(data);$('#cmt_rpy_txt_'+commentId).show();$('#div'+lastcommentid).hide();$('#cmt_rpy_form_'+commentId).hide();var resCount=parseInt($('#response_count').html());var newResCount=parseInt(resCount+1);if(newResCount>1){document.getElementById('response_count').innerHTML=newResCount}else if(newResCount==1){document.getElementById('response_count').innerHTML=newResCount}else{document.getElementById('response_count').innerHTML=''}}
$('#cmt_rpy_form_'+commentId).html();$('#cmt_rpy_form_'+commentId).hide();document.forms[frmID].comment.value='';return!1}});return!1}}
function SetCommentCookie(name,value,days)
{if(days){var date=new Date()
date.setTime(date.getTime()+(days*24*60*60*1000))
var expires="; expires="+date.toGMTString()}else{var expires=""}
document.cookie=name+"="+value+expires+"; path=/"}
function GetCommentCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';')
for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')
{c=c.substring(1,c.length)}
if(c.indexOf(nameEQ)==0)
return c.substring(nameEQ.length,c.length)}
return null}
function actionComment(commentId,cId,actionType,notifyType)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
var ck=GetCommentCookie('Comm_'+commentId);if(ck==null){ck=""}
if(ck.indexOf('101')!=-1&&actionType=='101'){content.showMessage('You have already liked this comment ।','error');return!1}else if(ck.indexOf('104')!=-1&&actionType=='104'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else if(ck.indexOf('105')!=-1&&actionType=='105'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else if(ck.indexOf('106')!=-1&&actionType=='106'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else if(ck.indexOf('107')!=-1&&actionType=='107'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else if(ck.indexOf('108')!=-1&&actionType=='108'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else if(ck.indexOf('109')!=-1&&actionType=='109'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else if(ck.indexOf('110')!=-1&&actionType=='110'){content.showMessage('Your request has been sent to the moderator ।','success');return!1}else{if(actionType=='101')
{var params={};params.commentaction='Like';params.contentid=cId;params.commentid=commentId;params.notifytype=notifyType;var dumphtml=$('#cllk_'+commentId).html();$('#clp_'+commentId).html('&nbsp;wait...');$.ajax({type:'POST',url:base_url+"/commentsection/likeComment",data:params,success:function(data){$('#cllk_'+commentId).html(dumphtml);dataArray=data.split('##');$('#clp_'+commentId).html('');if(dataArray[0]==0){content.showMessage(dataArray[1],'success');return!1}else{SetCommentCookie("Comm_"+commentId,ck+"_"+actionType,1);var obj=document.getElementById('cmt_like_txt_'+commentId);if(obj.innerHTML=='')
{var currRate=0}else{var val=obj.innerHTML.replace("(","");val=val.replace(")","");var currRate=parseInt(val)}
obj.innerHTML="("+parseInt(currRate+1)+")";if(currRate==0){$('#lk_cnt').html(parseInt(parseInt($('#lk_cnt').html())+1))}
$('#like_sort').css('display','')}
return!1}});return!1}else if(actionType=='104'){var dataString='random'+(new Date().getTime())+'&cId='+cId+'&commentId='+commentId+'&page=cmt';popup.data=dataString;popup.init('/reportoffensive/report','pp_main');popup.onResize('pp_main')}else if(actionType=='105'){var dataString='random'+(new Date().getTime())+'&cId='+cId+'&wallId='+commentId+'&page=wallar';popup.data=dataString;popup.init('/reportoffensive/report','pp_main');popup.onResize('pp_main')}else if(actionType=='106'){var dataString='random'+(new Date().getTime())+'&cId='+cId+'&page=content';popup.data=dataString;popup.init('/reportoffensive/report','pp_main');popup.onResize('pp_main')}else if(actionType=='108'){var dataString='random'+(new Date().getTime())+'&cId='+cId+'&page=forumthread';popup.data=dataString;popup.init('/reportoffensive/report','pp_main');popup.onResize('pp_main')}else if(actionType=='109'){var dataString='random'+(new Date().getTime())+'&cId='+cId+'&page=msg';popup.data=dataString;popup.init('/reportoffensive/report','pp_main');popup.onResize('pp_main')}else if(actionType=='110'){var dataString='random'+(new Date().getTime())+'&userId='+cId+'&page=user';popup.data=dataString;popup.init('/reportoffensive/report','pp_main');popup.onResize('pp_main')}}}
function deleteComment(commentId,contentId,contentType)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
var params={};params.commentaction='Delete';params.contentid=contentId;params.commentid=commentId;params.commenttype=contentType;var msg='Do you want to delete this comment?';show_confirm_diolog(msg,6,params,'Delete Comment')}
function deleteContentComment(commentId,contentId,contentType)
{if(!user.checkLogin()){csso.openSSOPopup();return!1}
var params={};params.commentaction='Delete';params.contentid=contentId;params.commentid=commentId;params.commenttype=contentType;var msg='Do you want to delete this comment?';show_confirm_diolog(msg,10,params,'Delete Comment')}
function user_block_toggle(user_id1,user_id2,fld,bstatus){try{var params={};params.user_id1=user_id1;params.user_id2=user_id2;params.bstatus=bstatus;params.fld=fld;var msg='';var msg_tlt='';if(bstatus==2){msg_tlt='Block User?';msg='Are you sure you want to block this user?'}else{msg_tlt='Unblock User?';msg='Are you sure you want to unblock this user?'}
show_confirm_diolog(msg,8,params,msg_tlt)}catch(e){}}
function submitWallComment(frmID)
{var comment=document.forms[frmID].comment.value;var contentId=document.forms[frmID].contentid.value;if(comment==''||comment=='start typing'){content.showMessage("Enter Comment",'error');document.forms[frmID].comment.focus();return!1}else{var dataString=$('#'+frmID).serialize();var buttonHtml=$("#postbutton").val();$("#spprocess").html('Please wait...');$("#postbutton").val('Please wait...');$("#postbutton").removeClass("btn-green");$("#postbutton").addClass("btn-grey1");$("#postbutton").attr("disabled","disabled");$.ajax({type:'POST',url:"/commentsection/savewallComment",data:dataString,beforeSend:function(){},success:function(data){$("#postbutton").removeClass("btn-grey1");$("#postbutton").addClass("btn-green");$("#postbutton").removeAttr("disabled");dataArray=data.split('##');if(dataArray[0]==0){$("#comments_"+contentId).prepend(dataArray[1]);document.forms[frmID].comment.value=''}else{if(dataArray[0]!=""){content.showMessage(dataArray[0],'error')}else{content.showMessage('Comment not posted','error')}
$("#postbutton").addClass("btn-green");$("#postbutton").removeAttr("enabled")}
return!1}});return!1}}