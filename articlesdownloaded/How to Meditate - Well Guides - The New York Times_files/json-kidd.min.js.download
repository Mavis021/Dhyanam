/*! tagx-builder - v0.0.1 - 2021-12-22 23:30 */

function safelyCollectKeyweeEvent(){if(!window.Keywee||!Keywee.getEventToSend)return{};var t={};try{t=Keywee.getEventToSend()}catch(e){t={}}return TAGX.Utils.isObject(t)?t:{}}function trackMethod(e){return-1<"PageView-ViewContent-Search-AddToCart-AddToWishlist-InitiateCheckout-AddPaymentInfo-Purchase-Lead-CompleteRegistration".indexOf(e)?"track":"trackCustom"}!function(s,a){function i(){}function o(e,t){if(e)for(var n=0,s=(e="object"==typeof e?[].slice.call(e):e).length;n<s;n++)t.call(e,e[n],n)}function r(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return t!==a&&null!==t&&n===e}function c(e){return r("Function",e)}function l(e){(e=e||i)._done||(e(),e._done=1)}function u(e){var t={};if("object"==typeof e)for(var n in e)e[n]&&(t={name:n,url:e[n]});else t={name:-1!==(n=(t=(t=e.split("/"))[t.length-1]).indexOf("?"))?t.substring(0,n):t,url:e};return(e=P[t.name])&&e.url===t.url?e:P[t.name]=t}function g(e){for(var t in e=e||P)if(e.hasOwnProperty(t)&&4!==e[t].state)return;return 1}function f(e,t){t=t||i,4===e.state?t():3===e.state?h.ready(e.name,t):1===e.state?e.onpreload.push(function(){f(e,t)}):(e.state=3,d(e,function(){e.state=4,t(),o(_[e.name],function(e){l(e)}),y&&g()&&o(_.ALL,function(e){l(e)})}))}function d(e,t){var n,t=t||i;/\.css[^\.]*$/.test(e.url)?((n=S.createElement("link")).type="text/"+(e.type||"css"),n.rel="stylesheet",n.href=e.url):((n=S.createElement("script")).type="text/"+(e.type||"javascript"),n.src=e.url),n.onload=n.onreadystatechange=function(e){("load"===(e=e||s.event).type||/loaded|complete/.test(n.readyState)&&(!S.documentMode||S.documentMode<9))&&(n.onload=n.onreadystatechange=n.onerror=null,t())},n.onerror=function(){n.onload=n.onreadystatechange=n.onerror=null,t()},n.async=!1,n.defer=!1;e=S.head||S.getElementsByTagName("head")[0];e.insertBefore(n,e.lastChild)}function e(){S.body?y||(y=!0,o(m,function(e){l(e)})):(s.clearTimeout(h.readyTimeout),h.readyTimeout=s.setTimeout(e,50))}function t(){S.addEventListener?(S.removeEventListener("DOMContentLoaded",t,!1),e()):"complete"===S.readyState&&(S.detachEvent("onreadystatechange",t),e())}var p,y,S=s.document,m=[],b=[],_={},P={},n="async"in S.createElement("script")||"MozAppearance"in S.documentElement.style||s.opera,A=s.head_conf&&s.head_conf.head||"head",h=s[A]=s[A]||function(){h.ready.apply(null,arguments)};if(h.load=n?function(){var n=arguments,s=n[n.length-1],a={};return c(s)||(s=null),o(n,function(e,t){e!==s&&(e=u(e),f(a[e.name]=e,s&&t===n.length-2?function(){g(a)&&l(s)}:null))}),h}:function(){var e=arguments,t=[].slice.call(e,1),n=t[0];return p?n?(o(t,function(e){var t;c(e)||(t=u(e)).state===a&&(t.state=1,t.onpreload=[],d({url:t.url,type:"cache"},function(){t.state=2,o(t.onpreload,function(e){e.call()})}))}),f(u(e[0]),c(n)?n:function(){h.load.apply(null,t)})):f(u(e[0])):b.push(function(){h.load.apply(null,e)}),h},h.js=h.load,h.test=function(e,t,n,s){return(t=!!(e="object"==typeof e?e:{test:e,success:!!t&&(r("Array",t)?t:[t]),failure:!!n&&(r("Array",n)?n:[n]),callback:s||i}).test)&&e.success?(e.success.push(e.callback),h.load.apply(null,e.success)):!t&&e.failure?(e.failure.push(e.callback),h.load.apply(null,e.failure)):s(),h},h.ready=function(e,t){if(e===S)return y?l(t):m.push(t),h;if(c(e)&&(t=e,e="ALL"),"string"!=typeof e||!c(t))return h;var n=P[e];return n&&4===n.state||"ALL"===e&&g()&&y?l(t):(n=_[e])?n.push(t):_[e]=[t],h},h.ready(S,function(){g()&&o(_.ALL,function(e){l(e)}),h.feature&&h.feature("domloaded",!0)}),"complete"===S.readyState)e();else if(S.addEventListener)S.addEventListener("DOMContentLoaded",t,!1),s.addEventListener("load",e,!1);else{S.attachEvent("onreadystatechange",t),s.attachEvent("onload",e);var k=!1;try{k=null==s.frameElement&&S.documentElement}catch(e){}k&&k.doScroll&&function t(){if(!y){try{k.doScroll("left")}catch(e){return s.clearTimeout(h.readyTimeout),void(h.readyTimeout=s.setTimeout(t,50))}e()}}()}setTimeout(function(){p=!0,o(b,function(e){e()})},300)}(window),function(t){function n(e){var t=o["$"+e]||window[e];if(!t)throw new Error("Ender Error: Requested module '"+e+"' has not been defined.");return t}function s(e,t){return o["$"+e]=t}function a(e,t){var n,s;void 0===(this.selector=e)?(n=[],this.selector=""):n="string"==typeof e||e.nodeName||e.length&&"item"in e||e==window?i._select(e,t):isFinite(e.length)?e:[e],this.length=n.length;for(s=this.length;s--;)this[s]=n[s]}function i(e,t){return new a(e,t)}t.global=t;var o={},r=t.$,c=t.ender,l=t.require,u=t.provide;t.provide=s,t.require=n,a.prototype.forEach=function(e,t){for(var n=0,s=this.length;n<s;++n)n in this&&e.call(t||this[n],this[n],n,this);return this},(a.prototype.$=i)._VERSION="0.4.3-dev",i.fn=a.prototype,i.ender=function(e,t){!function(e,t){for(var n in t)"noConflict"!=n&&"_VERSION"!=n&&(e[n]=t[n])}(t?a.prototype:i,e)},i._select=function(e,t){return"string"==typeof e?(t||document).querySelectorAll(e):e.nodeName?[e]:e},i.noConflict=function(e){return t.$=r,e&&(t.provide=u,t.require=l,t.ender=c,"function"==typeof e&&e(n,s,this)),this},"undefined"!=typeof module&&module.exports&&(module.exports=i),t.ender=t.$=i}(this),function(){var e,t,n={exports:{}};n.exports;!function(e){void 0!==n?n.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):this.domready=e()}(function(n){function e(e){for(g=1;e=s.shift();)e()}var t,s=[],a=document,i=a.documentElement,o=i.doScroll,r="DOMContentLoaded",c="addEventListener",l="onreadystatechange",u="readyState",g=/^loade|c/.test(a[u]);return a[c]&&a[c](r,t=function(){a.removeEventListener(r,t,!1),e()},!1),o&&a.attachEvent(l,t=function(){/^c/.test(a[u])&&(a.detachEvent(l,t),e())}),n=o?function(t){self!=top?g?t():s.push(t):function(){try{i.doScroll("left")}catch(e){return setTimeout(function(){n(t)},50)}t()}()}:function(e){g?e():s.push(e)}}),"function"==typeof provide&&provide("domready",n.exports),e=ender,t=require("domready"),e.ender({domReady:t}),e.ender({ready:function(e){return t(e),this}},!0)}(),function(){var r,c,e,t,n={exports:{}};n.exports;e=this,t=function(){function e(){this.c={}}function S(e){return x.g(e)||x.s(e,"(^|\\s+)"+e+"(\\s+|$)",1)}function d(e,t){for(var n=0,s=e.length;n<s;n++)t(e[n])}function o(e){for(var t=[],n=0,s=e.length;n<s;++n)l(e[n])?t=t.concat(e[n]):t[t.length]=e[n];return t}function i(e){for(var t=0,n=e.length,s=[];t<n;t++)s[t]=e[t];return s}function a(e){for(;(e=e.previousSibling)&&1!=e[E];);return e}function p(e){return e.match(U)}function y(e,t,n,s,a,i,o,r,c,l,u){var g,f,d,p,y;if(1!==this[E])return!1;if(t&&"*"!==t&&this[v]&&this[v].toLowerCase()!==t)return!1;if(n&&(f=n.match(T))&&f[1]!==this.id)return!1;if(n&&(y=n.match(L)))for(g=y.length;g--;)if(!S(y[g].slice(1)).test(this.className))return!1;if(c&&P.pseudos[c]&&!P.pseudos[c](this,u))return!1;if(s&&!o)for(d in p=this.attributes)if(Object.prototype.hasOwnProperty.call(p,d)&&(p[d].name||d)==a)return this;return!(s&&!function(e,t,n){switch(e){case"=":return t==n;case"^=":return t.match(X.g("^="+n)||X.s("^="+n,"^"+m(n),1));case"$=":return t.match(X.g("$="+n)||X.s("$="+n,m(n)+"$",1));case"*=":return t.match(X.g(n)||X.s(n,m(n),1));case"~=":return t.match(X.g("~="+n)||X.s("~="+n,"(?:^|\\s+)"+m(n)+"(?:\\s+|$)",1));case"|=":return t.match(X.g("|="+n)||X.s("|="+n,"^"+m(n)+"(-|$)",1))}return 0}(i,j(this,a)||"",o))&&this}function m(e){return K.g(e)||K.s(e,e.replace(G,"\\$1"))}function b(e,a,i,t){var o;return(o=function e(t,n,s){for(;s=F[i[n]](s,t);)if(r(s)&&y.apply(s,p(a[n]))){if(!n)return s;if(o=e(s,n-1,s))return o}}(e,a.length-1,e))&&(!t||V(o,t))}function r(e,t){return e&&"object"==typeof e&&(t=e[E])&&(1==t||9==t)}function c(e){var t,n,s=[];e:for(t=0;t<e.length;++t){for(n=0;n<s.length;++n)if(s[n]==e[t])continue e;s[s.length]=e[t]}return s}function l(e){return"object"==typeof e&&isFinite(e.length)}function _(e,t,n){return 9===e[E]?e.getElementById(t):e.ownerDocument&&((n=e.ownerDocument.getElementById(t))&&V(n,e)&&n||!V(e,e.ownerDocument)&&g('[id="'+t+'"]',e)[0])}function P(e,t){var n,s=(n=t)?"string"==typeof n?P(n)[0]:!n[E]&&l(n)?n[0]:n:f;if(!s||!e)return[];if(e===window||r(e))return!t||e!==window&&r(s)&&V(e,s)?[e]:[];if(e&&l(e))return o(e);if(n=e.match(B)){if(n[1])return(t=_(s,n[1]))?[t]:[];if(n[2])return i(s[h](n[2]));if(H&&n[3])return i(s[A](n[3]))}return g(e,s)}function u(s,a){return function(e){var t,n;N.test(e)?9!==s[E]&&((n=t=s.getAttribute("id"))||s.setAttribute("id",n="__qwerymeupscotty"),a(s.parentNode||s,e='[id="'+n+'"]'+e,!0),t||s.removeAttribute("id")):e.length&&a(s,e,!1)}}var g,f=document,n=f.documentElement,A="getElementsByClassName",h="getElementsByTagName",k="querySelectorAll",t="useNativeQSA",v="tagName",E="nodeType",T=/#([\w\-]+)/,L=/\.[\w\-]+/g,I=/^#([\w\-]+)$/,C=/^([\w]+)?\.([\w\-]+)$/,N=/(^|,)\s*[>~+]/,w=/^\s+|\s*([,\s\+\~>]|$)\s*/g,s=/[\s\>\+\~]/,D=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,G=/([.*+?\^=!:${}()|\[\]\/\\])/g,B=new RegExp(I.source+"|"+/^([\w\-]+)$/.source+"|"+/^\.([\w\-]+)$/.source),O=new RegExp("("+s.source+")"+D.source,"g"),R=new RegExp(s.source+D.source),U=new RegExp(/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/.source+"("+/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+")?("+/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/.source+")?"),F={" ":function(e){return e&&e!==n&&e.parentNode},">":function(e,t){return e&&e.parentNode==t.parentNode&&e.parentNode},"~":function(e){return e&&e.previousSibling},"+":function(e,t,n,s){return!!e&&((n=a(e))&&(s=a(t))&&n==s&&n)}};e.prototype={g:function(e){return this.c[e]||void 0},s:function(e,t,n){return t=n?new RegExp(t):t,this.c[e]=t}};function M(e,t){var n,s,a=[];try{return 9!==t[E]&&N.test(e)?(d(n=e.split(","),u(t,function(e,t){1==(s=e[k](t)).length?a[a.length]=s.item(0):s.length&&(a=a.concat(i(s)))})),1<n.length&&1<a.length?c(a):a):i(t[k](e))}catch(e){}return W(e,t)}var x=new e,K=new e,X=new e,Y=new e,V="compareDocumentPosition"in n?function(e,t){return 16==(16&t.compareDocumentPosition(e))}:"contains"in n?function(e,t){return(t=9===t[E]||t==window?n:t)!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},j=((D=f.createElement("p")).innerHTML='<a href="#x">x</a>',"#x"!=D.firstChild.getAttribute("href")?function(e,t){return"class"===t?e.className:"href"===t||"src"===t?e.getAttribute(t,2):e.getAttribute(t)}:function(e,t){return e.getAttribute(t)}),H=!!f[A],q=f.querySelector&&f[k],W=function(e,s){var t,n,a,i,o,r=[];if(n=(e=e.replace(w,"$1")).match(C)){for(o=S(n[2]),t=s[h](n[1]||"*"),a=0,i=t.length;a<i;a++)o.test(t[a].className)&&(r[r.length]=t[a]);return r}return d(e=e.split(","),u(s,function(e,t,n){for(o=function(e,t){var n,s,a,i,o,r,c=[],l=[],u=t,g=Y.g(e)||Y.s(e,e.split(R)),f=e.match(O);if(!g.length)return c;if(e=(g=g.slice(0)).pop(),!(u=g.length&&(a=g[g.length-1].match(I))?_(t,a[1]):u))return c;for(o=p(e),n=0,s=(i=u!==t&&9!==u[E]&&f&&/^[+~]$/.test(f[f.length-1])?function(e){for(;u=u.nextSibling;)1!=u[E]||o[1]&&o[1]!=u[v].toLowerCase()||(e[e.length]=u);return e}([]):u[h](o[1]||"*")).length;n<s;n++)(r=y.apply(i[n],o))&&(c[c.length]=r);return g.length?(d(c,function(e){b(e,g,f)&&(l[l.length]=e)}),l):c}(t,e),a=0,i=o.length;a<i;a++)(9===e[E]||n||V(o[a],s))&&(r[r.length]=o[a])})),1<e.length&&1<r.length?c(r):r},D=function(e){void 0!==e[t]&&(g=e[t]&&q?M:W)};return D({useNativeQSA:!0}),P.configure=D,P.uniq=c,P.is=function(e,t,n){if(r(t))return e==t;if(l(t))return!!~o(t).indexOf(e);for(var s,a,i=t.split(",");t=i.pop();)if(s=Y.g(t)||Y.s(t,t.split(R)),a=t.match(O),s=s.slice(0),y.apply(e,p(s.pop()))&&(!s.length||b(e,s,a,n)))return!0;return!1},P.pseudos={},P},void 0!==n&&n.exports?n.exports=t():"function"==typeof define&&define.amd?define(t):e.qwery=t(),"function"==typeof provide&&provide("qwery",n.exports),r=ender,c=function(){var t;try{t=require("qwery")}catch(e){t=require("qwery-mobile")}finally{return t}}(),r.pseudos=c.pseudos,r._select=function(e,t){return(r._select=function(){var n;if("function"==typeof r.create)return function(e,t){return/^\s*</.test(e)?r.create(e,t):c(e,t)};try{return n=require("bonzo"),function(e,t){return/^\s*</.test(e)?n.create(e,t):c(e,t)}}catch(e){}return c}())(e,t)},r.ender({find:function(e){for(var t,n,s,a=[],i=0,o=this.length;i<o;i++)for(t=0,n=(s=c(e,this[i])).length;t<n;t++)a.push(s[t]);return r(c.uniq(a))},and:function(e){for(var t=r(e),n=this.length,s=0,a=this.length+t.length;n<a;n++,s++)this[n]=t[s];return this.length+=t.length,this},is:function(e,t){for(var n=0,s=this.length;n<s;n++)if(c.is(this[n],e,t))return!0;return!1}},!0)}(),function(){var r,a,e,t,n={exports:{}};n.exports;function c(e){for(var t,n,s,a=[],i=0,o=0;n=e[i];++i){for(s=!1,t=0;t<a.length;++t)if(a[t]===n){s=!0;break}s||(a[o++]=n)}return a}function s(e,t){return void 0===t?a(this).dim()[e]:this.css(e,t)}e=this,t=function(){function o(e){return e&&e.nodeName&&(1==e.nodeType||11==e.nodeType)}function c(e,t,n){var s,a,i;if("string"==typeof e)return P.create(e);if(o(e)&&(e=[e]),n){for(i=[],s=0,a=e.length;s<a;s++)i[s]=m(t,e[s]);return i}return e}function n(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function l(e,t,n,s){for(var a,i=0,o=e.length;i<o;i++)a=s?e.length-i-1:i,t.call(n||e[a],e[a],a,e);return e}function i(e,t,n){for(var s=0,a=e.length;s<a;s++)o(e[s])&&(i(e[s].childNodes,t,n),t.call(n||e[s],e[s],s,e));return e}function r(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function u(e){e[X]("data-node-uid")||e[K]("data-node-uid",++F);e=e[X]("data-node-uid");return U[e]||(U[e]={})}function t(e){e=e[X]("data-node-uid");e&&delete U[e]}function g(e){var t;try{return null==e?void 0:"true"===e||"false"!==e&&("null"===e?null:(t=parseFloat(e))==e?t:e)}catch(e){}}function s(e,t,n){for(var s=0,a=e.length;s<a;++s)if(t.call(n||null,e[s],s,e))return!0;return!1}function f(e){return"transform"==e&&(e=Y.transform)||/^transform-?[Oo]rigin$/.test(e)&&(e=Y.transform+"Origin")||"float"==e&&(e=Y.cssFloat),e?r(e):null}function a(e,t,s,a){var i=0,o=t||this,r=[];return l(c(W&&"string"==typeof e&&"<"!=e.charAt(0)?W(e):e),function(t,n){l(o,function(e){s(t,r[i++]=0<n?m(o,e):e)},null,a)},this,a),o.length=i,l(r,function(e){o[--i]=e},null,!a),o}function d(e,t,n){var s=P(e),a=s.css("position"),i=s.offset(),o="relative",r=a==o,c=[parseInt(s.css("left"),10),parseInt(s.css("top"),10)];"static"==a&&s.css("position",o),isNaN(c[0])&&(c[0]=r?0:e.offsetLeft),isNaN(c[1])&&(c[1]=r?0:e.offsetTop),null!=t&&(e.style.left=t-i.left+c[0]+"px"),null!=n&&(e.style.top=n-i.top+c[1]+"px")}function p(e,t){return"function"==typeof t?t(e):t}function y(e,t,n){var s=this[0];return s?null==e&&null==t?(b(s)?_():{x:s.scrollLeft,y:s.scrollTop})[n]:(b(s)?v.scrollTo(e,t):(null!=e&&(s.scrollLeft=e),null!=t&&(s.scrollTop=t)),this):this}function S(e){if(this.length=0,e){e="string"==typeof e||e.nodeType||void 0===e.length?[e]:e,this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}}function m(e,t){var n,s,a,i=t.cloneNode(!0);if(e.$&&"function"==typeof e.cloneEvents)for(e.$(i).cloneEvents(t),n=e.$(i).find("*"),s=e.$(t).find("*"),a=0;a<s.length;a++)e.$(n[a]).cloneEvents(s[a]);return i}function b(e){return e===v||/^(?:body|html)$/i.test(e.tagName)}function _(){return{x:v.pageXOffset||T.scrollLeft,y:v.pageYOffset||T.scrollTop}}function P(e){return new S(e)}var A,h,k,v=window,E=v.document,T=E.documentElement,L="parentNode",I=/^(checked|value|selected|disabled)$/i,C=/^(select|fieldset|table|tbody|tfoot|td|tr|colgroup)$/i,N=/\s*<script +src=['"]([^'"]+)['"]>/,e=["<table>","</table>",1],w=["<table><tbody><tr>","</tr></tbody></table>",3],D=["<select>","</select>",1],G=["_","",0,1],B={thead:e,tbody:e,tfoot:e,colgroup:e,caption:e,tr:["<table><tbody>","</tbody></table>",2],th:w,td:w,col:["<table><colgroup>","</colgroup></table>",2],fieldset:["<form>","</form>",1],legend:["<form><fieldset>","</fieldset></form>",2],option:D,optgroup:D,script:G,style:G,link:G,param:G,base:G},O=/^(checked|selected|disabled)$/,R=/msie/i.test(navigator.userAgent),U={},F=0,M=/^-?[\d\.]+$/,x=/^data-(.+)$/,K="setAttribute",X="getAttribute",G="getElementsByTagName",Y=((k=E.createElement("p")).innerHTML='<a href="#x">x</a><table style="float:left;"></table>',{hrefExtended:"#x"!=k[G]("a")[0][X]("href"),autoTbody:0!==k[G]("tbody").length,computedStyle:E.defaultView&&E.defaultView.getComputedStyle,cssFloat:k[G]("table")[0].style.styleFloat?"styleFloat":"cssFloat",transform:function(){for(var e=["transform","webkitTransform","MozTransform","OTransform","msTransform"],t=0;t<e.length;t++)if(e[t]in k.style)return e[t]}(),classList:"classList"in k,opasity:void 0!==E.createElement("a").style.opacity}),V=/(^\s*|\s*$)/g,j=/\s+/,H=String.prototype.toString,q={lineHeight:1,zoom:1,zIndex:1,opacity:1,boxFlex:1,WebkitBoxFlex:1,MozBoxFlex:1},W=E.querySelectorAll&&function(e){return E.querySelectorAll(e)},$=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(V,"")},z=Y.computedStyle?function(e,t){var n=null,s=E.defaultView.getComputedStyle(e,"");return s&&(n=s[t]),e.style[t]||n}:R&&T.currentStyle?function(t,e){var n;if("opacity"!=e||Y.opasity)return n=t.currentStyle?t.currentStyle[e]:null,t.style[e]||n;n=100;try{n=t.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{n=t.filters("alpha").opacity}catch(e){}}return n/100}:function(e,t){return e.style[t]},Q=Y.classList?(A=function(e,t){return e.classList.contains(t)},h=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(A=function(e,t){return n(t).test(e.className)},h=function(e,t){e.className=$(e.className+" "+t)},function(e,t){e.className=$(e.className.replace(n(t)," "))});return S.prototype={get:function(e){return this[e]||null},each:function(e,t){return l(this,e,t)},deepEach:function(e,t){return i(this,e,t)},map:function(e,t){for(var n,s=[],a=0;a<this.length;a++)n=e.call(this,this[a],a),t&&!t(n)||s.push(n);return s},html:function(n,s){var a=s?void 0===T.textContent?"innerText":"textContent":"innerHTML",i=this,o=function(t,e){l(c(n,i,e),function(e){t.appendChild(e)})};return void 0!==n?this.empty().each(function(e,t){try{if(s||"string"==typeof n&&!C.test(e.tagName))return e[a]=n}catch(e){}o(e,t)}):this[0]?this[0][a]:""},text:function(e){return this.html(e,!0)},append:function(n){var s=this;return this.each(function(t,e){l(c(n,s,e),function(e){t.appendChild(e)})})},prepend:function(s){var a=this;return this.each(function(t,e){var n=t.firstChild;l(c(s,a,e),function(e){t.insertBefore(e,n)})})},appendTo:function(e,t){return a.call(this,e,t,function(e,t){e.appendChild(t)})},prependTo:function(e,t){return a.call(this,e,t,function(e,t){e.insertBefore(t,e.firstChild)},1)},before:function(n){var s=this;return this.each(function(t,e){l(c(n,s,e),function(e){t[L].insertBefore(e,t)})})},after:function(n){var s=this;return this.each(function(t,e){l(c(n,s,e),function(e){t[L].insertBefore(e,t.nextSibling)},null,1)})},insertBefore:function(e,t){return a.call(this,e,t,function(e,t){e[L].insertBefore(t,e)})},insertAfter:function(e,t){return a.call(this,e,t,function(e,t){var n=e.nextSibling;n?e[L].insertBefore(t,n):e[L].appendChild(t)},1)},replaceWith:function(e){return P(c(e)).insertAfter(this),this.remove()},clone:function(e){for(var t=[],n=0,s=this.length;n<s;n++)t[n]=m(e||this,this[n]);return P(t)},addClass:function(e){return e=H.call(e).split(j),this.each(function(t){l(e,function(e){e&&!A(t,p(t,e))&&h(t,p(t,e))})})},removeClass:function(e){return e=H.call(e).split(j),this.each(function(t){l(e,function(e){e&&A(t,p(t,e))&&Q(t,p(t,e))})})},hasClass:function(e){return e=H.call(e).split(j),s(this,function(t){return s(e,function(e){return e&&A(t,e)})})},toggleClass:function(e,n){return e=H.call(e).split(j),this.each(function(t){l(e,function(e){e&&(void 0!==n?n?A(t,e)||h(t,e):Q(t,e):(A(t,e)?Q:h)(t,e))})})},show:function(t){return t="string"==typeof t?t:"",this.each(function(e){e.style.display=t})},hide:function(){return this.each(function(e){e.style.display="none"})},toggle:function(t,n){return n="string"==typeof n?n:"","function"!=typeof t&&(t=null),this.each(function(e){e.style.display=e.offsetWidth||e.offsetHeight?"none":n,t&&t.call(e)})},first:function(){return P(this.length?this[0]:[])},last:function(){return P(this.length?this[this.length-1]:[])},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},parent:function(){return this.related(L)},related:function(t){return P(this.map(function(e){for(e=e[t];e&&1!==e.nodeType;)e=e[t];return e||0},function(e){return e}))},focus:function(){return this.length&&this[0].focus(),this},blur:function(){return this.length&&this[0].blur(),this},css:function(e,t){var n,a=e;return void 0===t&&"string"==typeof e?(t=this[0])?t===E||t===v?(n=t===E?P.doc():P.viewport(),"width"==e?n.width:"height"==e?n.height:""):(e=f(e))?z(t,e):null:null:("string"==typeof e&&((a={})[e]=t),R&&a.opacity&&(a.filter="alpha(opacity="+100*a.opacity+")",a.zoom=e.zoom||1,delete a.opacity),this.each(function(e,t,n){for(var s in a)if(a.hasOwnProperty(s)){n=a[s],!(t=f(s))||!M.test(n)||t in q||(n+="px");try{e.style[t]=p(e,n)}catch(e){}}}))},offset:function(t,n){if(!t||"object"!=typeof t||"number"!=typeof t.top&&"number"!=typeof t.left){if("number"==typeof t||"number"==typeof n)return this.each(function(e){d(e,t,n)});if(!this[0])return{top:0,left:0,height:0,width:0};var e=this[0],s=e.ownerDocument.documentElement,a=e.getBoundingClientRect(),i=_(),o=e.offsetWidth,e=e.offsetHeight;return{top:a.top+i.y-Math.max(0,s&&s.clientTop,E.body.clientTop),left:a.left+i.x-Math.max(0,s&&s.clientLeft,E.body.clientLeft),height:e,width:o}}return this.each(function(e){d(e,t.left,t.top)})},dim:function(){if(!this.length)return{height:0,width:0};var e,t,n=this[0],s=9==n.nodeType&&n.documentElement,e=s||!n.style||n.offsetWidth||n.offsetHeight?null:(e=this,t={position:n.style.position||"",visibility:n.style.visibility||"",display:n.style.display||""},e.first().css({position:"absolute",visibility:"hidden",display:"block"}),t),t=s?Math.max(n.body.scrollWidth,n.body.offsetWidth,s.scrollWidth,s.offsetWidth,s.clientWidth):n.offsetWidth,n=s?Math.max(n.body.scrollHeight,n.body.offsetHeight,s.scrollHeight,s.offsetHeight,s.clientHeight):n.offsetHeight;return e&&this.first().css(e),{height:n,width:t}},attr:function(t,n){var e,s=this[0];if("string"==typeof t||t instanceof String)return void 0===n?s?I.test(t)?!(!O.test(t)||"string"!=typeof s[t])||s[t]:"href"!=t&&"src"!=t||!Y.hrefExtended?s[X](t):s[X](t,2):null:this.each(function(e){I.test(t)?e[t]=p(e,n):e[K](t,p(e,n))});for(e in t)t.hasOwnProperty(e)&&this.attr(e,t[e]);return this},removeAttr:function(t){return this.each(function(e){O.test(t)?e[t]=!1:e.removeAttribute(t)})},val:function(e){return"string"==typeof e?this.attr("value",e):this.length?this[0].value:null},data:function(t,n){var s,a,e=this[0];return void 0===n?e?(s=u(e),void 0===t?(l(e.attributes,function(e){(a=(""+e.name).match(x))&&(s[r(a[1])]=g(e.value))}),s):(void 0===s[t]&&(s[t]=g(this.attr("data-"+((e=t)&&e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())))),s[t])):null:this.each(function(e){u(e)[t]=n})},remove:function(){return this.deepEach(t),this.detach()},empty:function(){return this.each(function(e){for(i(e.childNodes,t);e.firstChild;)e.removeChild(e.firstChild)})},detach:function(){return this.each(function(e){e[L]&&e[L].removeChild(e)})},scrollTop:function(e){return y.call(this,null,e,"y")},scrollLeft:function(e){return y.call(this,e,null,"x")}},P.setQueryEngine=function(e){W=e,delete P.setQueryEngine},P.aug=function(e,t){for(var n in e)e.hasOwnProperty(n)&&((t||S.prototype)[n]=e[n])},P.create=function(c){return"string"==typeof c&&""!==c?function(){if(N.test(c))return[(s=c,i=document.createElement("script"),s=s.match(N),i.src=s[1],i)];var e=c.match(/^\s*<([^\s>]+)/),t=E.createElement("div"),n=[],s=e?B[e[1].toLowerCase()]:null,a=s?s[2]+1:1,i=s&&s[3],o=L,r=Y.autoTbody&&s&&"<table>"==s[0]&&!/<tbody/i.test(c);for(t.innerHTML=s?s[0]+c+s[1]:c;a--;)t=t.firstChild;for(i&&t&&1!==t.nodeType&&(t=t.nextSibling);e&&1!=t.nodeType||r&&(!t.tagName||"TBODY"==t.tagName)||n.push(t),t=t.nextSibling;);return l(n,function(e){e[o]&&e[o].removeChild(e)}),n}():o(c)?[c.cloneNode(!0)]:[]},P.doc=function(){var e=P.viewport();return{width:Math.max(E.body.scrollWidth,T.scrollWidth,e.width),height:Math.max(E.body.scrollHeight,T.scrollHeight,e.height)}},P.firstChild=function(e){for(var t,n=e.childNodes,s=0,a=n&&n.length||0;s<a;s++)1===n[s].nodeType&&(t=n[a=s]);return t},P.viewport=function(){return{width:R?T.clientWidth:self.innerWidth,height:R?T.clientHeight:self.innerHeight}},P.isAncestor="compareDocumentPosition"in T?function(e,t){return 16==(16&e.compareDocumentPosition(t))}:"contains"in T?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t[L];)if(t===e)return!0;return!1},P},void 0!==n&&n.exports?n.exports=t():"function"==typeof define&&define.amd?define(t):e.bonzo=t(),"function"==typeof provide&&provide("bonzo",n.exports),r=ender,(a=require("bonzo")).setQueryEngine(r),r.ender(a),r.ender(a(),!0),r.ender({create:function(e){return r(a.create(e))}}),r.id=function(e){return r([document.getElementById(e)])},r.ender({parents:function(e,t){if(!this.length)return this;for(var n,s=r(e=e||"*"),a=[],i=0,o=this.length;i<o;i++)for(n=this[i];(n=n.parentNode)&&(!~function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}(s,n)||(a.push(n),!t)););return r(c(a))},parent:function(){return r(c(a(this).parent()))},closest:function(e){return this.parents(e,!0)},first:function(){return r(this.length?this[0]:this)},last:function(){return r(this.length?this[this.length-1]:[])},next:function(){return r(a(this).next())},previous:function(){return r(a(this).previous())},related:function(e){return r(a(this).related(e))},appendTo:function(e){return a(this.selector).appendTo(e,this)},prependTo:function(e){return a(this.selector).prependTo(e,this)},insertAfter:function(e){return a(this.selector).insertAfter(e,this)},insertBefore:function(e){return a(this.selector).insertBefore(e,this)},clone:function(){return r(a(this).clone(this))},siblings:function(){for(var e,t=[],n=0,s=this.length;n<s;n++){for(e=this[n];e=e.previousSibling;)1==e.nodeType&&t.push(e);for(e=this[n];e=e.nextSibling;)1==e.nodeType&&t.push(e)}return r(t)},children:function(){for(var e,t=[],n=0,s=this.length;n<s;n++)if(e=a.firstChild(this[n]))for(t.push(e);e=e.nextSibling;)1==e.nodeType&&t.push(e);return r(c(t))},height:function(e){return s.call(this,"height",e)},width:function(e){return s.call(this,"width",e)}},!0)}(),function(){var e,t,n={exports:{}};n.exports;e=this,t=function(e,t){e=e||"bean",t=t||this;function c(e,t){return N||t||e!==I&&e!==k?e:C}function n(e){o=arguments.length?e:I.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}}function i(e,t){if(N||!t||!e||e.propertyName=="_on"+t){var n=K.get(this,t||e.type,null,!1),s=n.length,a=0;for(e=new M(e,this,!0),t&&(e.type=t);a<s&&!e.isImmediatePropagationStopped();a++)n[a].removed||n[a].handler.call(this,e)}}function g(a,n){function s(e,t){for(var n,s=O(a)?o(a,t):a;e&&e!==t;e=e.parentNode)for(n=s.length;n--;)if(s[n]===e)return e}function e(e){var t=s(e.target,this);t&&n.apply(t,arguments)}return e.__beanDel={ft:s,selector:a},e}function f(e,t,n,s){var a,i,o,r,c,l,u;if(void 0!==n||"object"!=typeof t){for(s=R(n)?(c=G.call(arguments,3),a=n):(a=s,c=G.call(arguments,4),g(n,a)),o=B(t),this===D&&(s=Y(H,e,t,s,a)),r=o.length;r--;)u=K.put(l=new x(e,o[r].replace(T,""),s,a,B(o[r].replace(E,""),"."),c,!1)),l[w]&&u&&X(e,l.eventType,!0,l.customType);return e}for(i in t)t.hasOwnProperty(i)&&f.call(this,e,i,t[i])}var o,d,p,s,a,r,l,u,y,S,m,b,_,P,A,h,k=window,v=t[e],E=/[^\.]*(?=\..*)\.|.*/,T=/\..*/,L="addEventListener",I=document||{},C=I.documentElement||{},N=C[L],w=N?L:"attachEvent",D={},G=Array.prototype.slice,B=function(e,t){return e.split(t||" ")},O=function(e){return"string"==typeof e},R=function(e){return"function"==typeof e},U=function(e,t,n){for(n=0;n<t.length;n++)t[n]&&(e[t[n]]=1);return e}({},B("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+(N?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinputreadystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":""))),F=(A="compareDocumentPosition"in C?function(e,t){return t.compareDocumentPosition&&16==(16&t.compareDocumentPosition(e))}:"contains"in C?function(e,t){return(t=9===t.nodeType||t===window?C:t)!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},{mouseenter:{base:"mouseover",condition:Q},mouseleave:{base:"mouseout",condition:Q},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}),M=(s=B("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),a=s.concat(B("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),r=a.concat(B("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),l=s.concat(B("char charCode key keyCode keyIdentifier keyLocation location")),u=s.concat(B("data")),y=s.concat(B("touches targetTouches changedTouches scale rotation")),S=s.concat(B("data origin source")),m=s.concat(B("state")),b=/over|out/,_=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,l}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,t,n){return t.rightClick=3===e.which||2===e.button,t.pos={x:0,y:0},e.pageX||e.pageY?(t.clientX=e.pageX,t.clientY=e.pageY):(e.clientX||e.clientY)&&(t.clientX=e.clientX+I.body.scrollLeft+C.scrollLeft,t.clientY=e.clientY+I.body.scrollTop+C.scrollTop),b.test(n)&&(t.relatedTarget=e.relatedTarget||e[("mouseover"==n?"from":"to")+"Element"]),a}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return r}},{reg:/^text/i,fix:function(){return u}},{reg:/^touch|^gesture/i,fix:function(){return y}},{reg:/^message$/i,fix:function(){return S}},{reg:/^popstate$/i,fix:function(){return m}},{reg:/.*/,fix:function(){return s}}],P={},z.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},z.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},z.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},z.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},z.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},z.prototype.clone=function(e){var t=new z(this,this.element,this.isNative);return t.currentTarget=e,t},z),x=($.prototype.inNamespaces=function(e){var t,n,s=0;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)e[t]==this.namespaces[n]&&s++;return e.length===s},$.prototype.matches=function(e,t,n){return!(this.element!==e||t&&this.original!==t||n&&this.handler!==n)},$),K=(d={},p=function(e,t,n,s,a,i){var o=a?"r":"$";if(t&&"*"!=t){var r,c=0,l=d[o+t],u="*"==e;if(l)for(r=l.length;c<r;c++)if((u||l[c].matches(e,n,s))&&!i(l[c],l,c,t))return}else for(var g in d)g.charAt(0)==o&&p(e,g.substr(1),n,s,a,i)},{has:function(e,t,n,s){var a,i=d[(s?"r":"$")+t];if(i)for(a=i.length;a--;)if(!i[a].root&&i[a].matches(e,n,null))return!0;return!1},get:function(e,t,n,s){var a=[];return p(e,t,n,null,s,function(e){return a.push(e)}),a},put:function(e){var t=!e.root&&!this.has(e.element,e.type,null,!1),n=(e.root?"r":"$")+e.type;return(d[n]||(d[n]=[])).push(e),t},del:function(e){p(e.element,e.type,null,e.handler,e.root,function(e,t,n){return t.splice(n,1),e.removed=!0,0===t.length&&delete d[(e.root?"r":"$")+e.type],!1})},entries:function(){var e,t=[];for(e in d)"$"==e.charAt(0)&&(t=t.concat(d[e]));return t}}),X=N?function(e,t,n){e[n?L:"removeEventListener"](t,i,!1)}:function(t,e,n,s){var a;n?(K.put(a=new x(t,s||e,function(e){i.call(t,e,s)},i,null,null,!0)),s&&null==t["_on"+s]&&(t["_on"+s]=0),a.target.attachEvent("on"+a.eventType,a.handler)):(a=K.get(t,s||e,i,!0)[0])&&(a.target.detachEvent("on"+a.eventType,a.handler),K.del(a))},Y=function(e,t,n,s,a){return function(){s.apply(this,arguments),e(t,n,a)}},V=function(e,t,n,s){for(var t=t&&t.replace(T,""),a=K.get(e,t,null,!1),i={},o=0,r=a.length;o<r;o++)n&&a[o].original!==n||!a[o].inNamespaces(s)||(K.del(a[o]),!i[a[o].eventType]&&a[o][w]&&(i[a[o].eventType]={t:a[o].eventType,c:a[o].type}));for(o in i)K.has(e,i[o].t,null,!1)||X(e,i[o].t,!1,i[o].c)},j=N?function(e,t,n){var s=I.createEvent(e?"HTMLEvents":"UIEvents");s[e?"initEvent":"initUIEvent"](t,!0,!0,k,1),n.dispatchEvent(s)}:function(e,t,n){n=c(n,e),e?n.fireEvent("on"+t,I.createEventObject()):n["_on"+t]++},H=function(e,t,n){var s,a,i,o=O(t);if(o&&0<t.indexOf(" ")){for(i=(t=B(t)).length;i--;)H(e,t[i],n);return e}if((a=o&&t.replace(T,""))&&F[a]&&(a=F[a].base),!t||o)(o=o&&t.replace(E,""))&&(o=B(o,".")),V(e,a,n,o);else if(R(t))V(e,null,t);else for(s in t)t.hasOwnProperty(s)&&H(e,s,t[s]);return e},q={on:f,add:function(e,t,n,s){return f.apply(null,O(n)?[e,n,t,s].concat(3<arguments.length?G.call(arguments,5):[]):G.call(arguments))},one:function(){return f.apply(D,arguments)},off:H,remove:H,clone:function(e,t,n){for(var s,a,i=K.get(t,n,null,!1),o=i.length,r=0;r<o;r++)i[r].original&&(s=[e,i[r].type],(a=i[r].handler.__beanDel)&&s.push(a.selector),s.push(i[r].original),f.apply(null,s));return e},fire:function(e,t,n){for(var s,a,i,o,r=B(t),c=r.length;c--;)if(t=r[c].replace(T,""),(i=(i=r[c].replace(E,""))?B(i,"."):i)||n||!e[w])for(o=K.get(e,t,null,!1),n=[!1].concat(n),s=0,a=o.length;s<a;s++)o[s].inNamespaces(i)&&o[s].handler.apply(e,n);else j(U[t],t,e);return e},setSelectorEngine:n,noConflict:function(){return t[e]=v,this}};function W(n,s,a,i){function o(e,t){return s.apply(n,i?G.call(t,e?0:1).concat(i):t)}function r(e,t){return s.__beanDel?s.__beanDel.ft(e.target,n):t}var e=a?function(e){var t=r(e,this);if(a.apply(t,arguments))return e&&(e.currentTarget=t),o(e,arguments)}:function(e){return s.__beanDel&&(e=e.clone(r(e))),o(e,arguments)};return e.__beanDel=s.__beanDel,e}function $(e,t,n,s,a,i,o){var r=F[t];"unload"==t&&(n=Y(V,e,t,n,s)),r&&(r.condition&&(n=W(e,n,r.condition,i)),t=r.base||t),this.isNative=r=U[t]&&!!e[w],this.customType=!N&&!r&&t,this.element=e,this.type=t,this.original=s,this.namespaces=a,this.eventType=N||r?t:"propertychange",this.target=c(e,r),this[w]=!!this.target[w],this.root=o,this.handler=W(e,n,null,i)}function z(e,t,n){if(arguments.length&&(e=e||((t.ownerDocument||t.document||t).parentWindow||k).event,this.originalEvent=e,this.isNative=n,this.isBean=!0,e)){var s,a,i,o,r,c=e.type,l=e.target||e.srcElement;if(this.target=l&&3===l.nodeType?l.parentNode:l,n){if(!(r=P[c]))for(s=0,a=_.length;s<a;s++)if(_[s].reg.test(c)){P[c]=r=_[s].fix;break}for(s=(o=r(e,this,c)).length;s--;)!((i=o[s])in this)&&i in e&&(this[i]=e[i])}}}function Q(e){return(e=e.relatedTarget)?e!==this&&"xul"!==e.prefix&&!/document/.test(this.toString())&&!A(e,this):null==e}return k.attachEvent&&(h=function(){var e,t=K.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&H(t[e].element,t[e].type);k.detachEvent("onunload",h),k.CollectGarbage&&k.CollectGarbage()},k.attachEvent("onunload",h)),n(),q},void 0!==n&&n.exports?n.exports=t():"function"==typeof define&&define.amd?define(t):e.bean=t(),"function"==typeof provide&&provide("bean",n.exports),function(e){function t(n,s,e){var a=s?[s]:[];return function(){for(var e=0,t=this.length;e<t;e++)i[n=!arguments.length&&"on"==n&&s?"fire":n].apply(this,[this[e]].concat(a,Array.prototype.slice.call(arguments,0)));return this}}for(var i=require("bean"),n=t("add"),s=t("on"),a=t("one"),o=t("off"),r=t("fire"),c={on:s,addListener:s,bind:s,listen:s,delegate:n,one:a,off:o,unbind:o,unlisten:o,removeListener:o,undelegate:o,emit:r,trigger:r,cloneEvents:t("clone"),hover:function(e,t,n){for(n=this.length;n--;)i.on.call(this,this[n],"mouseenter",e),i.on.call(this,this[n],"mouseleave",t);return this}},l="blur change click dblclick error focus focusin focusout keydown keypress keyup load mousedown mouseenter mouseleave mouseout mouseover mouseup mousemove resize scroll select submit unload".split(" "),u=l.length;u--;)c[l[u]]=t("on",l[u]);i.setSelectorEngine(e),e.ender(c,!0)}(ender)}(),function(){var e={};"function"==typeof provide&&provide("jeesh",e),$.ender(e)}(),function(e,t){"use strict";"function"==typeof define&&define.amd?(t(e.ns_=e.ns_||{}),define("nyt_comscore_streaming",[],function(){return e.ns_})):"object"==typeof module&&module.exports?module.exports=t({}):t(e.ns_=e.ns_||{})}(this,function(e){"use strict";e.ns_=e;var a,n,i,o,t,ce=ce||{};ce.indexOf=function(n,e){var s=-1;return this.forEach(e,function(e,t){e==n&&(s=t)}),s},ce.forEach=function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var s,a=void 0!==e.__proto__;for(s in e)!e.hasOwnProperty(s)||a&&void 0!==e.__proto__[s]||"function"==typeof e[s]||t.call(n,e[s],s)}else for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i)}catch(e){}},(ce=ce||{}).parseBoolean=function(e,t){return t=t||!1,e?"0"!=e:t},ce.parseInteger=function(e,t){return null==e||isNaN(e)?t||0:parseInt(e)},ce.parseLong=function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},ce.toString=function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if(e instanceof Array)return e.join(",");var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+":"+e[t]+";");return n||e.toString()},(ce=ce||{}).filter=function(e,t){var n,s={};for(n in t)t.hasOwnProperty(n)&&e(t[n])&&(s[n]=t[n]);return s},ce.extend=function(e){var t,n=arguments.length;e=e||{};for(var s=1;s<n;s++)if(t=arguments[s])for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},(ce=ce||{}).cloneObject=function(e){return null==e||"object"!=typeof e?e:(a=[],n.prototype={constructor:n,canCopy:function(){return!1},create:function(e){},populate:function(e,t,n){}},s.prototype={constructor:s,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,n=t.length,s=0;s<n;s++)if(t[s][0]===e)return t[s][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var t=this.getCachedResult(e);if(t)return t;for(var n=0;n<a.length;n++){var s=a[n];if(s.canCopy(e))return this.applyDeepCopier(s,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var n=e.create(t);if(this.cacheResult(t,n),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,n),this.depth--,n}},i.DeepCopier=n,i.deepCopiers=a,(i.register=function(e){e instanceof n||(e=new n(e)),a.unshift(e)})({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?"object"==typeof(e=e.constructor.prototype)?(t.prototype=e,new t):e:{}},populate:function(e,t,n){for(var s in t)t.hasOwnProperty(s)&&(n[s]=e(t[s]));return n}}),i.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,n){for(var s=0;s<t.length;s++)n.push(e(t[s]));return n}}),i.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),i.register({canCopy:function(e){return e=e,"undefined"!=typeof window&&window&&window.Node?e instanceof Node:"undefined"!=typeof document&&e===document||"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode},create:function(e){return"undefined"!=typeof document&&e===document?document:e.cloneNode(!1)},populate:function(e,t,n){if("undefined"!=typeof document&&t===document)return document;if(t.childNodes&&t.childNodes.length)for(var s=0;s<t.childNodes.length;s++){var a=e(t.childNodes[s]);n.appendChild(a)}}}),{deepCopy:i}).deepCopy(e);var a;function t(){}function n(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function s(){this.copiedObjects=[];var t=this;this.recursiveDeepCopy=function(e){return t.deepCopy(e)},this.depth=0}function i(e,t){var n=new s;return t&&(n.maxDepth=t),n.deepCopy(e)}},(ce=ce||{}).getNamespace=function(){return e.ns_||e},ce.uid=(t=1,function(){return+new Date+"_"+t++}),ce.isEmpty=function(e){return null==e||""===e||e instanceof Array&&0===e.length},ce.isNotEmpty=function(e){return!this.isEmpty(e)},ce.safeGet=function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},ce.isTrue=function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},ce.regionMatches=function(e,t,n,s,a){if(t<0||s<0||t+a>e.length||s+a>n.length)return!1;for(;0<=--a;)if(e.charAt(t++)!=n.charAt(s++))return!1;return!0},ce.exists=function(e){return void 0!==e&&null!=e},i=!(n=!(a=[])),o=1e3,ce.onSystemClockJump=function(e,t){a.push(e),n||(n=!0,o=t||o,i=+new Date,setInterval(function(){var e=i+o,t=+new Date,n=(i=t)-e;if(Math.abs(n)>o)for(var s=0;s<a.length;++s)a[s](0<n)},o))},(ce=ce||{}).hasPageVisibilityAPISupport=function(){if("undefined"==typeof document)return!1;var e=void 0===document.hidden&&void 0===document.mozHidden&&void 0===document.msHidden&&void 0===document.webkitHidden?!1:!0;return function(){return e}}(),ce.getPageVisibilityAPI=function(){if("undefined"==typeof document)return null;var e,t,n;void 0!==document.hidden?(e="hidden",t="visibilitychange",n="visibilityState"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange",n="mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange",n="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange",n="webkitVisibilityState");var s={hidden:e,visibilityChange:t,state:n};return function(){return s}}(),ce.isTabInBackground=function(){if("undefined"==typeof document)return null;var e=ce.getPageVisibilityAPI();return function(){return document[e.hidden]}}(),ce.getBrowserName=function(){if(!navigator)return"";var e,t,n=navigator.userAgent||"",s=navigator.appName||"";return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?s="Opera":-1!=(t=n.indexOf("Android"))?s="Android":-1!=(t=n.indexOf("Chrome"))?s="Chrome":-1!=(t=n.indexOf("Safari"))?s="Safari":-1!=(t=n.indexOf("Firefox"))?s="Firefox":-1!=(t=n.indexOf("IEMobile"))?s="Internet Explorer Mobile":"Microsoft Internet Explorer"==s||"Netscape"==s?s="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))?(s=n.substring(e,t)).toLowerCase()==s.toUpperCase()&&(s=navigator.appName):s="unknown",s},ce.getBrowserFullVersion=function(){if(!navigator)return"";var e,t=navigator.userAgent||"",n=navigator.appName||"",s=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(e=t.indexOf("Opera"))?(s=t.substring(e+6),-1!=(e=t.indexOf("Version"))&&(s=t.substring(e+8))):-1!=(e=t.indexOf("OPR/"))?s=t.substring(e+4):-1!=(e=t.indexOf("Android"))?s=t.substring(e+11):-1!=(e=t.indexOf("Chrome"))?s=t.substring(e+7):-1!=(e=t.indexOf("Safari"))?(s=t.substring(e+7),-1!=(e=t.indexOf("Version"))&&(s=t.substring(e+8))):-1!=(e=t.indexOf("Firefox"))?s=t.substring(e+8):"Microsoft Internet Explorer"==n?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(s=parseFloat(RegExp.$1)):"Netscape"==n?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&(s=parseFloat(RegExp.$1)):s=t.lastIndexOf(" ")+1<(e=t.lastIndexOf("/"))?t.substring(e+1):"unknown",-1!=(e=(s=-1!=(e=(s=-1!=(e=(s=s.toString()).indexOf(";"))?s.substring(0,e):s).indexOf(" "))?s.substring(0,e):s).indexOf(")"))&&(s=s.substring(0,e)),e=parseInt(""+s,10),s=isNaN(e)?""+parseFloat(navigator.appVersion):s},ce.browserAcceptsLargeURLs=function(){return"undefined"==typeof window||(window.ActiveXObject,!0)},ce.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},ce.isWebSecure=function(){return"undefined"!=typeof document&&null!=document&&"s"===document.location.href.charAt(4)};var g,f,d,p,y,S,m,le=function(n,i){function t(e){e=e||[];var t=["comScore",+new Date];return n&&t.push(n),e=Array.prototype.slice.call(e),t.concat(e)}function s(e){var t,n,s;if("boolean"==typeof i||!i)return i;if(s=e.join(" "),!(i instanceof Array&&0<i.length)){if("object"!=typeof i)return 1;var a=!1;if(i.hide instanceof Array)for(t=0;t<i.hide.length;++t)if((n=i.hide[t])instanceof RegExp&&n.test(s)){a=!0;break}if(i.show instanceof Array)for(t=0;t<i.show.length;++t)if((n=i.show[t])instanceof RegExp&&n.test(s))return 1;return!a&&!i.show}for(t=0;t<i.length;++t)if((n=i[t])instanceof RegExp&&n.test(s))return 1}function a(e){var t=o.length;(1e4<t||i&&i.max&&t>i.max)&&(o=o.slice(-Math.floor(i.max/2))).push("Previous logs: "+t),o.push(e)}var e=this,o=[];e.log=function(){var e=t(arguments);a(e),"undefined"!=typeof console&&"function"==typeof console.log&&s(e)},e.warn=function(){var e=t(arguments);a(e),"undefined"!=typeof console&&"function"==typeof console.warn&&s(e)},e.error=function(){var e=t(arguments);a(e),"undefined"!=typeof console&&"function"==typeof console.error&&s(e)},e.apiCall=function(e){for(var t=["API call to:",e],n=1;n<arguments.length;++n)t.push("arg"+n+":",arguments[n]);this.log.apply(this,t)},e.infoLog=function(){var e=["Trace log:"];e.push.apply(e,Array.prototype.slice.call(arguments)),this.log.apply(this,e)},e.deprecation=function(e,t){e=["Deprecated API:",e,"is deprecated and will be eventually removed."];t&&e.push("Use",t,"instead."),this.warn.apply(this,e)},e.getLogHistory=function(){return o}};return e.StreamingAnalytics=e.StreamingAnalytics||function(){var s,f={PLATFORM:"generic",httpGet:function(e,t){var n;"undefined"!=typeof Image?((n=new Image).onload=function(){t&&t(200),n=null},n.onerror=function(){t&&t(),n=null},n.src=e):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},httpPost:function(e,t,n){"function"==typeof setTimeout?n&&setTimeout(function(){n(200)},0):n&&n(200)},Storage:(s="cs_",function(){var n="undefined"!=typeof localStorage?localStorage:null;ce.extend(this,{get:function(e){return n&&n.getItem(s+e)},set:function(e,t){n&&n.setItem(s+e,t)},has:function(e){return n&&n.getItem(s+e)},remove:function(e){n&&n.removeItem(s+e)},clear:function(){for(var e=0;n&&e<n.length;++e){var t=n.key(e);t.substr(0,s.length)===s&&n.removeItem(t)}}})}),IO:{dir:function(){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(){return!1},read:function(){return null}},onDataFetch:function(e){e()},getCrossPublisherId:function(){return null},getAppName:function(){return Q.UNKNOWN_VALUE},getAppVersion:function(){return Q.UNKNOWN_VALUE},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return Q.UNKNOWN_VALUE},getPlatformVersion:function(){return Q.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return Q.UNKNOWN_VALUE},getRuntimeVersion:function(){return Q.UNKNOWN_VALUE},getDisplayResolution:function(){return Q.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return Q.UNKNOWN_RESOLUTION},getLanguage:function(){return Q.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return Q.UNKNOWN_VALUE},getConnectionType:function(){return Q.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return Q.UNKNOWN_VALUE},isConnectionSecure:function(){return!1},processMeasurementLabels:function(){}},Q={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};ce.jsonObjectToStringDictionary=function(e){var t,n={};for(t in e){var s=e[t];n[t]=null==s?s:e[t]+""}return n},ce.getKeys=function(e,t){var n,s=[];for(n in e)t&&!t.test(n)||!e.hasOwnProperty(n)||(s[s.length]=n);return s},ce.fixEventTime=function(e){if(e.ns_ts)return parseInt(e.ns_ts);var t=+new Date;return e.ns_ts=t+"",t},ce.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},ce.addNewPlaybackInterval=function(e,t,n,s){var a={};if(!(t<=n))return ce.cloneObject(e);if(a.start=t,a.end=n,0==e.length)return e.push(a),ce.cloneObject(e);for(c=0;c<e.length;c++)if(a.start>=e[c].start&&a.end<=e[c].end)return ce.cloneObject(e);for(var i=!1,o=0;o<e.length;o++)if(o+1===e.length&&a.start>=e[o].start||a.start>=e[o].start&&a.start<e[o+1].start){e.splice(o+1,0,a),i=!0;break}i||e.splice(0,0,a);for(var r=[e[0]],c=1;c<e.length;c++)r[r.length-1].end+s<e[c].start?r.push(e[c]):r[r.length-1].end<e[c].end&&(r[r.length-1].end=e[c].end);return ce.cloneObject(r)},ce.stateToString=function(e){var t,n=a.InternalStates;for(t in n)if(n.hasOwnProperty(t)&&n[t]==e)return t};var t,n,x=(n=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"],{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(e){return n[e]}}),K={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},d=(t=["c","s","r"],{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(e){return t[e]}}),J={STREAMINGANALYTICS_VERSION:"6.1.0.170130",MODEL_VERSION:"5.8",LOG_NAMESPACE:"STA",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL:1e3,SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL:500,DEFAULT_ASSET_PLAYBACK_RATE:100,STANDARD_METADATA_LABELS:["ns_st_st","ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","cs_impid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_st_ie","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},_=(i.resetAsset=function(e,t,n){for(var s=e.getLabels(),a={},i=0;n&&i<n.length;++i)s.hasOwnProperty(n[i])&&(a[n[i]]=s[n[i]]);t.setLabels(a),t.setPlaybackIntervalMergeTolerance(e.getPlaybackIntervalMergeTolerance())},i),p=(e.resetPlaybackSession=function(e,t,n){for(var s=t.getAsset(),a=t.getLabels(),i={},o=0;n&&o<n.length;o++)a.hasOwnProperty(n[o])&&(i[n[o]]=a[n[o]]);e.getPlaybackSession().setLabels(i),_.resetAsset(s,e.getPlaybackSession().getAsset(),n)},e),X=function(s){var t,a,n=this,i=[];ce.extend(this,{newEvent:function(e){for(var t=0;t<i.length;++t)i[t](e.eventLabels);(function(e){a=ce.extend({},e);var t,n=s.getStaCore().getLiveEndpointURL();s.getAppCore()?s.getStaCore().isProperlyInitialized()&&(t=s.getStaCore().getExports().et,"function"==typeof s.getAppCore().getMeasurementDispatcher?s.getAppCore().getMeasurementDispatcher().send(t.HIDDEN,e,n):(t=s.getStaCore().getExports().am.newApplicationMeasurement(s.getAppCore(),t.HIDDEN,e,n),s.getAppCore().getQueue().offer(t))):n&&s.getStaCore().getPlatformAPI().httpGet(s.getStaCore().prepareUrl(n,e))})(e.eventLabels),e.eventType!=x.HEARTBEAT&&n.incrementEventCounter()},addMeasurementListener:function(e){"function"==typeof e&&i.push(e)},removeMeasurementListener:function(e){for(var t=NaN,n=0;n<i.length;++n)if(i[n]==e){t=n;break}isNaN(t)||i.splice(t,1)},getEventCounter:function(){return t},incrementEventCounter:function(){t++},setEventCounter:function(e){t=e},getMeasurementSnapshot:function(){return a}}),t=1},Y=function(n){function t(){o++;var e={},t=ce.fixEventTime(e);e.ns_st_hc=n.getHeartbeat().getCount()+"";t=n.getStaCore().createLabels(x.HEARTBEAT,e,t);n.getPlaybackSession().getAsset().updateIndependentLabels(t.eventLabels),n.getEventManager().newEvent(t),i=0,r.resume()}function s(){null!=a&&(n.getStaCore().getPlatformAPI().clearTimeout(a),a=null)}var a,i,o,r=this,c=J.DEFAULT_HEARTBEAT_INTERVAL;ce.extend(this,{getCount:function(){return o},setIntervals:function(e){c=e},getInterval:function(e){var t=0;if(null!=c)for(var n=0;n<c.length;n++){var s=c[n],a=s.playingtime;if(!a||e<a){t=s.interval;break}}return t},getIntervals:function(){return c},resume:function(){s();var e=r.getInterval(n.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-n.getPlaybackSession().getAsset().getPlaybackTimestamp()));0<e&&(e=0<i?i:e,a=n.getStaCore().getPlatformAPI().setTimeout(t,e)),i=0},pause:function(){s();var e=r.getInterval(n.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-n.getPlaybackSession().getAsset().getPlaybackTimestamp()));i=e-(n.getPlaybackSession().getAsset().getPlaybackTime()+(+new Date-n.getPlaybackSession().getAsset().getPlaybackTimestamp()))%e}}),o=i=0},V=function(n){function e(){var e={},t=ce.fixEventTime(e);n.getStaCore().newPseudoEvent(x.KEEPALIVE,t,e),a.start()}function t(){null!=s&&(n.getStaCore().getPlatformAPI().clearTimeout(s),s=null)}var s,a=this,i=J.DEFAULT_KEEP_ALIVE_INTERVAL;ce.extend(a,{start:function(){t(),s=n.getStaCore().getPlatformAPI().setTimeout(e,i)},stop:t,setInterval:function(e){i=e},getInterval:function(){return i}})},j=function(e){var n,s,a,i=this;ce.extend(i,{eventTypeToState:function(e){if(a==K.IDLE){if(e==x.PLAY)return K.PLAYING;if(e==x.SEEK_START)return K.SEEKING_BEFORE_PLAYBACK;if(e==x.BUFFER)return K.BUFFERING_BEFORE_PLAYBACK}else if(a==K.PLAYBACK_NOT_STARTED){if(e==x.PLAY)return K.PLAYING;if(e==x.SEEK_START)return K.SEEKING_BEFORE_PLAYBACK;if(e==x.BUFFER)return K.BUFFERING_BEFORE_PLAYBACK;if(e==x.END||e==x.AD_SKIP)return K.IDLE}else if(a==K.PLAYING){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.BUFFER)return K.BUFFERING_DURING_PLAYBACK;if(e==x.PAUSE)return K.PAUSED;if(e==x.SEEK_START)return K.SEEKING_DURING_PLAYBACK}else if(a==K.PAUSED){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.BUFFER)return K.BUFFERING_DURING_PAUSE;if(e==x.PLAY)return K.PLAYING;if(e==x.SEEK_START)return K.SEEKING_DURING_PAUSE}else if(a==K.BUFFERING_BEFORE_PLAYBACK){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PAUSE||e==x.BUFFER_STOP)return K.PLAYBACK_NOT_STARTED;if(e==x.PLAY)return K.PLAYING;if(e==x.SEEK_START)return K.SEEKING_BEFORE_PLAYBACK}else if(a==K.BUFFERING_DURING_PLAYBACK){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PLAY||e==x.BUFFER_STOP)return K.PLAYING;if(e==x.PAUSE_ON_BUFFERING)return K.PAUSED_DURING_BUFFERING;if(e==x.SEEK_START)return K.SEEKING_DURING_BUFFERING;if(e==x.PAUSE)return K.PAUSED}else if(a==K.BUFFERING_DURING_SEEKING){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PLAY)return K.PLAYING;if(e==x.BUFFER_STOP)return K.SEEKING_DURING_PLAYBACK;if(e==x.PAUSE)return K.PAUSED}else if(a==K.BUFFERING_DURING_PAUSE){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PLAY)return K.PLAYING;if(e==x.SEEK_START)return K.SEEKING_DURING_PAUSE;if(e==x.BUFFER_STOP||e==x.PAUSE)return K.PAUSED}else if(a==K.SEEKING_BEFORE_PLAYBACK){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PAUSE)return K.PLAYBACK_NOT_STARTED;if(e==x.PLAY)return K.PLAYING;if(e==x.BUFFER)return K.BUFFERING_BEFORE_PLAYBACK}else if(a==K.SEEKING_DURING_PLAYBACK){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PLAY)return K.PLAYING;if(e==x.PAUSE)return K.PAUSED;if(e==x.BUFFER)return K.BUFFERING_DURING_SEEKING}else if(a==K.SEEKING_DURING_BUFFERING){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PLAY)return K.PLAYING;if(e==x.PAUSE||e==x.BUFFER_STOP)return K.PAUSED;if(e==x.BUFFER)return K.BUFFERING_DURING_SEEKING}else if(a==K.SEEKING_DURING_PAUSE){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.PLAY)return K.PLAYING;if(e==x.PAUSE||e==x.BUFFER_STOP)return K.PAUSED;if(e==x.BUFFER)return K.BUFFERING_DURING_PAUSE}else if(a==K.PAUSED_DURING_BUFFERING){if(e==x.END||e==x.AD_SKIP)return K.IDLE;if(e==x.SEEK_START)return K.SEEKING_DURING_BUFFERING;if(e==x.PAUSE)return K.PAUSED;if(e==x.PLAY||e==x.BUFFER_STOP)return K.PLAYING}return null},getCurrentState:function(){return a},newEvent:function(e,t){e=i.eventTypeToState(e);a!=e&&(s=a,a=e,n=t)},getPreviousState:function(){return s},getLastStateChangeTimestamp:function(){return n}}),a=K.IDLE,s=null,n=NaN},H=function(s){ce.extend(this,{onSeekStartWhenPausedOrBufferingDuringPause:function(e,t){t=parseInt(t.ns_st_po);s.getPlaybackSession().getAsset().isSeeking()?s.getPlaybackSession().getAsset().isCollectingSeekingTime()||(s.getPlaybackSession().getAsset().setSeekingTimestamp(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().isSeeking()||(s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(t),s.getPlaybackSession().getAsset().setSeekingTimestamp(e)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onBufferWhenSeekingOrPaused:function(e,t){s.getPlaybackSession().setBufferingTimestamp(e),s.getPlaybackSession().getAsset().setBufferingTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(e,t){s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().getAsset().addElapsedTime(e);var n=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),s.getEventManager().newEvent(n),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(e,t){s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onBufferStopOrOnPlayWhenBufferingDuringPlayback:function(e,t){t=parseInt(t.ns_st_po);s.getStaCore().stopPausedOnBufferingTimer(),s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(t),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getHeartbeat().resume(),s.getKeepAlive().start()}})},q=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onBufferStop:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()?s.getPlaybackSession().getAsset().isCollectingSeekingTime()||(s.getPlaybackSession().getAsset().setSeekingTimestamp(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().isSeeking()||(s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(t),s.getPlaybackSession().getAsset().setSeekingTimestamp(e))},onPause:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().getAsset().setPlaybackStarted(!0),!s.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=s.getPlaybackSession().getPlaybackCounter()||(s.getPlaybackSession().incrementPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().setPlaybackStarted(!0),s.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),(0==s.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||s.getPlaybackSession().getAsset().getPartNumber()<=s.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(s.getPlaybackSession().getAsset().setLowestPartNumberPlayed(s.getPlaybackSession().getAsset().getPartNumber()),s.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaySequenceCounter(0),s.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=s.getStaCore().getLoadTimeOffset()+e-s.getStaCore().getInitTimestamp()+"",s.getStaCore().setLoadingTimeSent(!0)),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},W=function(s){ce.extend(this,{onEndAndSkip:function(e,t){s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e);var n=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),s.getEventManager().newEvent(n),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onPause:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},$=function(s){ce.extend(this,{onPauseOnBuffering:function(e,t){parseInt(t.ns_st_po),s.getStaCore().stopPausedOnBufferingTimer(),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses();t=s.getStaCore().createLabels(x.PAUSE,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(t.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(t.eventLabels),s.getEventManager().newEvent(t),s.getPlaybackSession().setBufferingTimestamp(e),s.getPlaybackSession().getAsset().setBufferingTimestamp(e)},onEndOrAdSkip:function(e,t){parseInt(t.ns_st_po),s.getStaCore().stopPausedOnBufferingTimer(),s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e);e=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);s.getStaCore().stopPausedOnBufferingTimer(),s.getHeartbeat().pause(),s.getKeepAlive().stop(),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(n),s.getPlaybackSession().getAsset().setSeekingTimestamp(e),s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses();e=s.getStaCore().createLabels(x.PAUSE,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)},onPause:function(e,t){parseInt(t.ns_st_po),s.getStaCore().stopPausedOnBufferingTimer(),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses();e=s.getStaCore().createLabels(x.PAUSE,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},z=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getStaCore().stopPausedOnBufferingTimer(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e);var n=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),s.getEventManager().newEvent(n),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onPause:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses(),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},Z=function(s){ce.extend(this,{onBuffer:function(e,t){s.getPlaybackSession().setPlaybackSessionStarted(!0),s.getPlaybackSession().getAsset().setAssetStarted(!0),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().setSeekingTime(s.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),s.getPlaybackSession().setBufferingTimestamp(e),s.getPlaybackSession().getAsset().setBufferingTimestamp(e)},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);s.getPlaybackSession().setPlaybackSessionStarted(!0),s.getPlaybackSession().getAsset().setAssetStarted(!0),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().setSeekingTime(s.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(t),s.getPlaybackSession().getAsset().setSeekingTimestamp(e)},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().setPlaybackSessionStarted(!0),s.getPlaybackSession().getAsset().setAssetStarted(!0),!s.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=s.getPlaybackSession().getPlaybackCounter()||(s.getPlaybackSession().incrementPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().setSeekingTime(s.getPlaybackSession().getAsset().getSeekingTimeBeforeEnd()),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().setPlaybackStarted(!0),s.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==s.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||s.getPlaybackSession().getAsset().getPartNumber()<=s.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(s.getPlaybackSession().getAsset().setLowestPartNumberPlayed(s.getPlaybackSession().getAsset().getPartNumber()),s.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaySequenceCounter(0),s.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=s.getStaCore().getLoadTimeOffset()+e-s.getStaCore().getInitTimestamp()+"",s.getStaCore().setLoadingTimeSent(!0)),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},ee=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().getAsset().addElapsedTime(e);var n=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),s.getEventManager().newEvent(n),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},te=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1));e=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onBufferStop:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().isSeeking()?s.getPlaybackSession().getAsset().isCollectingSeekingTime()||(s.getPlaybackSession().getAsset().setSeekingTimestamp(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0)):s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().isSeeking()||(s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(t),s.getPlaybackSession().getAsset().setSeekingTimestamp(e)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPause:function(e,t){s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().addBufferingTime(e),s.getPlaybackSession().getAsset().addBufferingTime(e),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},ne=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onSeekStart:function(e,t){t=parseInt(t.ns_st_po);s.getPlaybackSession().getAsset().isSeeking()?s.getPlaybackSession().getAsset().setSeekingTimestamp(e):s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().isSeeking()||(s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(t),s.getPlaybackSession().getAsset().setSeekingTimestamp(e))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().setPlaybackSessionStarted(!0),!s.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=s.getPlaybackSession().getPlaybackCounter()||(s.getPlaybackSession().incrementPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().setPlaybackStarted(!0),s.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==s.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||s.getPlaybackSession().getAsset().getPartNumber()<=s.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(s.getPlaybackSession().getAsset().setLowestPartNumberPlayed(s.getPlaybackSession().getAsset().getPartNumber()),s.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaySequenceCounter(0),s.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=s.getStaCore().getLoadTimeOffset()+e-s.getStaCore().getInitTimestamp()+"",s.getStaCore().setLoadingTimeSent(!0)),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)},onBuffer:function(){s.getPlaybackSession().setBufferingTimestamp(eventTimestamp),s.getPlaybackSession().getAsset().setBufferingTimestamp(eventTimestamp)}})},se=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){var n=parseInt(t.ns_st_po);s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().addPlaybackTime(e),s.getPlaybackSession().getAsset().addPlaybackTime(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().addInterval(n);e=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onBuffer:function(e,t){var n=parseInt(t.ns_st_po);s.getHeartbeat().pause(),s.getKeepAlive().stop(),s.getPlaybackSession().addPlaybackTime(e),s.getPlaybackSession().getAsset().addPlaybackTime(e),s.getPlaybackSession().getAsset().addInterval(n),s.getStaCore().isPauseOnBufferingEnabled()&&s.getStaCore().startPausedOnBufferingTimer(e,t),s.getPlaybackSession().getAsset().incrementBufferCount(),s.getPlaybackSession().setBufferingTimestamp(e),s.getPlaybackSession().getAsset().setBufferingTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e)},onSeekStart:function(e,t){var n=parseInt(t.ns_st_po);s.getHeartbeat().pause(),s.getKeepAlive().stop(),s.getPlaybackSession().addPlaybackTime(e),s.getPlaybackSession().getAsset().addPlaybackTime(e),s.getPlaybackSession().getAsset().addInterval(n),s.getPlaybackSession().getAsset().incrementSeeks(),s.getPlaybackSession().getAsset().setSeeking(!0),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!0),s.getPlaybackSession().getAsset().setSeekStartPosition(n),s.getPlaybackSession().getAsset().setSeekingTimestamp(e),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses();e=s.getStaCore().createLabels(x.PAUSE,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)},onPause:function(e,t){var n=parseInt(t.ns_st_po);s.getHeartbeat().pause(),s.getKeepAlive().stop(),s.getPlaybackSession().addPlaybackTime(e),s.getPlaybackSession().getAsset().addPlaybackTime(e),s.getPlaybackSession().getAsset().addInterval(n),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().incrementPauses(),s.getPlaybackSession().getAsset().incrementPauses();e=s.getStaCore().createLabels(x.PAUSE,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},ae=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onPause:function(e,t){s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),!s.getPlaybackSession().getAsset().isPlaybackSessionLooping()&&0!=s.getPlaybackSession().getPlaybackCounter()||(s.getPlaybackSession().incrementPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaybackSessionLooping(!1)),s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().getAsset().setPlaybackStarted(!0),s.getPlaybackSession().getAsset().incrementSegmentPlaybackCounter(),(0==s.getPlaybackSession().getAsset().getLowestPartNumberPlayed()||s.getPlaybackSession().getAsset().getPartNumber()<=s.getPlaybackSession().getAsset().getLowestPartNumberPlayed())&&(s.getPlaybackSession().getAsset().setLowestPartNumberPlayed(s.getPlaybackSession().getAsset().getPartNumber()),s.getPlaybackSession().getAsset().incrementAssetPlaybackCounter(),s.getPlaybackSession().getAsset().setPlaySequenceCounter(0),s.getPlaybackSession().getAsset().resetAssetPlaybackIntervals()),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=s.getStaCore().getLoadTimeOffset()+e-s.getStaCore().getInitTimestamp()+"",s.getStaCore().setLoadingTimeSent(!0)),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},ie=function(n){ce.extend(this,{onPause:function(e,t){n.getPlaybackSession().incrementPauses(),n.getPlaybackSession().getAsset().incrementPauses(),n.getPlaybackSession().getAsset().isSeeking()&&n.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(n.getPlaybackSession().getAsset().addSeekingTime(e),n.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),n.getPlaybackSession().getAsset().addElapsedTime(e),n.getPlaybackSession().getAsset().setElapsedTimestamp(e)}})},oe=function(s){ce.extend(this,{onEndOrAdSkip:function(e,t){parseInt(t.ns_st_po),s.getStaCore().resetHeartbeat(),s.getKeepAlive().stop(),s.getPlaybackSession().getAsset().addElapsedTime(e);var n=s.getStaCore().createLabels(x.END,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),s.getEventManager().newEvent(n),s.getPlaybackSession().getAsset().isSeeking()&&s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(e-s.getPlaybackSession().getAsset().getSeekingTimestamp()),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().storeAssetPlaybackCounters(),s.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),s.getPlaybackSession().getAsset().setPlaybackStarted(!1),t.hasOwnProperty("ns_st_pe")&&ce.parseBoolean(t.ns_st_pe,!1)&&s.getStaCore().resetPlaybackSession()},onPlay:function(e,t){var n=parseInt(t.ns_st_po);s.getPlaybackSession().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),s.getPlaybackSession().getAsset().incrementPlayCounter(),s.getPlaybackSession().getAsset().isSeeking()&&(s.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(s.getPlaybackSession().getAsset().addSeekingTime(e),s.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),s.getPlaybackSession().getAsset().addSeekingAmount(n),s.getPlaybackSession().getAsset().setSeeking(!1)),s.getPlaybackSession().getAsset().addElapsedTime(e),s.getPlaybackSession().getAsset().setElapsedTimestamp(e),s.getPlaybackSession().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackTimestamp(e),s.getPlaybackSession().getAsset().setPlaybackStartPosition(n),s.getStaCore().isLoadingTimeSent()||(t.ns_st_lt=s.getStaCore().getLoadTimeOffset()+e-s.getStaCore().getInitTimestamp()+"",s.getStaCore().setLoadingTimeSent(!0)),s.getHeartbeat().resume(),s.getKeepAlive().start();e=s.getStaCore().createLabels(x.PLAY,t,e);s.getPlaybackSession().getAsset().updateDeltaLabels(e.eventLabels),s.getPlaybackSession().getAsset().updateIndependentLabels(e.eventLabels),s.getEventManager().newEvent(e)}})},o=function(e){function y(e){var t=S.getStateMachine().getCurrentState();if(t==K.IDLE||t==K.PLAYBACK_NOT_STARTED||t==K.BUFFERING_BEFORE_PLAYBACK||t==K.SEEKING_BEFORE_PLAYBACK){if(e==x.PLAY)return 1}else if(t==K.PLAYING){if(e==x.END||e==x.AD_SKIP||e==x.SEEK_START||e==x.PAUSE)return 1}else if(t==K.PAUSED||t==K.BUFFERING_DURING_PAUSE||t==K.SEEKING_DURING_PLAYBACK||t==K.SEEKING_DURING_BUFFERING||t==K.SEEKING_DURING_PAUSE){if(e==x.END||e==x.AD_SKIP||e==x.PLAY)return 1}else if(t==K.BUFFERING_DURING_PLAYBACK){if(e==x.PAUSE_ON_BUFFERING||e==x.END||e==x.AD_SKIP||e==x.SEEK_START||e==x.PAUSE||e==x.PLAY)return 1}else if(t==K.BUFFERING_DURING_SEEKING){if(e==x.END||e==x.AD_SKIP||e==x.PAUSE||e==x.PLAY)return 1}else if(t==K.PAUSED_DURING_BUFFERING&&(e==x.END||e==x.AD_SKIP||e==x.BUFFER_STOP||e==x.PLAY))return 1}var S,m,b,_,P,A,h,k,v,E,T,L,I,C,t,n,N,w,s,a,i,D,G,r,B,O,R,U,o,F=this,c={},l=J.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,u=J.THROTTLING_DELAY,g={},M=!1;ce.extend(F,{getConfiguration:function(){return e||{}},enableSystemClockJumpsDetection:function(e){ce.onSystemClockJump(function(e){O=e,M=!0},e=e<J.SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL||!e?J.SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL:e)},createLabels:function(e,t,n){var s=!1;e==x.HEARTBEAT&&(a=isNaN(w)?N:w,((w=n)<a||M)&&(M=!(s=!0),n<a?(S.getPlaybackSession().addInternalErrorFlag("1"),S.getLogging().infoLog("System clock jump detected","to the far past")):O?(S.getPlaybackSession().addInternalErrorFlag("3"),S.getLogging().infoLog("System clock jump detected","to the future")):(S.getPlaybackSession().addInternalErrorFlag("2"),S.getLogging().infoLog("System clock jump detected","to the near past")),n=a));var a,i={};return"undefined"!=typeof document&&(i.c7=(a=document).URL,i.c8=a.title,i.c9=a.referrer),i.ns_ts=+new Date+"",i.ns_st_ev=x.toString(e),i.ns_st_mp=J.DEFAULT_PLAYERNAME,i.ns_st_mv=J.STREAMINGANALYTICS_VERSION,i.ns_st_ub="0",i.ns_st_br="0",i.ns_st_pn="1",i.ns_st_tp="0",i.ns_st_it=d.toString(d.SINGLE_CLIP),i.ns_st_sv=J.STREAMINGANALYTICS_VERSION,i.ns_st_smv=J.MODEL_VERSION,i.ns_type="hidden",i.ns_st_ec=S.getEventManager().getEventCounter()+"",i.ns_st_ki=S.getKeepAlive().getInterval()+"",S.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?i.ns_st_po=S.getPlaybackSession().getAsset().getExpectedPlaybackPosition(n)+"":i.ns_st_po=B+"",B=parseInt(i.ns_st_po),ce.extend(i,F.getLabels()),S.getPlaybackSession().createLabels(i,n),ce.extend(i,t),s&&(S.getPlaybackSession().setPlaybackTimestamp(w-parseInt(i.ns_st_pt)),S.getPlaybackSession().getAsset().setPlaybackTimestamp(w-parseInt(i.ns_st_pt)),S.getPlaybackSession().getAsset().setElapsedTimestamp(w-parseInt(i.ns_st_et)),S.getStateMachine().getCurrentState()==K.BUFFERING_DURING_PLAYBACK&&S.getPlaybackSession().getAsset().setBufferingTimestamp(w-parseInt(i.ns_st_bp))),{eventType:e,eventLabels:i}},newEvent:function(e,t,n,s){F.stopDelayedTransitionTimer();var a=S.getStateMachine().getCurrentState(),i=S.getStateMachine().eventTypeToState(e);if(null!=i&&i!=a)if(!F.isThrottlingEnabled()||a!=K.PLAYING&&a!=K.PAUSED||i!=K.PLAYING&&i!=K.PAUSED||s){var o,r,c,l,u=isNaN(w)?N:w,g=!1;((w=t)<u||M)&&(M=!(g=!0),t<u?(S.getPlaybackSession().addInternalErrorFlag("1"),S.getLogging().infoLog("System clock jump detected","to the far past")):O?(S.getPlaybackSession().addInternalErrorFlag("3"),S.getLogging().infoLog("System clock jump detected","to the future")):(S.getPlaybackSession().addInternalErrorFlag("2"),S.getLogging().infoLog("System clock jump detected","to the near past")),t=u),n.ns_st_po||(S.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?S.getStateMachine().getCurrentState()==K.IDLE?n.ns_st_po="0":n.ns_st_po=S.getPlaybackSession().getAsset().getExpectedPlaybackPosition(t)+"":n.ns_st_po=B+""),B=parseInt(n.ns_st_po),S.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(n.ns_st_po)),c=e,l=t,s=n,u=S.getStateMachine().getCurrentState(),c==x.AD_SKIP&&!s.hasOwnProperty("ns_st_ui")&&y(c)?s.ns_st_ui="skip":c==x.SEEK_START&&!s.hasOwnProperty("ns_st_ui")&&y(c)&&(s.ns_st_ui="seek"),u==K.IDLE?c==x.BUFFER?m.onBuffer(l,s):c==x.SEEK_START?m.onSeekStart(l,s):c==x.PLAY&&m.onPlay(l,s):u==K.PLAYBACK_NOT_STARTED?c==x.END||c==x.AD_SKIP?_.onEndOrAdSkip(l,s):c==x.SEEK_START?_.onSeekStart(l,s):c==x.PLAY?_.onPlay(l,s):c==x.BUFFER&&_.onBuffer(l,s):u==K.PLAYING?c==x.END||c==x.AD_SKIP?P.onEndOrAdSkip(l,s):c==x.BUFFER?P.onBuffer(l,s):c==x.SEEK_START?P.onSeekStart(l,s):c==x.PAUSE&&P.onPause(l,s):u==K.PAUSED?c==x.END||c==x.AD_SKIP?b.onEndOrAdSkip(l,s):c==x.PLAY?b.onPlay(l,s):c==x.BUFFER?C.onBufferWhenSeekingOrPaused(l,s):c==x.SEEK_START&&C.onSeekStartWhenPausedOrBufferingDuringPause(l,s):u==K.BUFFERING_BEFORE_PLAYBACK?c==x.END||c==x.AD_SKIP?A.onEndOrAdSkip(l,s):c==x.BUFFER_STOP?A.onBufferStop(l,s):c==x.SEEK_START?A.onSeekStart(l,s):c==x.PAUSE?A.onPause(l,s):c==x.PLAY&&A.onPlay(l,s):u==K.BUFFERING_DURING_PLAYBACK?c==x.PAUSE_ON_BUFFERING?h.onPauseOnBuffering(l,s):c==x.BUFFER_STOP?C.onBufferStopOrOnPlayWhenBufferingDuringPlayback(l,s):c==x.END||c==x.AD_SKIP?h.onEndOrAdSkip(l,s):c==x.SEEK_START?h.onSeekStart(l,s):c==x.PAUSE?h.onPause(l,s):c==x.PLAY&&C.onBufferStopOrOnPlayWhenBufferingDuringPlayback(l,s):u==K.BUFFERING_DURING_SEEKING?c==x.END||c==x.AD_SKIP?k.onEndOrAdSkip(l,s):c==x.PAUSE?k.onPause(l,s):c==x.PLAY?k.onPlay(l,s):c==x.BUFFER_STOP&&C.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(l,s):u==K.BUFFERING_DURING_PAUSE?c==x.END||c==x.AD_SKIP?v.onEndAndSkip(l,s):c==x.PAUSE?v.onPause(l,s):c==x.PLAY?v.onPlay(l,s):c==x.SEEK_START?C.onSeekStartWhenPausedOrBufferingDuringPause(l,s):c==x.BUFFER_STOP&&C.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(l,s):u==K.SEEKING_BEFORE_PLAYBACK?c==x.END||c==x.AD_SKIP?T.onEndOrAdSkip(l,s):c==x.PAUSE?T.onPause(l,s):c==x.PLAY?T.onPlay(l,s):c==x.BUFFER&&C.onBufferWhenSeekingOrPaused(l,s):u==K.SEEKING_DURING_PLAYBACK?c==x.END||c==x.AD_SKIP?I.onEndOrAdSkip(l,s):c==x.PLAY?I.onPlay(l,s):c==x.BUFFER?C.onBufferWhenSeekingOrPaused(l,s):c==x.PAUSE&&C.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(l,s):u==K.SEEKING_DURING_BUFFERING?c==x.PAUSE?L.onPause(l,s):c==x.BUFFER?C.onBufferWhenSeekingOrPaused(l,s):c==x.PLAY?C.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(l,s):c==x.END||c==x.AD_SKIP?C.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(l,s):c==x.BUFFER_STOP&&C.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(l,s):u==K.PAUSED_DURING_BUFFERING?c==x.END||c==x.AD_SKIP?E.onEndOrAdSkip(l,s):c==x.BUFFER_STOP?E.onBufferStop(l,s):c==x.SEEK_START?E.onSeekStart(l,s):c==x.PAUSE?E.onPause(l,s):c==x.PLAY&&E.onPlay(l,s):u==K.SEEKING_DURING_PAUSE&&(c==x.BUFFER?C.onBufferWhenSeekingOrPaused(l,s):c==x.PLAY?C.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(l,s):c==x.PAUSE?C.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(l,s):c==x.END||c==x.AD_SKIP?C.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(l,s):c==x.BUFFER_STOP&&C.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(l,s)),y(c)&&S.getPlaybackSession().setFirstEventSent(!0);var f=0;isNaN(S.getStateMachine().getLastStateChangeTimestamp())||(f=t-S.getStateMachine().getLastStateChangeTimestamp()),S.getStateMachine().newEvent(e,t),g&&(i!=K.IDLE&&i!=K.PLAYBACK_NOT_STARTED&&i!=K.SEEKING_BEFORE_PLAYBACK&&i!=K.BUFFERING_BEFORE_PLAYBACK&&S.getPlaybackSession().getAsset().setElapsedTimestamp(w),i!=K.BUFFERING_BEFORE_PLAYBACK&&i!=K.BUFFERING_DURING_PAUSE&&i!=K.BUFFERING_DURING_PLAYBACK&&i!=K.BUFFERING_DURING_SEEKING&&i!=K.PAUSED_DURING_BUFFERING||(S.getPlaybackSession().setBufferingTimestamp(w),S.getPlaybackSession().getAsset().setBufferingTimestamp(w)),i!=K.PLAYING&&i!=K.BUFFERING_DURING_PLAYBACK||(S.getPlaybackSession().setPlaybackTimestamp(w),S.getPlaybackSession().getAsset().setPlaybackTimestamp(w)),i!=K.SEEKING_BEFORE_PLAYBACK&&i!=K.SEEKING_DURING_BUFFERING&&i!=K.SEEKING_DURING_PAUSE&&i!=K.SEEKING_DURING_PLAYBACK&&i!=K.BUFFERING_DURING_SEEKING||S.getPlaybackSession().getAsset().setSeekingTimestamp(w)),S.getLogging().log("Transition from",ce.stateToString(a),"to",ce.stateToString(i),"due to event:",x.toString(e));for(var d=0,p=G.length;d<p;d++)G[d](a,i,n,f)}else{S.getLogging().infoLog("Throttled event:",x.toString(e),"during state",ce.stateToString(a),n,F.getThrottlingDelay(),"ms");g=(o=e,r=n,function(){F.newEvent(o,t,r,!0)});D=S.getPlatformAPI().setTimeout(g,F.getThrottlingDelay())}else S.getLogging().infoLog("Ignored event:",x.toString(e),"during state",ce.stateToString(a),n)},newPseudoEvent:function(e,t,n){if(e!=x.LOAD&&e!=x.ENGAGE||S.getStateMachine().getCurrentState()==K.IDLE){e==x.ERROR&&null==n.ns_st_er&&(n.ns_st_er=Q.UNKNOWN_VALUE),e==x.TRANSFER&&null==n.ns_st_rp&&(n.ns_st_rp=Q.UNKNOWN_VALUE);var s,a,i,o,r=!0,c=!1;switch(e){case x.BIT_RATE:s="ns_st_br",a="ns_st_pbr";break;case x.PLAYBACK_RATE:s="ns_st_rt",a="ns_st_prt";break;case x.VOLUME:s="ns_st_vo",a="ns_st_pvo";break;case x.WINDOW_STATE:s="ns_st_ws",a="ns_st_pws";break;case x.AUDIO:s="ns_st_at",a="ns_st_pat";break;case x.VIDEO:s="ns_st_vt",a="ns_st_pvt";break;case x.SUBS:s="ns_st_tt",a="ns_st_ptt";break;case x.CDN:s="ns_st_cdn",a="ns_st_pcdn";break;default:r=!1}if(r&&s in n)switch(o=n[s],e){case x.BIT_RATE:case x.VOLUME:case x.WINDOW_STATE:s in g&&(i=g[s],c=o==(n[a]=i)+""),g[s]=n[s];break;case x.AUDIO:case x.VIDEO:case x.SUBS:case x.CDN:S.getPlaybackSession().getAsset().hasInternalLabel(s)&&(i=S.getPlaybackSession().getAsset().getInternalLabel(s),c=o==(n[a]=i)+""),S.getPlaybackSession().getAsset().setInternalLabel(s,n[s]);break;case x.PLAYBACK_RATE:i=S.getPlaybackSession().getAsset().getPlaybackRate(),n[a]=i+""}if(r&&S.getStateMachine().getCurrentState()!=K.PLAYING&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PLAYBACK||r&&c)return e==x.PLAYBACK_RATE&&S.getPlaybackSession().getAsset().setPlaybackRate(parseInt(n.ns_st_rt)),void S.getLogging().infoLog("No measurement send for the pseudo-event:",x.toString(e),"during state",ce.stateToString(S.getStateMachine().getCurrentState()),n);var l=isNaN(w)?N:w,u=!1;((w=t)<l||M)&&(M=!(u=!0),t<l?(S.getPlaybackSession().addInternalErrorFlag("1"),S.getLogging().infoLog("System clock jump detected","to the far past")):O?(S.getPlaybackSession().addInternalErrorFlag("3"),S.getLogging().infoLog("System clock jump detected","to the future")):(S.getPlaybackSession().addInternalErrorFlag("2"),S.getLogging().infoLog("System clock jump detected","to the near past")),t=l),n.ns_st_po||(S.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?n.ns_st_po=S.getPlaybackSession().getAsset().getExpectedPlaybackPosition(t)+"":n.ns_st_po=B+""),B=parseInt(n.ns_st_po),S.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(n.ns_st_po)),S.getStateMachine().getCurrentState()!=K.IDLE&&S.getStateMachine().getCurrentState()!=K.PLAYBACK_NOT_STARTED&&S.getStateMachine().getCurrentState()!=K.SEEKING_BEFORE_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_BEFORE_PLAYBACK&&(S.getPlaybackSession().getAsset().addElapsedTime(t),S.getPlaybackSession().getAsset().setElapsedTimestamp(t)),S.getStateMachine().getCurrentState()!=K.PLAYING&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PLAYBACK||(S.getPlaybackSession().addPlaybackTime(t),S.getPlaybackSession().setPlaybackTimestamp(t),S.getPlaybackSession().getAsset().addPlaybackTime(t),S.getPlaybackSession().getAsset().setPlaybackTimestamp(t),S.getPlaybackSession().getAsset().addInterval(parseInt(n.ns_st_po)),S.getPlaybackSession().getAsset().setPlaybackStartPosition(parseInt(n.ns_st_po))),S.getStateMachine().getCurrentState()!=K.BUFFERING_BEFORE_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PAUSE&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_SEEKING||(S.getPlaybackSession().addBufferingTime(t),S.getPlaybackSession().setBufferingTimestamp(t),S.getPlaybackSession().getAsset().addBufferingTime(t),S.getPlaybackSession().getAsset().setBufferingTimestamp(t));t=F.createLabels(e,n,t);S.getPlaybackSession().getAsset().updateDeltaLabels(t.eventLabels),S.getPlaybackSession().getAsset().updateIndependentLabels(t.eventLabels),S.getEventManager().newEvent(t),e==x.PLAYBACK_RATE&&S.getPlaybackSession().getAsset().setPlaybackRate(parseInt(n.ns_st_rt)),u&&(S.getStateMachine().getCurrentState()!=K.PLAYING&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PLAYBACK||(S.getPlaybackSession().setPlaybackTimestamp(w),S.getPlaybackSession().getAsset().setPlaybackTimestamp(w)),S.getStateMachine().getCurrentState()!=K.IDLE&&S.getStateMachine().getCurrentState()!=K.PLAYBACK_NOT_STARTED&&S.getStateMachine().getCurrentState()!=K.SEEKING_BEFORE_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_BEFORE_PLAYBACK&&S.getPlaybackSession().getAsset().setElapsedTimestamp(w),S.getStateMachine().getCurrentState()!=K.BUFFERING_BEFORE_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PAUSE&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_SEEKING&&S.getStateMachine().getCurrentState()!=K.PAUSED_DURING_BUFFERING||(S.getPlaybackSession().setBufferingTimestamp(w),S.getPlaybackSession().getAsset().setBufferingTimestamp(w)),S.getStateMachine().getCurrentState()!=K.SEEKING_BEFORE_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.SEEKING_DURING_BUFFERING&&S.getStateMachine().getCurrentState()!=K.SEEKING_DURING_PAUSE&&S.getStateMachine().getCurrentState()!=K.SEEKING_DURING_PLAYBACK&&S.getStateMachine().getCurrentState()!=K.BUFFERING_DURING_SEEKING||S.getPlaybackSession().getAsset().setSeekingTimestamp(w))}else S.getLogging().infoLog("Ignored pseudo-event:",x.toString(e),"during state",ce.stateToString(S.getStateMachine().getCurrentState()),n)},getState:function(){return S.getStateMachine().getCurrentState()},addListener:function(e){G.push(e)},removeListener:function(e){G.splice(ce.indexOf(e,G),1)},getLabel:function(e){return g[e]},getLabels:function(){return g},setLabel:function(e,t){null==t?delete g[e]:g[e]=t},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&F.setLabel(t,e[t])},getPlatformAPI:function(){return S.getAppCore()?S.getAppCore().getPlatformAPI():f},getExports:function(){return c},isProperlyInitialized:function(){var e=S.getAppCore().getAppContext(),t=S.getAppCore().getSalt(),n=S.getAppCore().getPixelURL();return e&&n&&t},setThrottlingDelay:function(e){u=e},getThrottlingDelay:function(){return u},isThrottlingEnabled:function(){return i},setThrottlingEnabled:function(e){i=e},isLoadingTimeSent:function(){return t},setLoadingTimeSent:function(e){t=e},getLoadTimeOffset:function(){return n},setLoadTimeOffset:function(e){n=e},getInitTimestamp:function(){return N},setPauseOnBufferingInterval:function(e){l=e},getPauseOnBufferingInterval:function(){return l},isPauseOnBufferingEnabled:function(){return s},setPauseOnBufferingEnabled:function(e){s=e},startPausedOnBufferingTimer:function(e,s){F.stopPausedOnBufferingTimer(),a=F.getPlatformAPI().setTimeout(function(){var e={},t=ce.fixEventTime(e),n=parseInt(s.ns_st_po);e.ns_st_po=n+"",F.newEvent(x.PAUSE_ON_BUFFERING,t,e)},l)},stopPausedOnBufferingTimer:function(){null!=a&&(F.getPlatformAPI().clearTimeout(a),a=null)},stopDelayedTransitionTimer:function(){D&&(F.getPlatformAPI().clearTimeout(D),D=null)},setLiveEndpointURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(0<=n){if(n<e.length-1){for(var s=e.substring(n+1).split("&"),a=0,i=s.length;a<i;a++){var o=s[a].split("=");2==o.length?F.setLabel(o[0],t(o[1])):1==o.length&&F.setLabel(J.PAGE_NAME_LABEL,t(o[0]))}e=e.substring(0,n+1)}}else e+="?";return r=e},getLiveEndpointURL:function(){return r||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?r=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?r=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},getStaSM:function(){return S},resetPlaybackSession:function(e){var t=S.getPlaybackSession();S.setPlaybackSession(new p(S)),p.resetPlaybackSession(S,t,e)},resetHeartbeat:function(){S.getHeartbeat().pause();var e=S.getHeartbeat().getIntervals();S.setHeartbeat(new Y(S)),S.getHeartbeat().setIntervals(e)}}),U=ce.isBrowser()?(R=window,document):(R={},{location:{href:""},title:"",URL:"",referrer:"",cookie:""}),ce.extend(F,{prepareUrl:function(e,t){for(var n=R.encodeURIComponent||escape,s=[],a=J.LABELS_ORDER,i=e.split("?"),o=i[0],r=i[1].split("&"),c=0,l=r.length;c<l;c++){var u=r[c].split("="),g=unescape(u[0]),u=unescape(u[1]);g&&(t[g]=u)}for(var f,d={},p=0,y=a.length;p<y;p++){var S,m=a[p];!t.hasOwnProperty(m)||void 0!==(S=t[m])&&null!=S&&(d[m]=!0,s.push(n(m)+"="+n(t[m])))}for(f in t)if(t.hasOwnProperty(f)){if(d[f])continue;var b=t[f];void 0!==b&&null!=b&&s.push(n(f)+"="+n(t[f]))}return e=(e=o+"?"+s.join("&"))+(e.indexOf("&c8=")<0?"&c8="+n(U.title):"")+(e.indexOf("&c7=")<0?"&c7="+n(U.URL):"")+(e.indexOf("&c9=")<0?"&c9="+n(U.referrer):""),i=ce.browserAcceptsLargeURLs()?J.URL_LENGTH_LIMIT:J.RESTRICTED_URL_LENGTH_LIMIT,e.length>i&&0<e.indexOf("&")&&(o=e.substr(0,i-8).lastIndexOf("&"),e=(e.substring(0,o)+"&ns_cut="+n(e.substring(o+1))).substr(0,i)),e}}),S=new re(F),ce.getNamespace().comScore?(c=ce.getNamespace().comScore.exports,S.setAppCore(c.c())):S.setAppCore(null),e.publisherId&&(F.setLabel("c2",e.publisherId),!(o=e.secure)&&S.getAppCore()?o=S.getAppCore().isSecure():!o&&ce.isBrowser()&&(o=ce.isWebSecure()),F.setLiveEndpointURL((o?"https://sb":"http://b")+".scorecardresearch.com/p?c1=2")),e.liveEndpointURL&&F.setLiveEndpointURL(e.liveEndpointURL),S.setKeepAlive(new V(S)),S.setHeartbeat(new Y(S)),S.setEventManager(new X(S)),S.setStateMachine(new j),S.setLogging(new le(J.LOG_NAMESPACE,e.debug)),S.setPlaybackSession(new p(S)),m=new Z(S),b=new ee(S),_=new ne(S),P=new se(S),A=new q(S),h=new $(S),k=new z(S),v=new W(S),E=new te(S),T=new ae(S),L=new ie(S),I=new oe(S),C=new H(S),t=!1,n=0,N=+new Date,i=!(s=!0),G=[],e.systemClockJumpDetection&&F.enableSystemClockJumpsDetection(parseInt(e.systemClockJumpDetectionInterval))},re=function(e){var t,n,s,a,i,o,r;ce.extend(this,{getAppCore:function(){return t},getStaCore:function(){return e},getEventManager:function(){return n},getStateMachine:function(){return s},getHeartbeat:function(){return a},getKeepAlive:function(){return i},getPlaybackSession:function(){return o},getLogging:function(){return r},setAppCore:function(e){t=e},setKeepAlive:function(e){i=e},setHeartbeat:function(e){a=e},setEventManager:function(e){n=e},setStateMachine:function(e){s=e},setPlaybackSession:function(e){o=e},setLogging:function(e){r=e}})},a=function(e){function s(e,t,n){var s;s="object"==typeof t?t:"object"==typeof n?n:{},t="number"==typeof t?t:"number"==typeof n?n:NaN,x.toString(e)&&(s=ce.jsonObjectToStringDictionary(s),n=ce.fixEventTime(s),s.ns_st_po||isNaN(t)||(s.ns_st_po=ce.parseInteger(t,0)+""),e==x.PLAY||e==x.PAUSE||e==x.BUFFER||e==x.END||e==x.SEEK_START||e==x.AD_SKIP||e==x.BUFFER_STOP?a.newEvent(e,n,s):a.newPseudoEvent(e,n,s))}function t(){i&&a.getStaSM().getStateMachine().getCurrentState()!=K.IDLE&&n.notifyEnd()}var a,n=this,i=!0;ce.extend(this,{isProperlyInitialized:function(){return a.isProperlyInitialized()},reset:function(e){s(x.END);var t=a;t.getStaSM().getKeepAlive().stop(),t.getStaSM().getHeartbeat().pause(),a=new o(t.getConfiguration()),p.resetPlaybackSession(a.getStaSM(),t.getStaSM().getPlaybackSession(),e)},setPauseOnBufferingInterval:function(e){a.setPauseOnBufferingInterval(e)},getPauseOnBufferingInterval:function(){return a.getPauseOnBufferingInterval()},setKeepAliveInterval:function(e){a.getStaSM().getKeepAlive().setInterval(e)},getKeepAliveInterval:function(){return a.getStaSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(e){a.getStaSM().getHeartbeat().setIntervals(e)},notifyPlay:function(e,t){a.getStaSM().getLogging().apiCall("notifyPlay",e,t),s(x.PLAY,e,t)},notifyPause:function(e,t){a.getStaSM().getLogging().apiCall("notifyPause",e,t),s(x.PAUSE,e,t)},notifyEnd:function(e,t){a.getStaSM().getLogging().apiCall("notifyEnd",e,t),s(x.END,e,t)},notifyBufferStart:function(e,t){a.getStaSM().getLogging().apiCall("notifyBufferStart",e,t),s(x.BUFFER,e,t)},notifyBufferStop:function(e,t){a.getStaSM().getLogging().apiCall("notifyBufferStop",e,t),s(x.BUFFER_STOP,e,t)},notifyLoad:function(e,t){a.getStaSM().getLogging().apiCall("notifyLoad",e,t),s(x.LOAD,e,t)},notifyEngage:function(e,t){a.getStaSM().getLogging().apiCall("notifyEngage",e,t),s(x.ENGAGE,e,t)},notifySeekStart:function(e,t){a.getStaSM().getLogging().apiCall("notifySeekStart",e,t),s(x.SEEK_START,e,t)},notifySkipAd:function(e,t){a.getStaSM().getLogging().apiCall("notifySkipAd",e,t),s(x.AD_SKIP,e,t)},notifyCallToAction:function(e,t){a.getStaSM().getLogging().apiCall("notifyCallToAction",e,t),s(x.CTA,e,t)},notifyError:function(e,t){a.getStaSM().getLogging().apiCall("notifyError",e,t),s(x.ERROR,e,t)},notifyTransferPlayback:function(e,t){a.getStaSM().getLogging().apiCall("notifyTransferPlayback",e,t),s(x.TRANSFER,e,t)},notifyDrmFail:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmFail",e,t),s(x.DRM_FAILED,e,t)},notifyDrmApprove:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmApprove",e,t),s(x.DRM_APPROVED,e,t)},notifyDrmDeny:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmDeny",e,t),s(x.DRM_DENIED,e,t)},notifyChangeBitrate:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeBitrate",e,t,n),null!=e&&((n=n||{}).ns_st_br=e+"",s(x.BIT_RATE,n,t))},notifyChangePlaybackRate:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangePlaybackRate",e,t,n),null!=e&&((n=n||{}).ns_st_rt=e+"",s(x.PLAYBACK_RATE,n,t))},notifyChangeVolume:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeVolume",e,t,n),null!=e&&((n=n||{}).ns_st_vo=e+"",s(x.VOLUME,n,t))},notifyChangeWindowState:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeWindowState",e,t,n),null!=e&&((n=n||{}).ns_st_ws=e+"",s(x.WINDOW_STATE,n,t))},notifyChangeAudioTrack:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeAudioTrack",e,t,n),null!=e&&((n=n||{}).ns_st_at=e+"",s(x.AUDIO,n,t))},notifyChangeVideoTrack:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeVideoTrack",e,t,n),null!=e&&((n=n||{}).ns_st_vt=e+"",s(x.VIDEO,n,t))},notifyChangeSubtitleTrack:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeSubtitleTrack",e,t,n),null!=e&&((n=n||{}).ns_st_tt=e+"",s(x.SUBS,n,t))},notifyChangeCdn:function(e,t,n){a.getStaSM().getLogging().apiCall("notifyChangeCdn",e,t,n),null!=e&&((n=n||{}).ns_st_cdn=e+"",s(x.CDN,n,t))},notifyCustomEvent:function(e,t){a.getStaSM().getLogging().apiCall("notifyCustomEvent",e,t),s(x.CUSTOM,e,t)},getLabels:function(){return a.getLabels()},getState:function(){return a.getStaSM().getStateMachine().getCurrentState()},setLabels:function(e){a.setLabels(e)},getLabel:function(e){return a.getLabel(e)},setLabel:function(e,t){a.setLabel(e,t)},getLoadTimeOffset:function(){return a.getLoadTimeOffset()},setLoadTimeOffset:function(e){a.setLoadTimeOffset(e)},setLiveEndpointURL:function(e){return a.setLiveEndpointURL(e)},getLiveEndpointURL:function(){return a.getLiveEndpointURL()},isPauseOnBufferingEnabled:function(){return a.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(e){a.setPauseOnBufferingEnabled(e)},isThrottlingEnabled:function(){return a.isThrottlingEnabled()},setThrottlingEnabled:function(e){a.setThrottlingEnabled(e)},setThrottlingDelay:function(e){a.setThrottlingDelay(e)},getThrottlingDelay:function(){return a.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(e){a.getStaSM().getPlaybackSession().getAsset().setPlaybackIntervalMergeTolerance(e)},getPlaybackIntervalMergeTolerance:function(){return a.getStaSM().getPlaybackSession().getAsset().getPlaybackIntervalMergeTolerance()},createPlaybackSession:function(e){a.getStaSM().getLogging().apiCall("createPlaybackSession",e),e=ce.jsonObjectToStringDictionary(e);var t=a.getStaSM().getStateMachine().getCurrentState();t!=K.IDLE&&(a.getStaSM().getLogging().infoLog("Ending the current Clip. It was in state:",ce.stateToString(t)),n.notifyEnd()),a.getStaSM().getPlaybackSession().isPlaybackSessionStarted()&&a.resetPlaybackSession(),a.getStaSM().getPlaybackSession().setLabels(e)},getVersion:function(){return J.STREAMINGANALYTICS_VERSION},addListener:function(e){a.addListener(e)},removeListener:function(e){a.removeListener(e)},addMeasurementListener:function(e){a.getStaSM().getEventManager().addMeasurementListener(e)},removeMeasurementListener:function(e){a.getStaSM().getEventManager().removeMeasurementListener(e)},getPlaybackSession:function(){return a.getStaSM().getPlaybackSession()},setExitEndEventEnabled:function(e){i=e},isExitEndEventEnabled:function(){return i},getPlatformAPI:function(){return a.getPlatformAPI()},_getLogHistory:function(){return a.getStaSM().getLogging().getLogHistory()}}),ce.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",t),window.addEventListener("unload",t)):window.attachEvent&&(window.attachEvent("onbeforeunload",t),window.attachEvent("onunload",t))),e=ce.extend({},e),(a=new o(e)).getStaSM().getLogging().log("New StreamingAnalytics instance with configuration",e)};function e(r){var s,n,t,a,i,o,c,l,u,g,f,d,p,y,S,m,b=this;ce.extend(this,{resetAsset:function(){var e=s;s=new _,_.resetAsset(e,s)},hashExists:function(e){return null!=l[e]},storeHash:function(e){l[e]={}},removeHash:function(e){delete l[e]},storeAssetPlaybackCounters:function(){for(var e in l)if(l.hasOwnProperty(e)&&l[e].clipNumber===s.getClipNumber()){ce.extend(l[e],{segmentPlaybackCounter:s.getSegmentPlaybackCounter(),assetLoadCounter:s.getAssetLoadCounter(),assetPlaybackCounter:s.getAssetPlaybackCounter(),lowestPartNumberPlayed:s.getLowestPartNumberPlayed(),seeking:s.isSeeking(),seekingTimeBeforeEnd:s.getSeekingTimeBeforeEnd(),seekingStartPosition:s.getSeekStartPosition(),segmentPlaybackIntervals:s.getSegmentPlaybackIntervals(),videoTrack:s.getVideoTrack(),audioTrack:s.getAudioTrack(),subtitleTrack:s.getSubtitleTrack(),cdn:s.getCDN(),playSequenceCounter:s.getPlaySequenceCounter(),previousUniquePlaybackInterval:s.getPreviousUniquePlaybackInterval(),previousEventIndependentUniquePlaybackInterval:s.getPreviousEventIndependentUniquePlaybackInterval(),previousLongestPlaybackInterval:s.getPreviousLongestPlaybackInterval()});break}},getStoredAssetRegisters:function(e){return l[e]},getClipNumber:function(e){return l[e].clipNumber},getMaxClipNumber:function(){return u},storeClipNumber:function(e,t){l[e].clipNumber=t,u<t&&(u=t)},setLabels:function(e){null!=e&&ce.extend(o,e)},getLabels:function(){return o},setLabel:function(e,t){var n={};n[e]=t,b.setLabels(n)},getLabel:function(e){return o[e]},getAsset:function(){return s},addInternalErrorFlag:function(e){for(var t=0;t<m.length;++t)if(m[t]==e)return;m.push(e)},createLabels:function(e,t){var n=e||{},e=ce.isEmpty(n.ns_st_pa)?b.getPlaybackTime():parseInt(n.ns_st_pa);return n.ns_st_pa=e+(isNaN(a)?0:t-a)+"",n.ns_st_pp=p+"",n.ns_st_sp=y+"",n.ns_st_bp=S+"",g||(n.ns_st_pb=null!=n.ns_st_pb?n.ns_st_pb:"1"),s.isPlaybackStarted()&&(n.ns_st_ppc=f+"",n.ns_st_psq=d+""),0<m.length&&(n.ns_st_ie=(n.ns_st_ie?n.ns_st_ie+";":"")+m.join(";")),ce.extend(n,i,o),r.getPlaybackSession().getAsset().createLabels(n,t),n},incrementPlayCounter:function(){y++},incrementPauses:function(){p++},addPlaybackTime:function(e){var t;isNaN(a)||(t=b.getPlaybackTime(),t+=e-a,b.setPlaybackTime(t),a=NaN)},addBufferingTime:function(e){var t;isNaN(n)||(t=b.getBufferingTime(),t+=e-n,b.setBufferingTime(t),n=NaN)},getBufferingTime:function(){return S},setBufferingTime:function(e){S=e},getPlaybackTime:function(){return t},setBufferingTimestamp:function(e){n=e},getBufferingTimestamp:function(){return n},setPlaybackTime:function(e){t=e},setPlaybackTimestamp:function(e){a=e},getPlaybackTimestamp:function(){return a},getPauses:function(){return p},setPauses:function(e){p=e},isPlaybackSessionStarted:function(){return c},setPlaybackSessionStarted:function(e){c=e},getPlaybackCounter:function(){return f},incrementPlaybackCounter:function(){f++},setFirstEventSent:function(e){g=e},setPlaySequenceCounter:function(e){d=e},incrementPlaySequenceCounter:function(){d++},getPlaybackSessionID:function(){return i.ns_st_id},setAsset:function(e,t){r.getLogging().apiCall("setAsset",e,t),e=ce.jsonObjectToStringDictionary(e);var n=r.getStateMachine().getCurrentState();n!=K.IDLE&&(r.getLogging().infoLog("Ending the current Clip. It was in state:",ce.stateToString(n)),o={},r.getStaCore().newEvent(x.END,ce.fixEventTime(o),o));var s="",a=0;if(null!=e.ns_st_cn)s=e.ns_st_cn;else for(var i=0;i<J.STANDARD_METADATA_LABELS.length;i++)e[J.STANDARD_METADATA_LABELS[i]]&&(s+=J.STANDARD_METADATA_LABELS[i]+":"+e[J.STANDARD_METADATA_LABELS[i]]+";");var n=b,o=n.getAsset(),a=o.isAssetStarted()?(n.hashExists(o.getHash())||(n.storeHash(o.getHash()),n.storeClipNumber(o.getHash(),o.getClipNumber())),n.storeAssetPlaybackCounters(),n.hashExists(s)?n.getClipNumber(s):ce.exists(e.ns_st_cn)?parseInt(e.ns_st_cn):n.getMaxClipNumber()+1):n.hashExists(s)?n.getClipNumber(s):o.getClipNumber();n.resetAsset(),(o=n.getAsset()).setHash(s),o.setClipNumber(a),o.setLabels(e);a=n.getStoredAssetRegisters(s);a&&(o.setAssetStarted(!0),o.setSegmentPlaybackCounter(a.segmentPlaybackCounter),o.setAssetLoadCounter(a.assetLoadCounter),o.setAssetPlaybackCounter(a.assetPlaybackCounter),o.setLowestPartNumberPlayed(a.lowestPartNumberPlayed),o.setSeeking(a.seeking),o.setSeekingTimeBeforeEnd(a.seekingTimeBeforeEnd),o.setSeekStartPosition(a.seekingStartPosition),o.setAssetPlaybackIntervals(a.segmentPlaybackIntervals),a.videoTrack&&o.setVideoTrack(a.videoTrack),a.audioTrack&&o.setAudioTrack(a.audioTrack),a.subtitleTrack&&o.setSubtitleTrack(a.subtitleTrack),a.cdn&&o.setCDN(a.cdn),o.setPlaySequenceCounter(a.playSequenceCounter),o.setPreviousUniquePlaybackInterval(a.previousUniquePlaybackInterval),o.setPreviousEventIndependentUniquePlaybackInterval(a.previousEventIndependentUniquePlaybackInterval),o.setPreviousLongestPlaybackInterval(a.previousLongestPlaybackInterval)),o.incrementAssetLoadCounter(),o.isAssetStarted()&&t&&n.incrementPlayCounter(),t&&(n.setPlaySequenceCounter(0),o.setPlaybackSessionLooping(!0)),!ce.exists(e.ns_st_tp)&&ce.exists(e.ns_st_ad)&&ce.isNotEmpty(e.ns_st_ad)&&"0"!==e.ns_st_ad&&o.setInternalLabel("ns_st_tp","1")}}),s=new _,(i={}).ns_st_id=+new Date+"",o={},a=n=NaN,g=c=!(l={}),y=1,S=d=p=f=u=t=0,m=[]}function i(){var t,n,g,f,d,s,a,p,y,S,i,o,m,b,r,c,l,_,P,A,h,k,v,E,u,T,L,e,I,C,N,w,D,G,B,O,R,U,F,M,x,K,X,Y,V,j,H,q,W,$=this,z=J.INTERVAL_MERGE_TOLERANCE;ce.extend(this,{getHash:function(){return t},setHash:function(e){t=e},setPlaybackIntervalMergeTolerance:function(e){z=e},getPlaybackIntervalMergeTolerance:function(){return z},setInternalLabel:function(e,t){f[e]=t},getInternalLabel:function(e){return f[e]},hasInternalLabel:function(e){return null!=f[e]},setLabels:function(e){e&&ce.extend(d,e)},getLabels:function(){return d},setLabel:function(e,t){d[e]=t},getLabel:function(e){return d[e]},hasLabel:function(e){return e in d},getClipNumber:function(){return parseInt($.getInternalLabel("ns_st_cn"))},setClipNumber:function(e){$.setInternalLabel("ns_st_cn",e+"")},getPartNumber:function(){return $.hasLabel("ns_st_pn")?parseInt($.getLabel("ns_st_pn")):parseInt($.getInternalLabel("ns_st_pn"))},createLabels:function(e,t){var n=e||{},e=ce.isEmpty(n.ns_st_pt)?$.getPlaybackTime():parseInt(n.ns_st_pt);n.ns_st_pt=e+(isNaN(p)?0:t-p)+"",n.ns_st_dpt=e+(isNaN(p)?0:t-p)-y+"",n.ns_st_ipt=e+(isNaN(p)?0:t-p)-S+"";e=ce.isEmpty(n.ns_st_et)?$.getElapsedTime():parseInt(n.ns_st_et);n.ns_st_et=e+(isNaN(m)?0:t-m)+"",n.ns_st_det=e+(isNaN(m)?0:t-m)-b+"";e=ce.isEmpty(n.ns_st_bt)?$.getBufferingTime():parseInt(n.ns_st_bt);n.ns_st_bt=e+"",n.ns_st_dbt=e+(isNaN(T)?0:t-T)-L+"";for(var s,t=parseInt(n.ns_st_po),a=ce.addNewPlaybackInterval(ce.cloneObject($.getSegmentPlaybackIntervals()),W<0?t:_,W<0?_:t,z),i=ce.addNewPlaybackInterval(ce.cloneObject($.getAssetPlaybackIntervals()),W<0?t:_,W<0?_:t,z),o=0,r=0,c=0;c<a.length;c++)o+=s=Math.abs(a[c].end-a[c].start),r<s&&(r=s);for(var l=0,u=0,c=0;c<i.length;c++)l+=s=Math.abs(i[c].end-i[c].start),u<s&&(u=s);n.ns_st_upc=o+"",n.ns_st_dupc=o-P+"",n.ns_st_iupc=o-A+"",n.ns_st_iupc=A<o?o-A+"":"0",n.ns_st_lpc=r+"",n.ns_st_dlpc=r-h+"",n.ns_st_upa=l+"",n.ns_st_dupa=l-k+"",n.ns_st_iupa=v<l?l-v+"":"0",n.ns_st_lpa=u+"",n.ns_st_dlpa=u-E+"";t=ce.isEmpty(n.ns_st_pc)?$.getPauses():parseInt(n.ns_st_pc);n.ns_st_pc=t+"",n.ns_st_dpc=t-M+"";t=ce.isEmpty(n.ns_st_skc)?$.getSeeks():parseInt(n.ns_st_skc);n.ns_st_skc=t+"",n.ns_st_dskc=t-K+"";t=ce.isEmpty(n.ns_st_bc)?$.getBuffers():parseInt(n.ns_st_bc);n.ns_st_bc=t+"",n.ns_st_dbc=t-I+"";t=ce.isEmpty(n.ns_st_skt)?$.getSeekingTime():parseInt(n.ns_st_skt);n.ns_st_skt=t+"",n.ns_st_dskt=t-D+"";t=ce.isEmpty(n.ns_st_ska)?$.getSeekingAmount():parseInt(n.ns_st_ska);return n.ns_st_ska=t+"",n.ns_st_dska=t-R+"",g&&(n.ns_st_spc=X+"",n.ns_st_apc=Y+"",n.ns_st_sq=V+"",n.ns_st_asq=j+""),n.ns_st_sc=g||0!=H?H+"":"1",n.ns_st_rt=W+"",ce.extend(n,f,d),n},updateDeltaLabels:function(e){y=parseInt(e.ns_st_pt),b=parseInt(e.ns_st_et),L=parseInt(e.ns_st_bt),P=parseInt(e.ns_st_upc),h=parseInt(e.ns_st_lpc),k=parseInt(e.ns_st_upa),E=parseInt(e.ns_st_lpa),M=parseInt(e.ns_st_pc),K=parseInt(e.ns_st_skc),I=parseInt(e.ns_st_bc),D=parseInt(e.ns_st_skt),R=parseInt(e.ns_st_ska),$.setSeekingDirection(0)},updateIndependentLabels:function(e){S=parseInt(e.ns_st_pt),A=parseInt(e.ns_st_upc),v=parseInt(e.ns_st_upa)},getVideoTrack:function(){return $.getInternalLabel("ns_st_vt")},setVideoTrack:function(e){$.setInternalLabel("ns_st_vt",e+"")},getAudioTrack:function(){return $.getInternalLabel("ns_st_at")},setAudioTrack:function(e){$.setInternalLabel("ns_st_at",e+"")},getSubtitleTrack:function(){return $.getInternalLabel("ns_st_tt")},setSubtitleTrack:function(e){$.setInternalLabel("ns_st_tt",e+"")},getCDN:function(){return $.getInternalLabel("ns_st_cdn")},setCDN:function(e){$.setInternalLabel("ns_st_cdn",e+"")},getSegmentPlaybackIntervals:function(){return c},setAssetPlaybackIntervals:function(e){c=e},getAssetPlaybackIntervals:function(){return l},incrementPauses:function(){F++},incrementSeeks:function(){x++},incrementPlayCounter:function(){V++},getPlayCounter:function(){return V},getBufferingTime:function(){return u},setBufferingTime:function(e){u=e},addBufferingTime:function(e){var t;isNaN(T)||(t=$.getBufferingTime(),t+=e-T,$.setBufferingTime(t),T=NaN)},setPlaybackStartPosition:function(e){_=parseInt(e)},getPlaybackStartPosition:function(){return _},addInterval:function(e){isNaN(_)||isNaN(e)||(c=ce.addNewPlaybackInterval(c,W<0?e:_,W<0?_:e,z),l=ce.addNewPlaybackInterval(l,W<0?e:_,W<0?_:e,z),_=NaN)},getElapsedTime:function(){return o},setElapsedTime:function(e){o=e},addElapsedTime:function(e){var t;isNaN(m)||(t=$.getElapsedTime(),t+=e-m,$.setElapsedTime(t),m=NaN)},getElapsedTimestamp:function(){return m},setElapsedTimestamp:function(e){m=e},addPlaybackTime:function(e){var t;isNaN(p)||(t=$.getPlaybackTime(),t+=e-p,$.setPlaybackTime(t),p=NaN)},getPlaybackTime:function(){return a},getExpectedPlaybackPosition:function(e){return isNaN(p)?i:i+Math.floor((e-p)*W/100)},setPlaybackTimeOffset:function(e){i=e},getPlaybackTimeOffset:function(){return i},setPlaybackTime:function(e){a=e},getPlaybackTimestamp:function(){return p},setPlaybackTimestamp:function(e){p=e},setPreviousPlaybackTime:function(e){y=e},setPreviousPlaybackTimestamp:function(e){0},getBufferingTimestamp:function(){return T},setBufferingTimestamp:function(e){T=e},getPauses:function(){return F},setPauses:function(e){F=e},getSeeks:function(){return x},setSeeks:function(e){x=e},setSeeking:function(e){C=e},isSeeking:function(){return C},setCollectingSeekingTime:function(e){B=e},isCollectingSeekingTime:function(){return B},setAssetStarted:function(e){n=e},isAssetStarted:function(){return n},setPlaybackStarted:function(e){g=e},isPlaybackStarted:function(){return g},setSeekingTimestamp:function(e){N=e},getSeekingTimestamp:function(){return N},addSeekingTime:function(e){var t;isNaN(N)||(t=$.getSeekingTime(),t+=e-N,$.setSeekingTime(t),N=NaN)},getSeekingTime:function(){return w},setSeekingTime:function(e){w=e},setSeekingTimeBeforeEnd:function(e){U=e},getSeekingTimeBeforeEnd:function(){return U},setSeekStartPosition:function(e){G=e},getSeekStartPosition:function(){return G},setSeekingAmount:function(e){O=e},getSeekingAmount:function(){return O},addSeekingAmount:function(e){var t,n=$.getSeekingAmount();n+=Math.abs(e-G),$.setSeekingAmount(n),G==e?t=0:e<G?t=-1:G<e&&(t=1),$.setSeekingDirection(t),G=0},getSeekingDirection:function(){return parseInt($.getInternalLabel("ns_st_skd"))},setSeekingDirection:function(e){$.setInternalLabel("ns_st_skd",e+"")},resetAssetLifecycleLabels:function(){l=[],K=x=R=O=D=w=b=o=E=v=k=V=M=F=I=e=L=u=S=y=a=0},incrementSegmentPlaybackCounter:function(){X++},incrementAssetLoadCounter:function(){H++},incrementAssetPlaybackCounter:function(){Y++},getPreviousUniquePlaybackInterval:function(){return P},setPreviousUniquePlaybackInterval:function(e){P=e},getPreviousEventIndependentUniquePlaybackInterval:function(){return A},setPreviousEventIndependentUniquePlaybackInterval:function(e){A=e},setPreviousLongestPlaybackInterval:function(e){h=e},getPreviousLongestPlaybackInterval:function(){return h},resetAssetPlaybackIntervals:function(){l=[],E=v=k=0},setSegmentPlaybackCounter:function(e){X=e},setAssetLoadCounter:function(e){H=e},setAssetPlaybackCounter:function(e){Y=e},setLowestPartNumberPlayed:function(e){r=e},getSegmentPlaybackCounter:function(){return X},getAssetLoadCounter:function(){return H},getAssetPlaybackCounter:function(){return Y},getLowestPartNumberPlayed:function(){return r},getBuffers:function(){return e},incrementBufferCount:function(){e++},getPreviousBufferingTime:function(){return L},setPlaySequenceCounter:function(e){j=e},incrementPlaySequenceCounter:function(){j++},getPlaySequenceCounter:function(){return j},isPlaybackSessionLooping:function(){return q},setPlaybackSessionLooping:function(e){q=e},enableAutoCalculatePositions:function(e){s=!!e},isAutoCalculatePositionsEnabled:function(){return s},getPlaybackRate:function(){return W},setPlaybackRate:function(e){W=e}}),f={ns_st_cl:"0",ns_st_pn:"1",ns_st_tp:"0",ns_st_cn:"1",ns_st_skd:"0",ns_st_ci:"0",c3:"*null",c4:"*null",c6:"*null",ns_st_st:"*null",ns_st_pu:"*null",ns_st_pr:"*null",ns_st_ep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ct:"*null"},n=g=!(d={}),t=Q.UNKNOWN_VALUE,s=!0,c=[],N=T=_=m=p=NaN,H=j=V=Y=X=K=x=M=F=R=O=D=w=U=G=I=e=L=u=E=v=k=h=A=P=S=b=r=o=y=i=a=0,q=B=C=!(l=[]),W=J.DEFAULT_ASSET_PLAYBACK_RATE}return a.PlayerEvents=x,a.InternalStates=K,a.ImplementationType=d,a.Constants=J,a}(),e.ReducedRequirementsStreamingAnalytics=e.ReducedRequirementsStreamingAnalytics||(g={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},f={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},d=e.StreamingAnalytics,p=e.StreamingAnalytics.InternalStates||null,y=e.StreamingAnalytics.ImplementationType||null,S=null!=e.StreamingAnalytics.InternalStates&&null!=e.StreamingAnalytics.ImplementationType,m=e.StreamingAnalytics.Constants,s.ContentType=g,s.AdType=f,s),e;function s(e){function n(e){for(var t in m.STANDARD_METADATA_LABELS)if(m.STANDARD_METADATA_LABELS.hasOwnProperty(t)&&(n=m.STANDARD_METADATA_LABELS[t],s=i,t=e,!(ce.exists(n)&&ce.exists(s)&&ce.exists(t)&&(s.hasOwnProperty(n)&&t.hasOwnProperty(n)&&s[n]===t[n]||!s.hasOwnProperty(n)&&!t.hasOwnProperty(n)))))return;var n,s;return 1}function s(e){e=e||{};e.ns_st_ad="1",e.ns_st_an=++t+"",r.getPlaybackSession().setAsset(e),r.notifyPlay(),o=!1}function a(e,t){l==c.None&&(l=t),o&&l==t&&n(e)?(r.getPlaybackSession().getAsset().setLabels(e),r.getState()!=p.PLAYING&&r.notifyPlay()):(e=e,r.getPlaybackSession().setAsset(e),i=e,r.notifyPlay()),o=!0,l=t}var i=null,t=0,o=!1,r=null,c={None:0,AudioContent:1,VideoContent:2},l=c.None,u=new le("TTSTA",(e||{}).debug);ce.extend(this,{playVideoAdvertisement:function(e,t){var n;r&&(u.apiCall("playVideoAdvertisement",e,t),n={ns_st_ct:"va"},t?n.ns_st_ct="va"+t:u.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),t!=f.LinearLive&&t!=f.BrandedOnDemandLive||(n.ns_st_li="1"),e&&ce.extend(n,e),s(n))},playAudioAdvertisement:function(e,t){var n;r&&(u.apiCall("playAudioAdvertisement",e,t),n={ns_st_ct:"aa"},t?n.ns_st_ct="aa"+t:u.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),t!=f.LinearLive&&t!=f.BrandedOnDemandLive||(n.ns_st_li="1"),e&&ce.extend(n,e),s(n))},playVideoContentPart:function(e,t){var n;r&&(u.apiCall("playVideoContentPart",e,t),n={ns_st_ct:"vc"},t?n.ns_st_ct="vc"+t:u.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),t!=g.Live&&t!=g.UserGeneratedLive||(n.ns_st_li="1"),e&&ce.extend(n,e),a(n,c.VideoContent))},playAudioContentPart:function(e,t){var n;r&&(u.apiCall("playAudioContentPart",e,t),n={ns_st_ct:"ac"},t?n.ns_st_ct="ac"+t:u.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),t!=g.Live&&t!=g.UserGeneratedLive||(n.ns_st_li="1"),e&&ce.extend(n,e),a(n,c.AudioContent))},stop:function(){r&&(u.apiCall("stop"),r.notifyPause())}}),S&&(ce.exists(e)&&(e.customerC2||e.publisherId)||ce.getNamespace().comScore?r=new d(e):u.error("Cannot instantiate StreamingAnalytics","The property publisherId was not provided (or incorrectly provided) in the StreamingAnalytics configuration."),r&&r.setLabel("ns_st_it",y.toString(y.REDUCED)))}}),function(e){"use strict";var t={$:e.ender.noConflict(!0),setTaggerReady:function(){this.taggerReady=!0,this.EventProxy.tagsLoaded()}};e.TAGX=t}(window),TAGX.Utils=function(){"use strict";var e,i=window.head,u={txpcn:"tagx-p"};return u.Ops=((e={}).and=function(){var s=Array.prototype.slice.call(arguments),a=0,n=this;return function(e){for(var t=0;t<s.length;t+=1)s[t].call(n,function(t){var n=!1;return function(e){n||(n=!0,e?(a+=1)===s.length&&t(!0):t(!1))}}(e))}},e.or=function(){var s=Array.prototype.slice.call(arguments),a=0,n=this;return function(e){for(var t=0;t<s.length;t+=1)s[t].call(n,function(t){var n=!1;return function(e){n||(n=!0,e?t(!0):(a+=1)===s.length&&t(!1))}}(e))}},e.not=function(e){var s=this;return function(t){var n=!1;e.call(s,function(e){n||(n=!0,t(!e))})}},e.eq=function(e,t,n){this.tagger.get(e,function(e){n(e===t)})},e.ne=function(e,t,n){this.tagger.get(e,function(e){n(e!==t)})},e.startsWith=function(e,t,n){this.tagger.get(e,function(e){"string"!=typeof e&&(e=(e||"").toString()),n(e.substring(0,t.length)===t)})},e.matches=function(e,t,n){this.tagger.get(e,function(e){if("string"!=typeof e)e=(e||"").toString();else if("string"!=typeof t)return void n(!1);n(-1!==e.search(new RegExp(t)))})},e.on=function(e,t,n){var s=this;this.tagger.get(e,function(e){"function"==typeof e&&e.call(s,t,n)})},e.at=function(e,t,n){for(var s=0;s<t.length;s++){if(null==e)return n;if(e=Object.prototype.valueOf.call(e),!(t[s]in e))return n;e=e[t[s]]}return e},e),u.addMetaTag=function(e,t){var n,s=TAGX.$('[name="'+e+'"]');(n=0<s.length?s[0].content:n)&&(""!==n||""===t)||((n=document.createElement("meta")).id=e,n.name=e,n.content=t,document.getElementsByTagName("head").item(0).appendChild(n))},u.getMetaTag=function(e){e=TAGX.$('[name="'+e+'"]');return 0<e.length?e[0].content:""},u.isEmptyValue=function(e){return null==e||""===e},u.getValue=function(e,t,n){var s=arguments.length,a=e,i="",e=!1;return 2===s?e=t:3===s&&(i=t,e=n),u.isEmptyValue(a)?u.isEmptyValue(i)?!0===e?"null":"":i.toLowerCase?i.toLowerCase():i:"object"==typeof a?a instanceof Array?a.join("|").toLowerCase():u.stringifyJson(a):a.toLowerCase?a.toLowerCase():a},u.mapToQs=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=(n?"&":"")+t+"="+encodeURIComponent(e[t]));return n},u.QsTomap=function(e){for(var t=(e||location.search).replace("?","").split("&"),n={},s=0;s<t.length;s++){var a=t[s];n[a.split("=")[0]]=a.split("=")[1]}return n},u.includeFile=function(e,t,n,s,a){-1!==e.indexOf("https")&&(s?null!==i&&i.js(e,function(){a&&""!==a&&TAGX.$(TAGX).trigger(a)}):((s=document.createElement("script")).setAttribute("type","text/javascript"),s.setAttribute("async",!0===t),s.setAttribute("src",e),n=n||"body",document[n].appendChild(s)))},u.getCookie=function(e){e=document.cookie?document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)"):null;return e?decodeURI(e[2]):null},u.replaceQSValue=function(e,t,n){var s=new RegExp("([?|&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(s)?e.replace(s,"$1"+t+"="+n+"$2"):e+a+t+"="+n},u.jsonObjToDCSparams=function(e,t){if("object"!=typeof e)return e;var n,s=[],a=t||"DCSext.";for(n in e)e.hasOwnProperty(n)&&"object"!=typeof e[n]&&(s.push(a+""+n),s.push(e[n]));return s},u.stringifyJson=JSON?JSON.stringify:function(e){var t=typeof e;if("object"!==t||null===e)return"string"===t&&(e='"'+e+'"'),String(e);var n,s,a=[],i=e&&e.constructor===Array;for(n in e)!0===e.hasOwnProperty(n)&&("string"===(t=typeof(s=e[n]))?s='"'+s+'"':"object"===t&&null!==s&&(s=u.stringifyJson(s)),a.push((i?"":'"'+n+'":')+String(s)));return(i?"[":"{")+String(a)+(i?"]":"}")},u.getCanonicalUrl=function(){var e=location.href,t=TAGX.$("link[rel=canonical]");return e=1===t.length&&"object"==typeof t[0]&&"string"==typeof t[0].href?t[0].href:e},u.copyObj=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},u.mergeObjects=function(e,t,n){for(var s in t)t.hasOwnProperty(s)&&(u.isEmptyValue(t[s])||!u.isEmptyValue(e[s])&&!0===n||(e[s]=t[s]))},u.trackClicks=function(){TAGX.$(document).on("mousedown",function(e){var t,n,s,a,i,o=TAGX.$(e.target);try{void 0!=={a:!0,button:!0,span:!0,input:!0}[e.target.tagName.toLowerCase()]&&(t={eText:o.html(),offset:o.offset(),pDatumId:NYTD.pageEventTracker?NYTD.pageEventTracker.getDatumId():null},""!==e.target.id&&"undefined"!==e.target.id&&(t.eId=e.target.id),""!==e.target.className&&"undefined"!==e.target.className&&(t.eClasses=e.target.className),n=u.stringifyJson(t),(s=u.getCookie(u.txpcn))&&(i=(a=new Date).setTime(a.getTime()+31536e6),document.cookie=u.txpcn+"="+u.replaceQSValue(s,"augRef",n)+"; path=/; domain=.nytimes.com; expires="+i),localStorage&&localStorage.setItem("augRef",n))}catch(e){}})},u.wordCountSize=function(e){return e<100?"BLURB_Under_100":e<400?"SUPER_SHORT_100_399":e<800?"SHORT_400_799":e<1200?"MEDIUM_800_1199":e<1600?"LONG_1200_1600":"HEAVE_Over_1600"},u.getMeterValue=function(e,t){var n,s,a;if(t="boolean"!=typeof t||t,("string"==typeof e||"object"==typeof e&&e instanceof Array)&&(n=u.getCookie("nyt-m"))){for(e="string"==typeof e?[e]:e,s={},a=0;a<e.length;a++){var i,o=function(e,t){var n=new RegExp(e+"=([il]{1}).([^&]+)").exec(t);if(n&&3<=n.length)switch(n[1]){case"i":return parseInt(n[2],10);case"l":return TAGX.$(n[2].split(".").slice(1)).map(function(e){return parseInt(e,10)})}return null}(i=e[a],n);null===o&&t||(s[i]=o)}return s}return null},u.sendGA=function(e){var l=u.Ops.at,t=l(TAGX,["config","GoogleAnalytics"]),n=l(t,["tracker"],"ga"),s=l(t,["createOptions","name"],"");""!==s&&(s+=".");function a(e){var t=u.copyObj({},l(e,["hit"],{})),n=l(e,["nonInteraction"]);"boolean"==typeof n&&(t.nonInteraction=n);var s,a=l(e,["customDimensions"],{}),i=0;for(s in a)a.hasOwnProperty(s)&&(t["dimension"+i+"Key"]=s,t["dimension"+i+"Value"]=a[s],i++);var o,r=l(e,["customMetrics"],{}),c=0;for(o in r)r.hasOwnProperty(o)&&(t["metric"+c+"Key"]=o,t["metric"+c+"Value"]=r[o],c++);return u.copyObj(t,l(e,["customDimensions"],{})),u.copyObj(t,l(e,["customMetrics"],{})),t}window.dataLayer=window.dataLayer||[],window.dataLayer.push({data:{hit:null}}),window.dataLayer.push({event:"gaEvent",data:{hit:a(e)}}),t&&"function"==typeof window[n]&&window[n](s+"send",a(e))},u.redactEmailAddressesFromQueryString=function(e){return e&&"string"==typeof e?e.split("&").map(function(e){return e.replace(/email=.+(@|%40).+\..+/,"email=email_block")}).join("&"):e},u.isObject=function(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)},u.encodeString=function(e){for(var t=2166136261,n=0;n<e.length;++n)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0},u}(),TAGX.EventProxy=function(){"use strict";function r(){}function c(e,t){return"function"==typeof e?e:"function"==typeof t?t:void 0}function n(e){var t=m.copyObj({},l(e,["hit"],{})),n=l(e,["nonInteraction"]);"boolean"==typeof n&&(t.nonInteraction=n);var s,a=l(e,["customDimensions"],{}),i=0;for(s in a)a.hasOwnProperty(s)&&(t["dimension"+i+"Key"]=s,t["dimension"+i+"Value"]=a[s],i++);var o,r=l(e,["customMetrics"],{}),c=0;for(o in r)r.hasOwnProperty(o)&&(t["metric"+c+"Key"]=o,t["metric"+c+"Value"]=r[o],c++);return m.copyObj(t,l(e,["customDimensions"],{})),m.copyObj(t,l(e,["customMetrics"],{})),t}function y(e,t,n,s,a){var i,o;this.name=e,this.enabled=(o=!0,"boolean"==typeof(i=t=t||{})[e="enabled"]?i[e]:o),this.whitelist=t.whitelist||[],this.triggerFunc=c(n,r),this.whitelistFunc=c(a),this.initFunc=c(s,r)}var S=TAGX.$(TAGX),m=TAGX.Utils,l=m.Ops.at;y.prototype.appendWhitelist=function(e){this.whitelist=this.whitelist.concat(e)},y.prototype.setWhitelist=function(e){this.whitelist=e},y.prototype.enable=function(){this.enabled=!0},y.prototype.disable=function(){this.enabled=!1},y.prototype.init=function(){"function"==typeof this.initFunc&&this.initFunc()},y.prototype.isWhitelisted=function(e,t,n){return!(!this.whitelist||-1===this.whitelist.indexOf(e))||"function"==typeof this.whitelistFunc&&this.whitelistFunc(e,t,n)},y.prototype.trigger=function(e,t,n){this.enabled&&this.isWhitelisted(e,t,n)&&"function"==typeof this.triggerFunc&&(this.triggerFunc(e,t,n),t.consumed=t.consumed?t.consumed+1:1)};var b={GA:new y("GA",{whitelist:[]},function(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({data:{hit:null}}),window.dataLayer.push({event:"gaEvent",data:{hit:n(t)}}),"function"==typeof window[this.globalObj]&&window[this.globalObj](this.trackerName+"send",n(t))},function(){var e,t=l(TAGX,["config","GoogleAnalytics"]);t?(this.globalObj=l(t,["tracker"],"ga"),""!==(e=l(t,["createOptions","name"],""))&&(e+="."),this.trackerName=e,this.whitelist=this.whitelist.concat(l(t,["eventWhitelist"],[]))):this.enabled=!1}),GTM:new y("GTM",{whitelist:[]},function(e,t){window.console.log(m.copyObj({event:e},t))},function(){this.whitelist=this.whitelist.concat(l(TAGX,["config","GTM","eventWhitelist"],[]))})};return window.addEventListener("message",function(e){e&&e.origin&&/\.nytimes\.com(:[\d]+)?$/.test(e.origin)&&e.data&&"NYT:TAGX:EventProxy:trigger"===e.data.type&&window.TAGX.EventProxy.trigger.apply(window.TAGX.EventProxy,e.data.args)},!1),{on:function(e,n){S.on(e,function(e,t){n(t||e)})},one:function(e,n){S.one(e,function(e,t){n(t||e)})},off:function(e){S.off(e)},trigger:function(e,t,n){var s,a,i,o,r,c,l,u,g,f=window.dataLayer;if(0,e=e.replace(/\s+/g,"-"),t.proxyEventName=e,t.proxyEventType=n,s=e,a=t,i=n,Object.keys(b).forEach(function(e){b[e]instanceof y&&b[e].trigger(s,a,i)}),a.consumed,S.trigger(e,t),f&&(f.push({eventData:null}),f.push({event:e,eventData:t})),"string"==typeof n?r=[n]:"object"==typeof n&&n instanceof Array&&(r=n),"object"==typeof r&&r instanceof Array)for(var d=0;d<r.length;d++){var p=r[d];0===p.indexOf("tagx-")?((o=m.copyObj({},t))["et-event-name"]=p,S.trigger(p,o),f&&f.push({event:p,eventData:o})):(o=m.copyObj({},t),u=o,(g={}).assetUrl=u.assetURl||m.getCanonicalUrl(),g.url=u.url||location.href,g.referrer=document.referrer,g.subject="module-interactions",delete u.url,delete u.assetURl,g.moduleData=TAGX.Utils.stringifyJson(u),c=g,l="module-impression",u=o.action?o.action.toLowerCase():null,g=o.module?o.module.toLowerCase():null,n=p?p.toLowerCase():u,o.eventtimestamp=(new Date).getTime(),"impression"===n?(S.trigger(l,o),f&&f.push({event:l,eventData:c})):"pageview"===n||"page-view"===n?(c.subject="page",c.referrer=location.href,S.trigger("track-page-view",c),f&&f.push({event:"track-page-view",eventData:c})):"interaction"===n||null!==g?"page"===g?(S.trigger(l="page-interaction",o),f&&f.push({event:l,eventData:o})):(S.trigger(l="module-interaction",c),f&&f.push({event:l,eventData:c})):(c.subject="bi-proxy-data",S.trigger(l="bi-proxy-data",c),f&&f.push({event:l,eventData:c})))}},addAnalyticTarget:function(e,t,n){void 0!==b[e]&&!0!==n||(b[e]=new y(e,t))},getAnalyticTarget:function(e){return b[e]},removeAnalyticTarget:function(e){delete b[e]},listAnalyticsTargets:function(){return Object.keys(b)},tagsLoaded:function(){Object.keys(b).forEach(function(e){b[e]instanceof y&&b[e].init()})}}}(),TAGX.Globals={},TAGX.Globals.Dependency=function(t,e){"use strict";var n,s=this,a=!1,i=e.name||"",o="",r="function"==typeof e.getter?e.getter:function(){},c=e.eventHandler;this.getName=function(){return i},this.getValue=function(){return o},this.init=function(){o=r(),e.eventName&&"function"==typeof c&&(TAGX.EventProxy.on(e.eventName,function(e){n&&clearTimeout(n),c(e,s)}),"number"==typeof e.timeout&&(n=setTimeout(function(){n=0,TAGX.EventProxy.off(e.eventName),e.eventHandler({timeout_reached:!0},s)},e.timeout)))},this.fullfill=function(e){a||(a=!0,e&&(o=e),t&&"function"==typeof t.fire&&t.fire())},this.isFullfilled=function(){return a}},TAGX.GlobalTag=function(e){"use strict";var t=this,n=!1,s=[],a=[];this.hasTagInitialized=!1;var i=function(e){var t=typeof e;n?"function"==t?e():"string"==t&&TAGX.EventProxy.trigger(e,{}):"function"!=t&&"string"!=t||a.push(e)};this.name=e.name||"unknown_global";return this.instant=e.instant||!1,e&&e.dependencies instanceof Array&&(s=e.dependencies.filter(function(e){return!e.rule||e.rule()}).map(function(e){return new TAGX.Globals.Dependency(this,e)}.bind(this))),this.fire=function(){this.tagFired()},this.init=function(e){this._postInit()},this._postInit=function(){this.hasTagInitialized=!0,s.map(function(e){e.init()})},this.hasAllDependenciesBeenFullfilled=function(){return s.reduce(function(e,t){return e&&t.isFullfilled()},!0)},this.getDependencyValues=function(){return s.reduce(function(e,t){var n=t.getName(),t=t.getValue();return n&&t&&(e[n]=t),e},{})},this.additionalEventData={},this.addTagData=function(e){return TAGX.Utils.copyObj(this,e||{})},this.addEventData=function(e){return TAGX.Utils.copyObj(this.additionalEventData,e||{})},this.addDependant=function(e){i(e)},this.tagFired=function(){n=!0,function(){for(;0<a.length;)i(a.pop())}()},this.datalayerIsReady=function(){},this.datalayerReady=TAGX.datalayerReady,!0!==this.datalayerReady&&TAGX.EventProxy.one("TAGX:dataLayer:ready",function(){(t.datalayerReady=!0)===e.notifyWhenDatalayerReady&&t.hasTagInitialized&&t.datalayerIsReady()}),this},TAGX.globalMaps={"nyt-v5":["audioEvents","videoEvents","comscore","comscoreVideo"],nytv:["audioEvents","videoEvents","comscore","comscoreVideo"],nyt4:["audioEvents","videoEvents","comscore","comscoreVideo"],mobileWeb:["audioEvents","videoEvents","comscore","comscoreVideo"],blogs:["audioEvents","videoEvents","comscore","comscoreVideo"],nytcooking:["audioEvents","videoEvents","comscore","comscoreVideo"],MOPS:["audioEvents","facebook","twitter"],"nyt-search":["audioEvents","comscore"],"NYT-Watching":["audioEvents","comscore"],"nyt-watching":["audioEvents","comscore"],"nyt-international":["audioEvents","comscore"],"games-crosswords":["audioEvents","comscore"],"nyt-noSourceApp":["audioEvents"],"NYT-Well":["comscore"],"":["comscore"]},TAGX.GlobalsInit=function(){"use strict";var e,t,n,s=TAGX.Utils.getMetaTag("sourceApp"),a=TAGX.globalMaps[s]||[];if(0<(a=0<a.length&&/^.{5}s/.test(TAGX.Utils.getCookie("nyt-purr")||"")?a.filter(function(e){return!/comscore/.test(e)}):a).length&&/^.{4}p/.test(TAGX.Utils.getCookie("nyt-purr")||"")?a=a.filter(function(e){return!/comscore|facebook|linkedin|pinterest|twitter/.test(e)}):0<a.length&&/^.{4}e/.test(TAGX.Utils.getCookie("nyt-purr")||"")&&(a=a.filter(function(e){return!/audioEvents|comscore|facebook|linkedin|pinterest|twitter|videoEvents/.test(e)})),0<a.length)for(e=0;e<a.length;e++)t=a[e],(n=TAGX.Globals[t])instanceof TAGX.GlobalTag&&(n.init(),n.instant&&(n.fire(),n.oneAndDone&&delete TAGX.Globals[t]))},TAGX.useGlobal=function(e){"use strict";var t=TAGX.Utils.getMetaTag("sourceApp"),n=TAGX.globalMaps,s=TAGX.Globals[e]&&TAGX.Globals[e]instanceof TAGX.GlobalTag,e=n[t]&&-1<n[t].indexOf(e);return!(!s||!e)},TAGX.ScrollManager=function(){"use strict";var e,i={subs:[],currentScrollTop:window.scrollY},t={25:"25%",50:"50%",75:"75%",100:"100%"};return i.didIscroll=function(e){return i.currentScrollTop!==e},i.pageWasScrolled=function(e,t,n){if(i.subs&&0<i.subs.length)for(var s=0;s<i.subs.length;s+=1){var a=i.subs[s];a.functionToRun&&a.functionToRun instanceof Function&&(a.args=a.args||{},i.copyObj(a.args,{dir:e,howMuch:t,current:n,whichSub:s}),a.functionToRun(a.args))}},i.elementInViewport=function(e,t){if(!i.isElement(e))return!1;var n=e.getBoundingClientRect(),e=t?e.offsetHeight/2:0;return 0<=n.top&&0<=n.left&&n.bottom-e<=window.innerHeight&&n.right<=window.innerWidth},i.isElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},i.isElementVisible=function(e){var t=e.element||TAGX.$(e.elementSelector)[0];i.elementInViewport(t,!!e.isImpression)&&(void 0!==e.whichSub&&i.removeSub(e.whichSub),e.callback(!0))},i.percentageGoals=function(e){parseInt(window.scrollY/(i.getDocHeight()-window.innerHeight)*100)>=e.milestones[0]&&e.callback(!0,t[e.milestones.shift()]),0===e.milestones.length&&void 0!==e.whichSub&&i.removeSub(e.whichSub)},i.trackVisible=function(e,t){i.addSubs({functionToRun:i.isElementVisible,args:{callback:t,element:TAGX.$(e[0])[0],elementSelector:e[0]}})},i.trackImpression=function(e,t){i.addSubs({functionToRun:i.isElementVisible,args:{callback:t,element:TAGX.$(e[0])[0],elementSelector:e[0],isImpression:!0}})},i.trackScrollMilestones=function(e){i.addSubs({functionToRun:i.percentageGoals,args:{callback:e,milestones:Object.keys(t)}})},i.addSubs=function(e){i.isWatching||i.initWatch(),i.subs.push(e)},i.removeSub=function(e){i.subs.splice(e,1),i.subs&&0===i.subs.length&&i.stopWatching()},i.copyObj=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},i.getDocHeight=function(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},i.isWatching=!1,i.initWatch=function(){e=setInterval(function(){var e,t,n=window.scrollY;i.didIscroll(n)&&(t=(e=i.currentScrollTop<n?"down":"up")===Math.abs(i.currentScrollTop-n),i.currentScrollTop=n,i.pageWasScrolled(e,t,n))},250),i.isWatching=!0},i.stopWatching=function(){e&&(clearInterval(e),i.isWatching=!1)},i}(),TAGX.Globals.audioEvents=new TAGX.GlobalTag({name:"audio-events",instant:!1}),TAGX.Globals.audioEvents.init=function(){TAGX.EventProxy.on("tagx-event-audio",function(e){TAGX.Globals.audioEvents.fire({eventData:e})})},TAGX.Globals.audioEvents.fire=function(e){var t,n,s,a=TAGX.config?TAGX.config.GoogleAnalytics:null,i=e.eventData;a&&a.id&&i&&((e={"audio-inview":[t="Audio "+TAGX.Utils.getMetaTag("PT").toLowerCase(),"in view",n=decodeURIComponent(i.mData&&i.mData.videoName||""),s={dimension85:i.mData&&i.mData.series?i.mData.series:"null"}],"user-play-audio":[t,"play",n,(e=function(e){return TAGX.Utils.copyObj(e,s)})({metric34:1,nonInteraction:!1})],"audio-complete":[t,"viewed:100%",n,e({metric38:1,nonInteraction:!1})],"audio-pause":[t,"pause",n,e({nonInteraction:!1})],"audio-resume":[t,"resume",n,e({nonInteraction:!1})],"percent-25-heard":[t,"viewed: 25%",n,e({metric35:1,nonInteraction:!1})],"percent-50-heard":[t,"viewed: 50%",n,e({metric36:1,nonInteraction:!1})],"percent-75-heard":[t,"viewed: 75%",n,e({metric37:1,nonInteraction:!1})],"audio-error":[t,"media error",n,e({nonInteraction:!1})]}[i.eventName])&&(i=a.tracker||"ga",a=a.createOptions&&a.createOptions.name?a.createOptions.name+".":"",(e=e.slice(0)).unshift(a+"send","event"),window[i].apply(window,e)))},function(n,a){"use strict";var i=n.Globals.comscoreVideo=new n.GlobalTag({name:"comscoreVideo",instant:!1});i.init=function(){i.streamingAnalytics=new a.ReducedRequirementsStreamingAnalytics({publisherId:"3005403"}),n.EventProxy.on("tagx-event-video",n.Globals.comscoreVideo.fire)},i.stop=function(){i.streamingAnalytics.stop()},i.play=function(e,t){var n=a.ReducedRequirementsStreamingAnalytics.ContentType,s=n.ShortFormOnDemand;t&&(s=n.Live),i.streamingAnalytics.playVideoContentPart(e,s)},i.playAdvertisement=function(e){var t=a.ReducedRequirementsStreamingAnalytics.AdType;i.streamingAnalytics.playVideoContentPart({ns_st_cl:e.videoDuration},t.LinearOnDemandMidRoll)},i.fire=function(e){var t="live"===e.mData.videoDeliveryMethod,n=i.generateMetaData(e);return i.isPlayAction(e.eventName)?i.play(n,t):i.isPauseAction(e.eventName)?i.stop():i.isAdStart(e.eventName)?i.playAdvertisement(e):i.isAdStop(e.eventName)?i.stop():void 0},i.isPlayAction=function(e){return"auto-play-start"===e||"user-play"===e||"resume"===e},i.isPauseAction=function(e){return"pause"===e||"video-complete"===e},i.isAdStart=function(e){return"ad-start"===e},i.isAdStop=function(e){return"ad-pause"===e||"ad-complete"===e},i.generateMetaData=function(e){var t=e||{},e=t.mData||{};return{ns_st_ci:t.contentId||"*null",ns_st_cl:e.videoDuration||"*null",ns_st_pu:e.videoFranchise||"*null",ns_st_pr:decodeURIComponent(e&&e.videoName||"*null"),ns_st_tpr:"*null",ns_st_ep:"*null",ns_st_tep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ge:e.videoType||"*null",ns_st_ia:1,ns_st_ddt:"*null",ns_st_tdt:"*null",ns_st_st:"*null",c3:t.contentCollection,c4:"*null",c6:"*null",ns_st_ce:"*null"}},i.setEventListeners=function(){for(var e=["auto-play-start","user-play","resume","pause","video-complete","ad-start","ad-pause","ad-complete"],t=e.length-1;0<=t;t--)n.EventProxy.on(e[t],n.Globals.comscoreVideo.fire)}}(window.TAGX,window.ns_),TAGX.Globals.comscore=new TAGX.GlobalTag({name:"comscore",instant:!0}),TAGX.Globals.comscore.mappings={business:"business","business - global":"global","Business Day - Dealbook":"dealbook","business - economy":"economy","business - energy-environment":"energy_environment","business - media":"media","business - smallbusiness":"smallbusiness","your-money":"your_money","Business Day - Economy":"economix","Business - Media and Advertising":"mediadecoder","Business Day - Small Business":"boss","Business Day - Your Money":"bucks","Business - Markets":"markets","Autos - wheels":"wheels","Science - Environment":"green",technology:"technology","technology - personaltech":"personaltech","Technology - bits":"bits","Technology - Personal Tech":"gadgetwise","Technology - pogue":"pogue","General - open":"open",style:"style",fashion:"fashion",dining:"dining",garden:"garden","fashion - weddings":"weddings","t-magazine":"t_magazine","T:Style - tmagazine":"t_style","Style - Dining":"dinersjournal","Style - Fashion":"runway","Style - parenting":"parenting",arts:"arts","arts - design":"design",books:"books","arts - dance":"dance",movies:"movies","arts - music":"music","arts - television":"television",theater:"theater","arts - video-games":"video_games","Arts - Event Search":"event_search","Arts - artsbeat":"artsbeat","Movies - carpetbagger":"carpetbagger",health:"health","health - research":"research","health - nutrition":"nutrition","health - policy":"policy","health - views":"views","Health - Health Guide":"health_guide","Health - well":"well","Health - newoldage":"newoldage","Health - consults":"consults",science:"science","science - earth":"earth","science - space":"space","Science - scientistatwork":"scientistatwork","Opinion - dotearth":"dotearth"},TAGX.Globals.comscore.setConfig=function(e){"use strict";this.config=["c1=2","c2=3005403"];var t=[],n=TAGX.Utils.getCanonicalUrl(),s=TAGX.Utils.getMetaTag("CG"),a=TAGX.Utils.getMetaTag("SCG");s&&t.push(s),a&&t.push(a),t=this.mappings[t.join(" - ")],-1!==n.indexOf("markets.on.nytimes.com")&&(-1!==n.indexOf("portfolio")&&(t="portfolio"),-1!==n.indexOf("screener")&&(t="screener"),-1!==n.indexOf("analysis_tools")&&(t="analysis_tools")),t&&(this.config.push("comscorekw="+t),"object"==typeof window._comscore[0]&&(window._comscore[0].comscorekw=t))},TAGX.Globals.comscore.addListeners=function(e){"use strict";var t,n,s,a,i,o,r,c,l;function u(){c(),i!==r&&(l(),r=i)}this.listenersOn||(t=!0,-1<"article-multimedia-blogs-feed-oak-post".indexOf(TAGX.Utils.getMetaTag("PT").toLowerCase())&&(r=1,Date.now(),l=function(){(new Image).src="//www.nytimes.com/svc/comscore/pvc.html",TAGX.Globals.comscore.fire()},(c=function(){n=TAGX.ScrollManager.currentScrollTop,TAGX.ScrollManager.getDocHeight(),a=window.innerHeight,s=window.innerWidth<768,a=s?4*a:2*a,i=Math.floor(n/a)+1})(),TAGX.ScrollManager.addSubs({functionToRun:function(){clearTimeout(o),o=setTimeout(u,500)},args:{}})),document.location.pathname.match("/slideshow")&&TAGX.$(TAGX).on("tagx-comscore",function(e){t?t=!1:TAGX.Globals.comscore.fire()}),document.location.pathname.match("/search")&&(window.onpopstate=function(e){e.state||TAGX.Globals.comscore.fire()}),this.listenersOn=!0)},TAGX.Globals.comscore.init=function(){"use strict";window._comscore=window._comscore||[],window._comscore.push({c1:"2",c2:"3005403"}),this.setConfig(),TAGX.Utils.includeFile("https://sb.scorecardresearch.com/beacon.js",!1,"body",!0,"loaded:beacon.js")},TAGX.Globals.comscore.fire=function(e){"use strict";this.listenersOn?(this.setConfig(),udm_("https://sb.scorecardresearch.com/b?"+this.config.join("&"))):this.addListeners()},TAGX.Globals.etLiInclude=new TAGX.GlobalTag({name:"eventtracker-include",instant:!0}),TAGX.Globals.facebook=new TAGX.GlobalTag({name:"facebook",instant:!1,notifyWhenDatalayerReady:!0,dependencies:[{name:"mc",getter:function(){var e=TAGX.Utils.getMeterValue("v");return null!=e&&e.v||""},eventName:"nytd:meter:viewedCountUpdated",eventHandler:function(e,t){t.fullfill(e&&e.v||"")},timeout:5e3}]}),TAGX.Globals.facebook.init=function(){var e,t,n;t=window,n=document,t.fbq||(e=t.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},t._fbq||(t._fbq=e),(e.push=e).loaded=!0,e.version="2.0",e.queue=[],(t=n.createElement("script")).async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js",(n=n.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n)),fbq("init",this.pixelId||"592202027582499"),this._postInit()},TAGX.Globals.facebook.datalayerIsReady=function(){this.addTagData({eventName:"PageView"})},TAGX.Globals.facebook.fire=function(){var e,t;this.hasAllDependenciesBeenFullfilled()&&this.datalayerReady&&(e={ad:parseInt(TAGX.data.get("TAGX.L.adv")),articleId:TAGX.Utils.getMetaTag("articleid"),fbk:localStorage.getItem("kxsegs")||"",pScore:TAGX.data.get("propensity.p"),c1Score:TAGX.data.get("propensity.c1"),c2Score:TAGX.data.get("propensity.c2"),c3Score:TAGX.data.get("propensity.c3"),sourceApp:TAGX.Utils.getMetaTag("sourceApp"),watSegs:TAGX.data.get("user.watSegs"),fbBrowser:/\/FBIOS/i.test(navigator.userAgent),content_ids:[TAGX.Utils.encodeString(window.location.pathname)],content_type:"product",content_category:TAGX.Utils.getMetaTag("dfp-ad-unit-path"),userAgent:navigator.userAgent,referrer:TAGX.data.get("referrer.url"),pageType:TAGX.data.get("presentation.pageType")},(t=TAGX.data.get("user.type"))&&"anon"!==t&&(e.userType=t,e.retentionRiskSegment=TAGX.data.get("user.retentionSegment"),e.bundleCoreDigi=TAGX.data.get("user.subscriberInfo.coreDigiBundle"),e.bundleCoreHD=TAGX.data.get("user.subscriberInfo.coreHDBundle")),(t=TAGX.data.get("agentID"))&&(e.agentID=t),"number"==typeof(t=TAGX.data.get("propensity.engagementLevel"))&&0<t&&(e.engagementLevel=TAGX.data.get("propensity.engagementLevel")),t=this.getDependencyValues(),e=TAGX.Utils.copyObj(e,t),e=TAGX.Utils.copyObj(e,this.additionalEventData),e=TAGX.Utils.copyObj(e,safelyCollectKeyweeEvent()),t=this.eventName||"PageView",fbq(trackMethod(t),t,e),this.tagFired(),this.resetEventName())},TAGX.Globals.facebook.resetEventName=function(){this.eventName=null},TAGX.Globals.linkedin=new TAGX.GlobalTag({name:"linkedin",instant:!0,oneAndDone:!0}),TAGX.Globals.linkedin.fire=function(){window._linkedin_data_partner_id="40524";var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",e.parentNode.insertBefore(t,e),this.tagFired()},TAGX.Globals.pinterest=new TAGX.GlobalTag({name:"pinterest",instant:!1,notifyWhenDatalayerReady:!0}),TAGX.Globals.pinterest.init=function(){var e,t;window.pintrk||(window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},(t=window.pintrk).queue=[],t.version="3.0",(e=document.createElement("script")).async=!0,e.src="https://s.pinimg.com/ct/core.js",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)),pintrk("load","2612709798038"),pintrk("page"),delete pintrk.tagId,pintrk("load","2614963538652"),pintrk("page",{page_name:TAGX.Utils.getMetaTag("headline"),page_category:TAGX.Utils.getMetaTag("dfp-ad-unit-path")}),this._postInit()},TAGX.Globals.pinterest.datalayerIsReady=function(){this.fire()},TAGX.Globals.pinterest.fire=function(){var e;this.hasAllDependenciesBeenFullfilled()&&this.datalayerReady&&(e={ad:parseInt(TAGX.data.get("TAGX.L.adv")),articleId:TAGX.Utils.getMetaTag("articleid"),fbk:localStorage.getItem("kxsegs")||"",pScore:TAGX.data.get("propensity.p"),aScore:TAGX.data.get("propensity.a"),sourceApp:TAGX.Utils.getMetaTag("sourceApp"),watSegs:TAGX.data.get("user.watSegs"),fbBrowser:/\/FBIOS/i.test(navigator.userAgent),content_ids:[TAGX.Utils.encodeString(window.location.pathname)],content_type:"product",content_category:TAGX.Utils.getMetaTag("dfp-ad-unit-path"),userAgent:navigator.userAgent,value:0,currency:"USD"},e=TAGX.Utils.copyObj(e,this.getDependencyValues()||{}),0<(e=TAGX.Utils.copyObj(e,this.additionalEventData||{})).value&&["lead"].indexOf(this.eventName)<0&&(this.eventName="checkout"),pintrk("track",this.eventName||"pagevisit",e),this.tagFired())},TAGX.Globals.pinterest.addToCart=function(){pintrk("track","addtocart")},TAGX.Globals.twitter=new TAGX.GlobalTag({name:"twitter",instant:!0,oneAndDone:!0}),TAGX.Globals.twitter.init=function(){var e,t,n;t=window,n=document,t.twq||((e=t.twq=function(){e.exe?e.exe.apply(e,arguments):e.queue.push(arguments)}).version="1.1",e.queue=[],(t=n.createElement("script")).async=!0,t.src="//static.ads-twitter.com/uwt.js",(n=n.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n)),twq("init","nuqgp"),this._postInit()},TAGX.Globals.twitter.fire=function(){twq("track","PageView"),this.tagFired()},TAGX.Globals.videoEvents=new TAGX.GlobalTag({name:"video-events",instant:!1}),TAGX.Globals.videoEvents.init=function(){TAGX.$(TAGX).on("tagx-event-video",function(e){TAGX.Globals.videoEvents.fire({eventData:e})})},TAGX.Globals.videoEvents.fire=function(e){var i,t=TAGX.config?TAGX.config.GoogleAnalytics:null,n=e.eventData;if(t&&t.id&&n){var s=("live"===n.mData.videoDeliveryMethod?"Live | ":"Video | ")+(n.version||""),a=decodeURIComponent(n.mData&&n.mData.videoName||""),o={dimension141:n.mData.videoPrimaryPlaylistId||"null",dimension142:n.mData.videoPrimaryPlaylistName||"null",dimension138:n.mData.videoFranchise||"null",dimension139:n.mData.videoSection||"null",dimension123:n.contentId||"null",dimension124:n.mData.adDuration||"null",dimension163:n.mData.videoType||"null"},e={"percent-25-viewed":1,"percent-50-viewed":1,"percent-75-viewed":1,"video-complete":1,"user-play":1,"auto-play-next":1,"auto-play-start":1};TAGX.Utils.copyObj({"ad-start":1,"ad-complete":1,"skip-ad":1,"player-load":1,"video-load":1},e).hasOwnProperty(n.eventName)&&(o.dimension125=n.mData.adPosition),e.hasOwnProperty(n.eventName)&&(i=[1,2,3,4,5,10,20,30,40],r=function(a){return i.reduce(function(e,t,n){if("string"==typeof e)return e;var s=30*e,e=30*t;return 0!==s&&(s+=1),s<=a&&a<=e?n<=4?s+"-"+e+" seconds":5===n?s+" seconds to "+e/60+" minutes":Math.floor(s/60)+" minutes to "+e/60+" minutes":n===i.length-1?"more than "+e/60+" minutes":t},0)},o.dimension126=n.mData.videoDuration,o.dimension127=r(n.mData.videoDuration));var r=function(e){return TAGX.Utils.copyObj(e,o)},s={"ad-complete":[s,"ad complete",a,o],"ad-pause":[s,"ad pause",a,o],"ad-resume":[s,"ad resume",a,o],"ad-start":[s,"ad start",a,o],"auto-play-next":[s,"autoplay next",a,r({metric32:1})],"auto-play-start":[s,"autoplay start",a,r({metric31:1})],"exit-fullscreen":[s,"exit fullscreen",a,o],"go-fullscreen":[s,"go fullscreen",a,o],"hd-off":[s,"hd off",a,o],"hd-on":[s,"hd on",a,o],pause:[s,"pause",a,o],"percent-25-viewed":[s,"viewed: 25%",a,r({metric24:1})],"percent-50-viewed":[s,"viewed: 50%",a,r({metric25:1})],"percent-75-viewed":[s,"viewed: 75%",a,r({metric26:1})],"3-seconds-viewed":[s,"3-seconds-viewed",a,r({metric42:1})],"30-seconds-viewed":[s,"30-seconds-viewed",a,r({metric43:1})],"360-drag-start":[s,"360-drag-start",a,r({metric58:1})],"360-drag-stop":[s,"360-drag-stop",a,r({metric59:1})],"360-compass-click":[s,"360-compass-click",a,r({metric60:1})],resume:[s,"resume",a,o],"share-embed":[s,"share: embed",a,r({metric4:1})],"share-facebook":[s,"share: facebook",a,r({metric4:1})],"share-twitter":[s,"share: twitter",a,r({metric4:1})],"skip-ad":[s,"ad skip",a,o],"user-play":[s,"user play",a,r({metric1:1})],"video-complete":[s,"viewed:100%",a,r({metric3:1})],"video-load":[s,"video load",a,o],"media-error":[s,"media-error",a,r({nonInteraction:!0})],"cherry-api-request-error":[s,"cherry-api-request-error",a,r({nonInteraction:!0})],"fw-admanager-load-error":[s,"fw-admanager-load-error",a,r({nonInteraction:!0})],"qos-library-load-failure":[s,"qos-library-load-failure",a,r({nonInteraction:!0})],"rendition-not-found":[s,"rendition-not-found",a,r({nonInteraction:!0})],"player-load":[s,"player load",a,r({nonInteraction:!0})],"imax-countdown-pause":[s,"imax-countdown-pause",a,r({nonInteraction:!1})],"imax-countdown-complete":[s,"imax-countdown-complete",a,r({nonInteraction:!1})]}[n.eventName];if(!s)return;r=t.tracker||"ga",t=t.createOptions&&t.createOptions.name?t.createOptions.name+".":"",s=s.slice(0);s.unshift(t+"send","event"),window[r].apply(window,s)}"object"==typeof n&&(this.fireFacebookPixel(n.eventName,a),this.etEvent(n))},TAGX.Globals.videoEvents.fireFacebookPixel=function(e,t){var n;-1<["auto-play-next","auto-play-start","percent-25-viewed","percent-50-viewed","percent-75-viewed","user-play"].indexOf(e)&&(n={videoTitle:t},t="videoPlay",-1<e.indexOf("play")&&(-1<e.indexOf("user")?n.playType="manual":n.playType=e.replace("auto-play-","")),-1<e.indexOf("viewed")&&(t="videoViewed",n.milestone=e.replace(/\D/g,"")),TAGX.Globals.facebook.addTagData({eventName:t}),TAGX.Globals.facebook.addEventData(n),TAGX.Globals.facebook.fire())},TAGX.Globals.videoEvents.etEvent=function(e){var t=(e=e||{}).mData||{},t=TAGX.Utils.copyObj({subject:"video-nytv",reqOrigin:"tagx",videoId:e.contentId,event:e.eventName,url:location.href,referrer:document.referrer,sourceApp:TAGX.Utils.getMetaTag("sourceApp")},t);NYTD&&NYTD.EventTracker&&(new NYTD.EventTracker).track(t)},TAGX.Ops=TAGX.Utils.Ops,function(){"use strict";function n(e){return(e=t[e])&&"object"==typeof s[e]?e:"GTM-WF9QCL2"}var s={"GTM-WF9QCL2":{environment:{dev:"&gtm_auth=Fp4R_D_6VITV0mcgcnAllg&gtm_preview=env-26",stg:"&gtm_auth=2OYi_i3OrmihRzhBD3aNjA&gtm_preview=env-25",prod:"&gtm_auth=28ykelszAvyta5q5YGRVOg&gtm_preview=env-53"}},"GTM-W497R4T":{environment:{dev:"&gtm_auth=lS5a8mIBCd-it7Zw1dVyQA&gtm_preview=env-8",stg:"&gtm_auth=ZDSWnE3pyz4LeGVbEbctlA&gtm_preview=env-7",prod:"&gtm_auth=OukvtoPH5NWW5GJEQuyMDA&gtm_preview=env-5"}},"GTM-TQS5DX3":{environment:{dev:"&gtm_auth=-OeOozCKknzn6xWEiZyVAw&gtm_preview=env-8",stg:"&gtm_auth=JFuuNSE8tP8ntxAdHC88aQ&gtm_preview=env-7",prod:"&gtm_auth=BxlVOowD_jvqTyNZ6sqMEA&gtm_preview=env-5"}},"GTM-5FQC2Q6":{environment:{dev:"&gtm_auth=XGwCXyHod19Tpm8Y9XpOkg&gtm_preview=env-8",stg:"&gtm_auth=bETFf1tJOBO-OFz76dVnRw&gtm_preview=env-7",prod:"&gtm_auth=DyMl56JJEuAAdIQqYEzq1w&gtm_preview=env-6"}},"GTM-PWGSKCP":{environment:{dev:"&gtm_auth=J_LvxkvwsVMfpjWqTcQBNA&gtm_preview=env-78",stg:"&gtm_auth=qeK11m-OfQ7XflPIT9gvvg&gtm_preview=env-80",prod:"&gtm_auth=9V0d3w6WmeX7FsDZjpNdkA&gtm_preview=env-81"}},"GTM-WV45RD":{environment:{dev:"&gtm_auth=FW9USmjLRF6HUvnIsF6jbA&gtm_preview=env-191",stg:"&gtm_auth=oUzQwB8alb7LuaGyUmNemQ&gtm_preview=env-192",prod:"&gtm_auth=Pq5EB1YGWLHKPT262NMvkQ&gtm_preview=env-193"}}},t={nyt4:"GTM-WF9QCL2","nyt-v5":"GTM-WF9QCL2","seg-pip":"GTM-TQS5DX3",SEG:"GTM-5FQC2Q6",nytcooking:"GTM-WV45RD"};window.TAGX.Utils.getGTMContainerId=n,window.TAGX.Utils.getGTMContainerEnv=function(e,t){e=n(e);return s[e].environment[t=t||"prod"]||s[e].environment.prod}}(),function(){"use strict";var n,i=window.TAGX,o=-1<document.location.host.indexOf(".dev.")?"dev":-1<document.location.host.indexOf(".stg.")||-1<document.location.host.indexOf(".stage.")||-1<document.location.host.indexOf(".sbx.nytimes.com")?"stg":"prod",r=i.Utils.getMetaTag("sourceApp"),e=window.TAGX.Utils.getGTMContainerId(r),t=i.Utils.getGTMContainerEnv(r,o);function s(){var t,a,e=n.responseText?JSON.parse(n.responseText):{user:{},asset:{},session:{},version:""};function s(e,n){return a(function(e,t){try{return void 0===e[t]?!0===n?""===t?e:(e[t]={},e[t]):"":(!0===n&&"object"!=typeof e[t]&&(e[t]={}),e[t])}catch(e){return""}},t,e.split("."))}t={agentID:i.Utils.getCookie("nyt-a"),cookies:{"nyt-a":i.Utils.getCookie("nyt-a")},TAGX:{L:e.user.tracking},user:e.user,propensity:e.user.propensity},a=function(e,t,n){if(n.length<1)return t;var s=n.shift();return a(e,e(t,s),n)},i.data={get:s,set:function(e,t){var n=e.split("."),e=n.pop();s(n.join("."),!0)[e]=t}},window.dataLayer.push({event:"pageDataReady",application:{name:r,environment:o},referrer:{url:document.referrer},asset:e.asset,user:e.user,version:e.version,session:e.session}),"function"!=typeof i.GlobalsInit||/^out/.test(i.Utils.getCookie("NYT-T")||"")||i.GlobalsInit(),i.EventProxy.trigger("TAGX:dataLayer:ready",{proxyEventName:"tagxDataLayerReady"}),i.taggerReady=!0}!function(e,t,n,s,a){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});n=t.getElementsByTagName("script")[0],t=t.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtm.js?id="+s+a+"&gtm_cookies_win=x",n.parentNode.insertBefore(t,n)}(window,document,"dataLayer",e,t),t={host:"prod"==o?"a.nytimes.com":"a.dev.nytimes.com",referrer:document.referrer,assetUrl:(document.querySelector("link[rel=canonical]")||document.location).href},(n=new XMLHttpRequest).withCredentials=!0,n.open("GET","https://"+t.host+"/svc/nyt/data-layer?caller_id="+r+"-jkjs&assetUrl="+encodeURIComponent(t.assetUrl)+"&jkcb="+Date.now(),!0),n.onload=s,n.addEventListener("error",function(){s(),window.dataLayer.push({event:"impression",eventData:{trigger:"module",type:"error"},module:{name:"JKidd API Error",label:n.statusText?n.status+":"+n.statusText:n.status}})}),n.send()}();
//# sourceMappingURL=json-kidd.min.js.map